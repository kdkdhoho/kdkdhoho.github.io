{"version":3,"file":"component---src-pages-search-js-e7b3e2bf72b1d88e468f.js","mappings":"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","sources":["webpack://gatsby-starter-blog/./src/pages/search.js","webpack://gatsby-starter-blog/./src/pages/search-page.module.css"],"sourcesContent":["import * as React from \"react\"\nimport { Link, graphql, navigate } from \"gatsby\"\nimport { useLocation } from \"@reach/router\"\n\nimport Layout from \"../components/layout\"\nimport Seo from \"../components/seo\"\nimport * as styles from \"./search-page.module.css\"\nimport {\n  getFirstImageFromHtml,\n  getReadingTimeText,\n  matchesPostQuery,\n  normalizeSearchQuery,\n} from \"../utils/post-utils\"\n\nconst highlightSearchTerm = (text, searchTerm) => {\n  if (!searchTerm || !text) return text\n  const regex = new RegExp(`(${searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")})`, \"gi\")\n  return text.replace(regex, \"<mark>$1</mark>\")\n}\n\nconst sortPosts = (posts, sortType, searchQuery) => {\n  const normalizedQuery = normalizeSearchQuery(searchQuery)\n\n  switch (sortType) {\n    case \"title\":\n      return [...posts].sort((a, b) =>\n        (a.frontmatter.title || \"\").localeCompare(b.frontmatter.title || \"\", \"ko\")\n      )\n    case \"relevance\":\n      return [...posts].sort((a, b) => {\n        const aTitle = (a.frontmatter.title || \"\").toLowerCase()\n        const bTitle = (b.frontmatter.title || \"\").toLowerCase()\n        const aInTitle = aTitle.includes(normalizedQuery) ? 1 : 0\n        const bInTitle = bTitle.includes(normalizedQuery) ? 1 : 0\n        return bInTitle - aInTitle\n      })\n    case \"date\":\n    default:\n      return [...posts].sort((a, b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date))\n  }\n}\n\nconst SearchPage = ({ data }) => {\n  const location = useLocation()\n  const posts = data.allMarkdownRemark.nodes\n  const siteTitle = data.site.siteMetadata?.title || `Title`\n\n  const queryFromUrl = React.useMemo(() => {\n    const params = new URLSearchParams(location.search || \"\")\n    return params.get(\"q\") || \"\"\n  }, [location.search])\n\n  const [searchInput, setSearchInput] = React.useState(queryFromUrl)\n  const [sortBy, setSortBy] = React.useState(\"date\")\n\n  React.useEffect(() => {\n    setSearchInput(queryFromUrl)\n  }, [queryFromUrl])\n\n  const filteredPosts = React.useMemo(() => {\n    if (queryFromUrl.trim().length < 2) return []\n    return posts.filter(post => matchesPostQuery(post, queryFromUrl))\n  }, [posts, queryFromUrl])\n\n  const sortedPosts = React.useMemo(\n    () => sortPosts(filteredPosts, sortBy, queryFromUrl),\n    [filteredPosts, sortBy, queryFromUrl]\n  )\n\n  const handleSearchSubmit = event => {\n    event.preventDefault()\n    const nextQuery = searchInput.trim()\n    if (nextQuery.length >= 2) {\n      navigate(`/search?q=${encodeURIComponent(nextQuery)}`, { replace: true })\n      return\n    }\n    navigate(\"/search\", { replace: true })\n  }\n\n  return (\n    <Layout location={location} title={siteTitle}>\n      <section className={styles.searchPage}>\n        <header className={styles.searchHeader}>\n          <h1 className={styles.searchTitle}>검색 결과</h1>\n          <form className={styles.searchForm} onSubmit={handleSearchSubmit}>\n            <input\n              type=\"text\"\n              placeholder=\"검색어를 입력하세요...\"\n              value={searchInput}\n              onChange={event => setSearchInput(event.target.value)}\n              className={styles.searchInput}\n            />\n            <button type=\"submit\" className={styles.searchButton}>\n              검색\n            </button>\n          </form>\n        </header>\n\n        {queryFromUrl.length >= 2 ? (\n          <>\n            <div className={styles.resultsHeader}>\n              <h2 className={styles.resultsTitle}>\n                '{queryFromUrl}' 검색 결과 <span>({filteredPosts.length}개)</span>\n              </h2>\n              {filteredPosts.length > 0 && (\n                <div className={styles.sortWrap}>\n                  <label htmlFor=\"sort-select\">정렬</label>\n                  <select\n                    id=\"sort-select\"\n                    value={sortBy}\n                    onChange={event => setSortBy(event.target.value)}\n                    className={styles.sortSelect}\n                  >\n                    <option value=\"date\">최신순</option>\n                    <option value=\"title\">제목순</option>\n                    <option value=\"relevance\">관련도순</option>\n                  </select>\n                </div>\n              )}\n            </div>\n\n            {sortedPosts.length > 0 ? (\n              <div className={styles.resultsList}>\n                {sortedPosts.map(post => {\n                  const title = post.frontmatter.title || post.fields.slug\n                  const description = post.frontmatter.description || post.excerpt\n                  const thumbnailSrc = getFirstImageFromHtml(post.html)\n                  const readingTime = getReadingTimeText(post.timeToRead)\n\n                  return (\n                    <article key={post.fields.slug} className={styles.resultCard}>\n                      <Link to={post.fields.slug} className={styles.resultLink}>\n                        <div className={styles.cardBody}>\n                          {thumbnailSrc && (\n                            <div className={styles.thumbnailWrap}>\n                              <img\n                                src={thumbnailSrc}\n                                alt={`${title} 썸네일`}\n                                className={styles.thumbnailImage}\n                                loading=\"lazy\"\n                              />\n                            </div>\n                          )}\n                          <div className={styles.cardContent}>\n                            <h3\n                              className={styles.cardTitle}\n                              dangerouslySetInnerHTML={{\n                                __html: highlightSearchTerm(title, queryFromUrl),\n                              }}\n                            />\n                            <div className={styles.cardMeta}>\n                              <span className={styles.cardDate}>{post.frontmatter.date}</span>\n                              <span className={styles.readingTime}>{readingTime}</span>\n                            </div>\n                            <p\n                              className={styles.cardDescription}\n                              dangerouslySetInnerHTML={{\n                                __html: highlightSearchTerm(description, queryFromUrl),\n                              }}\n                            />\n                          </div>\n                        </div>\n                      </Link>\n                    </article>\n                  )\n                })}\n              </div>\n            ) : (\n              <div className={styles.emptyState}>\n                <h3>검색 결과가 없습니다</h3>\n                <p>'{queryFromUrl}'에 대한 결과를 찾지 못했습니다.</p>\n                <ul>\n                  <li>검색어 철자를 확인해보세요.</li>\n                  <li>더 짧거나 일반적인 키워드를 시도해보세요.</li>\n                  <li>다른 조합의 단어로 검색해보세요.</li>\n                </ul>\n              </div>\n            )}\n          </>\n        ) : (\n          <div className={styles.placeholderState}>\n            <h3>검색어를 입력해주세요</h3>\n            <p>제목, 설명, 본문, 태그에서 검색합니다. (최소 2글자)</p>\n          </div>\n        )}\n      </section>\n    </Layout>\n  )\n}\n\nexport const Head = ({ location }) => {\n  const params = new URLSearchParams(location.search || \"\")\n  const query = params.get(\"q\") || \"\"\n\n  return (\n    <Seo\n      title={query ? `'${query}' 검색 결과` : \"포스트 검색\"}\n      description={query ? `'${query}'에 대한 검색 결과` : \"블로그 포스트를 검색하세요\"}\n    />\n  )\n}\n\nexport default SearchPage\n\nexport const pageQuery = graphql`\n  {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(\n      sort: { frontmatter: { date: DESC } }\n      filter: { frontmatter: { draft: { ne: true } } }\n    ) {\n      nodes {\n        excerpt\n        html\n        timeToRead\n        fields {\n          slug\n        }\n        frontmatter {\n          date(formatString: \"YYYY년 M월 D일\")\n          title\n          description\n          tags\n        }\n      }\n    }\n  }\n`\n","// extracted by mini-css-extract-plugin\nexport var cardBody = \"search-page-module--cardBody--7455f\";\nexport var cardContent = \"search-page-module--cardContent--25e7a\";\nexport var cardDate = \"search-page-module--cardDate--1c374\";\nexport var cardDescription = \"search-page-module--cardDescription--f2906\";\nexport var cardMeta = \"search-page-module--cardMeta--21132\";\nexport var cardTitle = \"search-page-module--cardTitle--bed52\";\nexport var emptyState = \"search-page-module--emptyState--37d88\";\nexport var placeholderState = \"search-page-module--placeholderState--68e8a\";\nexport var readingTime = \"search-page-module--readingTime--47b82\";\nexport var resultCard = \"search-page-module--resultCard--3e5b1\";\nexport var resultLink = \"search-page-module--resultLink--26e35\";\nexport var resultsHeader = \"search-page-module--resultsHeader--a1410\";\nexport var resultsList = \"search-page-module--resultsList--68d78\";\nexport var resultsTitle = \"search-page-module--resultsTitle--7fb23\";\nexport var searchButton = \"search-page-module--searchButton--21bcd\";\nexport var searchForm = \"search-page-module--searchForm--65ecc\";\nexport var searchHeader = \"search-page-module--searchHeader--2b955\";\nexport var searchInput = \"search-page-module--searchInput--c6d92\";\nexport var searchPage = \"search-page-module--searchPage--b5a14\";\nexport var searchTitle = \"search-page-module--searchTitle--5e402\";\nexport var sortSelect = \"search-page-module--sortSelect--c4f11\";\nexport var sortWrap = \"search-page-module--sortWrap--bfb72\";\nexport var thumbnailImage = \"search-page-module--thumbnailImage--eb467\";\nexport var thumbnailWrap = \"search-page-module--thumbnailWrap--809a7\";"],"names":["highlightSearchTerm","text","searchTerm","regex","RegExp","replace","Head","_ref2","location","query","URLSearchParams","search","get","React","Seo","title","description","_ref","_data$site$siteMetada","data","useLocation","posts","allMarkdownRemark","nodes","siteTitle","site","siteMetadata","queryFromUrl","searchInput","setSearchInput","sortBy","setSortBy","filteredPosts","trim","length","filter","post","matchesPostQuery","sortedPosts","sortPosts","sortType","searchQuery","normalizedQuery","normalizeSearchQuery","_toConsumableArray","sort","a","b","frontmatter","localeCompare","aTitle","toLowerCase","bTitle","aInTitle","includes","Date","date","Layout","className","onSubmit","event","preventDefault","nextQuery","navigate","encodeURIComponent","type","placeholder","value","onChange","target","htmlFor","id","map","fields","slug","excerpt","thumbnailSrc","getFirstImageFromHtml","html","readingTime","getReadingTimeText","timeToRead","key","Link","to","src","alt","loading","dangerouslySetInnerHTML","__html"],"sourceRoot":""}