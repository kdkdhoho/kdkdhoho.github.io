{"componentChunkName":"component---src-templates-blog-post-js","path":"/Java/execute-and-executeUpdate-of-jdbc/","result":{"data":{"site":{"siteMetadata":{"title":"김동호 블로그"}},"markdownRemark":{"id":"03c2018d-f7a0-575f-ac51-1e8a2bc3ee9e","excerpt":"TL;DR execute(String)와 executeUpdate(String)은 Statement 인터페이스의 메서드이다.\nexecute()와 executeUpdate()는 PreparedStatement 인터페이스의 메서드이다.\nStatement…","html":"<h2 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h2>\n<p>execute(String)와 executeUpdate(String)은 Statement 인터페이스의 메서드이다.<br>\nexecute()와 executeUpdate()는 PreparedStatement 인터페이스의 메서드이다.<br>\nStatement 인터페이스의 두 메서드는 내부적으로 Statement의 구현체만이 실행할 수 있도록 보장되어 있다.<br>\nPreparedStatement 인터페이스는 이름처럼 미리 내부적으로 SQL 문을 만들어 놓고 곧바로 실행하는 식으로 동작한다.</p>\n<h2 id=\"문제-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\"문제 상황 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 상황</h2>\n<p>JDBC를 복습 중이었다.<br>\n간단한 Member 테이블을 만들고 DriverManager로 Connection을 맺은 다음, PreparedStatement 인터페이스로 쿼리를 실행하는 것을 테스트 중이었다.<br>\n하지만 이상하게 execute(sql) 와 executeUpdate(sql)를 호출하면 쿼리가 나가지 않았다.<br>\n반대로 execute() 와 executeUpdate()를 호출하면 쿼리가 실행되었다.<br>\n심지어 execute(sql) 와 executeUpdate(sql)를 호출하면 \"This method is not allowed for a prepared statement; use a regular statement instead.\" 라는 로그가 기록된다.</p>\n<p>생성한 Member 테이블은 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> member <span class=\"token punctuation\">(</span>\n    member_id <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    money <span class=\"token keyword\">integer</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span> <span class=\"token keyword\">default</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token punctuation\">(</span>member_id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>작성한 코드는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberRepositoryV0</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Member</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"INSERT INTO member(member_id, money) VALUES (?, ?)\"</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token class-name\">Connection</span> conn <span class=\"token operator\">=</span> <span class=\"token class-name\">DbConnectionUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">PreparedStatement</span> pstmt <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">prepareStatement</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Current Connection: {}\"</span><span class=\"token punctuation\">,</span> conn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            pstmt<span class=\"token punctuation\">.</span><span class=\"token function\">setString</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getMemberId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            pstmt<span class=\"token punctuation\">.</span><span class=\"token function\">setInt</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getMoney</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            pstmt<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 쿼리 실행.</span>\n<span class=\"token comment\">//            pstmt.execute(sql); // 실행 X. This method is not allowed for a prepared statement; use a regular statement instead.</span>\n<span class=\"token comment\">//            pstmt.executeUpdate(); // 실행.</span>\n<span class=\"token comment\">//            pstmt.executeUpdate(sql); // 실행 X. This method is not allowed for a prepared statement; use a regular statement instead.</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> member<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>테스트 코드는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberRepositoryV0Test</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hi1\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRepositoryV0</span> memberRepository <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberRepositoryV0</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">saveTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"원인-분석\" style=\"position:relative;\"><a href=\"#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D\" aria-label=\"원인 분석 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원인 분석</h2>\n<p>일단 execute()는 PreparedStatement 인터페이스에 선언되어 있다.<br>\n반면 execute(String)는 Statement 인터페이스에 선언되어 있다.</p>\n<p>executeUpdate() 또한 PreparedStatement 인터페이스에,<br>\nexecuteUpdate(sql)는 Statement 인터페이스에 선언되어 있다.</p>\n<p>아래와 같이 분류할 수 있겠다.<br>\nStatement - execute(String), executeUpdate(String)<br>\nPreparedStatement - execute(), executeUpdate()</p>\n<p>PreparedStatement는 Statement를 상속받는다.<br>\nStatement에 대해 먼저 알아보자.</p>\n<h3 id=\"statement\" style=\"position:relative;\"><a href=\"#statement\" aria-label=\"statement permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Statement</h3>\n<p>인터페이스에 대한 설명으로 다음과 같다.<br></p>\n<blockquote>\n<p>\"The object used for executing a static SQL statement and returning the results it produces.\"</p>\n</blockquote>\n<p>정적인 SQL 문을 실행하고 결과를 반환한다고 한다.</p>\n<p>execute(String)에 대한 설명도 보자.<br></p>\n<blockquote>\n<p>Executes the given SQL statement, which may return multiple results.\nIn some (uncommon) situations, a single SQL statement may return multiple result sets and/ or update counts.\nNormally you can ignore this unless you are (1) executing a stored procedure that you know may return multiple results or\n(2) you are dynamically executing an unknown SQL string.\nThe execute method executes an SQL statement and indicates the form of the first result.\nYou must then use the methods getResultSet or getUpdateCount to retrieve the result, and getMoreResults to move to any subsequent result(s).\nNote: This method cannot be called on a PreparedStatement or CallableStatement.<br>\n<br>\nParams:<br>\nsql – any SQL statement<br>\nReturns:<br>\ntrue if the first result is a ResultSet object; false if it is an update count or there are no results<br>\nThrows:<br>\nSQLException – if a database access error occurs, this method is called on a closed Statement, the method is called on a PreparedStatement or CallableStatement<br>\nSQLTimeoutException – when the driver has determined that the timeout value that was specified by the setQueryTimeout method has been exceeded and has at least attempted to cancel the currently running Statement<br>\nSee Also:<br>\ngetResultSet, getUpdateCount, getMoreResults</p>\n</blockquote>\n<p>주어진 SQL 문을 실행하고 그 결과가 ResultSet이면 true, 아니면 false를 반환한다고 한다.<br>\n또한 PreparedStatement 또는 CallableStatement에서는 호출할 수 없다고 한다.<br>\n정말로 그럴까?<br>\n실제로 디버깅으로 살펴본 결과, 아래 사진과 같았다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec0446ae354845a6dbcaab124c4d8559/48ca3/debug.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.58227848101266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVR42m3Q7U6DMBSAYW7HD1YKhRZmgdFCUaMmBDRmP3b/V/GKuCWa+ePJmyYnJyeNrHnlyb4R3JGDOzEMJ0J/JNQTjV0Q1QdCzwiz/LRcSDbvWy9vYWbiYiKqa4dvu3XJ41qPKS0qLymkIpU5d1ITp/+Qf90mOTdCERWmotAVelXkhizN0WaPeWiQSiOSFCGzX9Qm+bbOXsizaOocn+PI3A9Mvmfxnpe1LjzT9YHOj+tXhLORths2zaHHVPWVyJZ7vHNUTUvjHaW1JEohtUbmxXbNLsmuxCLlfievfAEkzaf8/ghkOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JdbcStatement#executeInternal(String, Object)\"\n        title=\"\"\n        src=\"/static/ec0446ae354845a6dbcaab124c4d8559/f058b/debug.png\"\n        srcset=\"/static/ec0446ae354845a6dbcaab124c4d8559/c26ae/debug.png 158w,\n/static/ec0446ae354845a6dbcaab124c4d8559/6bdcf/debug.png 315w,\n/static/ec0446ae354845a6dbcaab124c4d8559/f058b/debug.png 630w,\n/static/ec0446ae354845a6dbcaab124c4d8559/40601/debug.png 945w,\n/static/ec0446ae354845a6dbcaab124c4d8559/48ca3/debug.png 1084w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n메서드를 호출하는 객체는 PreparedStatement이므로 <code class=\"language-text\">this</code>는 JdbcPreparedStatement 임을 확인할 수 있다.<br>\n따라서 해당 조건문에 의해, 메서드를 호출하는 주체가 Statement가 아니면 쿼리를 실행할 수 없는 것이다.</p>\n<p>executeUpdate(String) 또한 동일한 로직으로 처리된다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/71d3dd8a05c41b729668d80f4ce2102b/04abd/img_5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABX0lEQVR42n2RPW/bMBCG9T8SWxIpUqQoS7Jk68N27CZIkCFZ0q1TtwJFgKD5/8PTk4IA7dAOD4kD717eexeF3NGVgUYoncdqhR6+oc8/yb68Yk/f2VQtZdkQQoN3gcrllL6ganY02x1102FswWqdEq1iRaazJcHnOT7UUrwhFBI7J2+a1GhUnqG9JbUSa4MvKuJEc72KRShZxNaiFRkbSLSnLErOfc/N5Z7xcMfN4w/Gp3fhF8cX4es7k9z98xvT7QvH04Vuf2CYztLhjv22lU9qoiQ1KG3FbsFQV7Ttnm034uoj2fSIOT2RdHfYcKDrLjT9A3V7QIlFI/ZVli/1n0Rzm0rntKGgF8GxH5nGI73cwzDRNC1W5pyL/SQRW+tYrH3Ym23+yWJ5PlJl0DKXeUHeWJx1bOpOlrElzMsQ5sWkykqhWgr/RaSl5VlwTrxapTLkD66u10L8F59d/E/wNzFc0a04GcAdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Statement#executeUpdate(String)\"\n        title=\"\"\n        src=\"/static/71d3dd8a05c41b729668d80f4ce2102b/04abd/img_5.png\"\n        srcset=\"/static/71d3dd8a05c41b729668d80f4ce2102b/c26ae/img_5.png 158w,\n/static/71d3dd8a05c41b729668d80f4ce2102b/6bdcf/img_5.png 315w,\n/static/71d3dd8a05c41b729668d80f4ce2102b/04abd/img_5.png 554w\"\n        sizes=\"(max-width: 554px) 100vw, 554px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 507px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/291324dbf80b3c0dcaa539dd05e7580e/3ebb1/img_6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.354430379746837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7UlEQVR42lXO206DQBSFYV6kHKaFtjB0OAzSAakneqBX1foAPgQXeoP65L/YRKMXX1aykr2zrLWKyWVEEsWkSiOSOwK9JSiPLMqOoNgzy+7xdUuiG7KiQWWGdMxQJph6g0o0aXaFLgzWSirWuaZ6eMF0PevHd8rTcBHt3oj3r9TnT8zTB5vngevzgD70bE891aZDxhmLMGEZpWMqLMebYbtTsnGd0Yaq2VHfHqlvOoqqpaxb8mZc2RyQpsWfpzizGOGv8MSciS2wnR9TLFf4rKSkiEPCZYjjClxvivfHdzdxvPHAGx+4v+xLJ/75Aphuf6GdIPAMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Statement#executeUpdateInternal(String, Object)\"\n        title=\"\"\n        src=\"/static/291324dbf80b3c0dcaa539dd05e7580e/3ebb1/img_6.png\"\n        srcset=\"/static/291324dbf80b3c0dcaa539dd05e7580e/c26ae/img_6.png 158w,\n/static/291324dbf80b3c0dcaa539dd05e7580e/6bdcf/img_6.png 315w,\n/static/291324dbf80b3c0dcaa539dd05e7580e/3ebb1/img_6.png 507w\"\n        sizes=\"(max-width: 507px) 100vw, 507px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>반면, PreparedStatement#execute()는 아래 사진처럼 미리 만들어놓은 SQL 문을 곧바로 실행한다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f20247090c5719028cfae37085c8ee27/b2cef/img_4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.82278481012659%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42pVT2W7bMBD0dySiJB6SKIrUSdNy7ABtARc9YCcB+tICbf//K6ZLOSlSNA/2w4irFTma3R2ufFVj7xxCbdGZCd4OmBsH3/QL+tLA8uJirG5SASUUurbDOAWEzQ7aDeC1Rkb5JOVIMnExVik9qlJjDjOR7TGNHrZ2lGuQE2FG39MrsBAKVcG1I0zTgnNJiktIXoKRuvR6QiKQCk5rlJUBo+QNy5dSryVbCLNcIie0dY3huY/TMMHa9rlc/goXEiY0mEqVqEmhLGoURbn85DbhpFj+xcWEMZA0AOc/od3/QH//E9P7X/AffsPO32DDd1h/PB/KFUEiW9Zz/B9hBHuZ9uQx9wEtWcfaHpp8WHCFnAuwPAe7TcAYQ8LiGpG+TRhf4oS3IxnarzF0PUaa+jx8xP36BB++wm0/owoHqHpGobeQZgehJyKPQzzjH0IhCqw9mdvfYRN2GMmTzh/QbZ7QhSPacILbPMBR3IdHip/QDO+WdpXKkFv0a0JJ5VXo6dqZokEhKghSHNugiujNFCJl4FlGB+l2SU65HDJPaS+1S1ZQNNiVUBoRPCaoX+N6SyUHdL1H40Zo06IyA+rhC+z0CE3lG1Jp1kdoypnhgVQeYcYTdH/AH0Ebei86xp9OAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PreparedStatement#execute()\"\n        title=\"\"\n        src=\"/static/f20247090c5719028cfae37085c8ee27/f058b/img_4.png\"\n        srcset=\"/static/f20247090c5719028cfae37085c8ee27/c26ae/img_4.png 158w,\n/static/f20247090c5719028cfae37085c8ee27/6bdcf/img_4.png 315w,\n/static/f20247090c5719028cfae37085c8ee27/f058b/img_4.png 630w,\n/static/f20247090c5719028cfae37085c8ee27/b2cef/img_4.png 847w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>PreparedStatement에 선언된 setXXX() 메서드를 통해 개발자가 인자로 건넨 값이 어떻게 바인딩 되는지 보는 것도 꽤 재밌다.</p>\n</blockquote>\n<h2 id=\"분석-결과\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EC%84%9D-%EA%B2%B0%EA%B3%BC\" aria-label=\"분석 결과 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>분석 결과</h2>\n<p>Statement의 execute(String), executeUpdate(String)은 설명에 나와있듯이 PreparedStatement 또는 CallableStatement에서는 호출할 수 없도록 구현되어 있다.<br>\nPreparedStatement는 이름 그대로 미리 준비해놓은 SQL 문을 곧바로 실행하는 구조이다.<br>\n따라서 pstmt.execute(sql); 와 pstmt.executeUpdate(sql); 을 호출했을 때 쿼리가 나가지 않은 것이었다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h2>\n<p>덕분에 헷갈렸던 execute()와 execute(String), executeUpdate()와 executeUpdate(String)의 차이에 대해 알게 되었다.<br>\n또한 PreparedStatement가 어떻게 값을 바인딩하는 지에 대해서도 알게 되었다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#tldr\">TL;DR</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\">문제 상황</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D\">원인 분석</a></p>\n<ul>\n<li><a href=\"#statement\">Statement</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B6%84%EC%84%9D-%EA%B2%B0%EA%B3%BC\">분석 결과</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></p>\n</li>\n</ul>","frontmatter":{"title":"[JDBC] execute(String)과 execute(). executeUpdate(String)와 executeUpdate()의 차이","date":"2024년 8월 2일","dateISO":"2024-08-02","description":"execute()와 executeUpdate(), execute(String)와 executeUpdate(String)의 차이","tags":["Java","jdbc"]}},"previous":{"fields":{"slug":"/Java/inner-class/"},"frontmatter":{"title":"[Java] inner 클래스와 종류에 대해"}},"next":{"fields":{"slug":"/회고/회고록/2024년-8월-첫-째주-회고록/"},"frontmatter":{"title":"2024년 8월 첫 째주 회고록"}}},"pageContext":{"id":"03c2018d-f7a0-575f-ac51-1e8a2bc3ee9e","previousPostId":"e2bcafa1-2f57-567a-81bc-6118673a34bd","nextPostId":"6e681dd7-0c31-5946-b5a8-fbf396de70ab"}},"staticQueryHashes":["2476208942","2637872971","3414707483"],"slicesMap":{}}