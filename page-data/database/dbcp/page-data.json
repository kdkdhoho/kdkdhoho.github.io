{"componentChunkName":"component---src-templates-blog-post-js","path":"/database/dbcp/","result":{"data":{"site":{"siteMetadata":{"title":"내가 재밌는 일을 하자 !"}},"markdownRemark":{"id":"1733583f-ed55-5f62-911c-06a33fad648c","excerpt":"DBCP (DataBase Connection Pool) 탄생 배경 서버 애플리케이션에서 DB 서버로 요청을 보내면 TCP 통신을 한다. TCP 통신은 Connection이 유지되는 상태에서 통신한다. 이 Connection…","html":"<h2 id=\"dbcp-database-connection-pool-탄생-배경\" style=\"position:relative;\"><a href=\"#dbcp-database-connection-pool-%ED%83%84%EC%83%9D-%EB%B0%B0%EA%B2%BD\" aria-label=\"dbcp database connection pool 탄생 배경 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DBCP (DataBase Connection Pool) 탄생 배경</h2>\n<p>서버 애플리케이션에서 DB 서버로 요청을 보내면 TCP 통신을 한다.</p>\n<p>TCP 통신은 <strong>Connection</strong>이 유지되는 상태에서 통신한다.</p>\n<p>이 Connection은 생성하고 사용하고 삭제되기까지 꽤 많은 작업이 포함된다. 즉, 통신 비용이 <strong>비싸다</strong>.</p>\n<p>이러한 상황에서 서버는 많은 요청을 처리하는데, 이 요청들이 DB 서버로의 요청으로 이루어진다면 비싸고 오래걸리는 작업이 많아질 것이다.</p>\n<p>결국, 서버 성능에 악영향을 줄 수 있다.</p>\n<p>이를 해결하기 위해 DBCP는 탄생했다.</p>\n<h2 id=\"dbcp-기본-개념\" style=\"position:relative;\"><a href=\"#dbcp-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\" aria-label=\"dbcp 기본 개념 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DBCP 기본 개념</h2>\n<p>서버가 실행되면 DB와 Connection을 <strong>미리 만들어 놓고 Pool에 저장해놓는다.</strong></p>\n<p>미리 만들어 놓은 DB Connection을 서버에 미리 가지고 있다가, DB로 요청을 보내야 하는 상황이 발생한다면 기존에 가지고 있는 Connection을 이용해 쿼리를 요청한다.</p>\n<p>요청을 모두 수행하면 요청에 사용된 Connection을 다시 Pool에 <strong>반환</strong>을 한다.</p>\n<p>결국, Connection을 생성하고 삭제하는 과정이 모두 생략되기 때문에 더 빠른 속도로 요청을 처리할 수 있게 된다.</p>\n<h2 id=\"종류\" style=\"position:relative;\"><a href=\"#%EC%A2%85%EB%A5%98\" aria-label=\"종류 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>종류</h2>\n<p>이 DBCP를 구현한 제품으로는 <a href=\"https://github.com/brettwooldridge/HikariCP\">HikariCP</a>, <a href=\"https://commons.apache.org/proper/commons-dbcp/\">Apache Commons DBCP</a>, <a href=\"https://github.com/swaldman/c3p0\">c3p0</a> 등이 있다.</p>\n<h2 id=\"hikaricp\" style=\"position:relative;\"><a href=\"#hikaricp\" aria-label=\"hikaricp permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HikariCP</h2>\n<p>Spring Boot 2.0부터 내장되어 사용되는 DBCP 이다.</p>\n<p>오픈소스로서, 타 제품에 비해 성능이 매우매우 뛰어나다.</p>\n<p>실제로 README를 읽어보면 타 제품에 비해 성능이 너무 뛰어나다고 엄청나게 자랑한다.</p>\n<p>아래 사진은 HikariCP 에서 자체적으로 진행한 벤치마크 결과이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2685dce9ca65982ad81dbf7a63df2c6/9cab2/result_of_benchmark.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpklEQVR42mWR3UsUURjG55/xOhivIoouTAmJKAjUiy66iv6A7q1UUrpQ7KIkkNyEPjC8bcFAw10UMipw11xJlpxp052dmc11Zs7Mr/OhU+TLPLxnznnOc573fa1YJDgNB9dxCcOQdrtNEAQ668jkl4If+Pi+rznqXK2jKOIkRJZpWIkUDH+HdDod0jQlk5sKKuJEUCi/YrHy2mhnf89zqH0h8EbH8R5NYv0rotYKQhJUNLwDzgyfZ6J8T/8nIs45GpKXKndHEU5PP+71IaxTLx4Lq/jle3SPXWZqfdyUlYpT3Piow2GzyW7/DeqDt4zD/5E7bDWxR/uYXHtoHErB9KQSlWW9jdI7aguzVM/1UbsygKUu50hNVn01DlvYI0rQOIySWAuZfprsvl+k+uIxG/YFvl66hpWPSU/TkIQcxt6BS6W+hT18kYnS/WNKRnDYYudnjbZXJ3SruEsLVArTFLtsVs72Yu06dfb2Hda3Nqj82OTTzhdWt0vcffOAmfITBp7eYe7zM/2gH8S8/Picq3O9LM8P8W26m+/FeTbfFijKHn64eZs/nEU+GX/vqQcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"자체 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/e2685dce9ca65982ad81dbf7a63df2c6/f058b/result_of_benchmark.png\"\n        srcset=\"/static/e2685dce9ca65982ad81dbf7a63df2c6/c26ae/result_of_benchmark.png 158w,\n/static/e2685dce9ca65982ad81dbf7a63df2c6/6bdcf/result_of_benchmark.png 315w,\n/static/e2685dce9ca65982ad81dbf7a63df2c6/f058b/result_of_benchmark.png 630w,\n/static/e2685dce9ca65982ad81dbf7a63df2c6/9cab2/result_of_benchmark.png 864w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>One <em>Connection Cycle</em>은 한 쌍의 <code class=\"language-text\">DataSource.getConnection()</code>, <code class=\"language-text\">Connection.close()</code><br>\nOne <em>Statement Cycle</em>은 한 쌍의 <code class=\"language-text\">Connection.prepareStatement()</code>, <code class=\"language-text\">Statement.execute()</code>, <code class=\"language-text\">Statement.close()</code> 이다.</p>\n</blockquote>\n<h2 id=\"중요한-설정-포인트\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EC%9A%94%ED%95%9C-%EC%84%A4%EC%A0%95-%ED%8F%AC%EC%9D%B8%ED%8A%B8\" aria-label=\"중요한 설정 포인트 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>중요한 설정 포인트</h2>\n<p>이 유용한 DBCP를 정말 유용하게 사용하려면, DB와 서버에서 각각 DB Connection 관련 설정을 잘 알아야 한다.</p>\n<blockquote>\n<p>DB는 MySQL, 서버는 Spring, DBCP는 hikariCP를 기준으로 설명한다.</p>\n</blockquote>\n<h3 id=\"데이터베이스-서버-설정-mysql-기준\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95-mysql-%EA%B8%B0%EC%A4%80\" aria-label=\"데이터베이스 서버 설정 mysql 기준 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터베이스 서버 설정 (MySQL 기준)</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">max_connections</code></p>\n<ul>\n<li>DB 서버가 클라이언트와 맺을 수 있는 최대 Connection 수이다.</li>\n<li>컴퓨팅 자원을 적절히 사용하면서 동시에 가장 높은 처리량만큼을 설정하는 것이 중요하다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">wait_timeout</code></p>\n<ul>\n<li>생성된 Connection이 아무 처리도 하지 않을 때, 새로운 요청이 오기까지 얼마만큼의 시간을 기다릴 지 설정한다.\n만약 <code class=\"language-text\">wait_timeout</code> 시간이 지나게 될 경우, Connection은 Close 된다.</li>\n<li>클라이언트에서 문제가 생겨 Connection을 정상적으로 종료하지 못하는 상황(비정상적 Connection 종료, Connection 반환 X, 네트워크 단절)에, 생성된 Connection을 알아서 종료해주기 위한 적절한 시간을 결정하는 것이 중요하다.</li>\n<li><code class=\"language-text\">wait_timeout</code>으로 인해 Connection이 종료되기 전에 새로운 요청이 들어올 경우, 0초부터 다시 시간을 측정한다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"dbcp-설정-hikaricp-기준\" style=\"position:relative;\"><a href=\"#dbcp-%EC%84%A4%EC%A0%95-hikaricp-%EA%B8%B0%EC%A4%80\" aria-label=\"dbcp 설정 hikaricp 기준 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DBCP 설정 (HikariCP 기준)</h3>\n<h4 id=\"개수-관련-설정\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%88%98-%EA%B4%80%EB%A0%A8-%EC%84%A4%EC%A0%95\" aria-label=\"개수 관련 설정 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개수 관련 설정</h4>\n<ul>\n<li>\n<p><code class=\"language-text\">minimumIdle</code></p>\n<ul>\n<li>Pool에서 유지하는 최소한의 Idle Connection의 수이다.</li>\n<li>만약 Idle 상태의 Connection 수가 <code class=\"language-text\">mimimumIdle</code> 값보다 작고, 전체 Connection 수가 <code class=\"language-text\">maximumPoolSize</code>보다 작은 상황이라면, 신속하게 새로운 Connection을 생성하고 Pool에 추가한다.</li>\n<li>Default는 <code class=\"language-text\">maximumPoolSize</code>와 동일한 값이다. 값을 동일하게 설정해야 요청이 들어올 때 새로운 Connection을 만들지 않고 DBCP를 사용하는 장점을 누릴 수 있기 때문이다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">maximumPoolSize</code></p>\n<ul>\n<li>Pool이 가질 수 있는 최대 Connection의 수이다.</li>\n<li>Idle 상태와 Active 상태의 Connection을 모두 포함한다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"시간-관련-설정\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EA%B0%84-%EA%B4%80%EB%A0%A8-%EC%84%A4%EC%A0%95\" aria-label=\"시간 관련 설정 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시간 관련 설정</h4>\n<ul>\n<li>\n<p><code class=\"language-text\">maxLifetime</code></p>\n<ul>\n<li>Connection Pool에서 Connection의 최대 수명 시간이다.</li>\n<li>Active 상태의 Connection은 절대 종료되지 않으며 <strong>Connection이 Pool에 반환된 이후의 시간을 기준으로 Connection을 종료</strong>한다.<br>\n이 특징 때문에, Active 상태의 Connection이 모종의 이유로 Pool에 반환되지 않음과 동시에 DB의 <code class=\"language-text\">wait_timeout</code> 설정 시간 이후에 요청을 보내게 되면, DB는 이미 해당 Connection을 Close 했기 때문에 예외가 발생할 수 있다. 이는 Connection Leak의 문제가 될 수 있다.</li>\n<li>Connection Pool에서 갑작스런 Connection 대량 소멸을 방지하기 위해 Connection 별로 일종의 조치를 취해놓았다.</li>\n<li>HikariCP가 권장하길, DB의 <code class=\"language-text\">wait_timeout</code>보다 몇 초 더 짧게 설정하는 것이 좋다고 한다.<br>\n이유로는, 만약 <code class=\"language-text\">wait_timeout</code>과 <code class=\"language-text\">maxLifetime</code> 값을 동일하게 설정했다고 가정했을 때, <code class=\"language-text\">maxLifetime</code>에 얼마 남지 않은 시점에 요청을 처리해야 한다면, 해당 Connection이 DB로 요청을 보내는 시간이 포함되게 되는데, 요청이 DB에 도달하기 전에 <code class=\"language-text\">wait_timeout</code> 시간이 지나게 되어 DB 서버 쪽에서 Connection을 끊게 된다면 예외가 발생할 수 있기 때문이다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">connectionTimeout</code></p>\n<ul>\n<li>클라이언트가 Connection Pool에서 Connection을 획득하기까지 얼만큼의 시간을 기다릴 지 최대 시간을 정하는 설정이다.</li>\n<li>설정 시간만큼 획득하지 못하면 <code class=\"language-text\">SQLException</code>이 발생한다.</li>\n<li>위 설정도 마찬가지로 <code class=\"language-text\">wait_timeout</code> 보다 더 짧은 시간으로 설정해야 한다.<br>\n만약 <code class=\"language-text\">connectionTimeout</code>과 <code class=\"language-text\">wait_timeout</code> 시간이 같다면, 사용자가 Pool에서 <code class=\"language-text\">connectionTimeout</code> 직전에 Connection을 획득했다 하더라도, 실제 DB 서버에 도달하기까지 추가적인 시간이 반드시 존재하고, 만약 도달한 시점에 이미 <code class=\"language-text\">wait_timeout</code> 시간을 넘은 상태라면 예외를 발생하기 때문이다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"적절한-파라미터-값을-설정하는-방법\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EA%B0%92%EC%9D%84-%EC%84%A4%EC%A0%95%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"적절한 파라미터 값을 설정하는 방법 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 파라미터 값을 설정하는 방법</h2>\n<p>우선 서버 애플리케이션을 모니터링을 하며 리소스 사용률, 서버 스레드 수, DBCP 정보들을 확인할 수 있어야 한다.<br>\n그리고 <a href=\"https://naver.github.io/ngrinder/\">nGrinder</a>와 같은 부하 테스트 툴을 사용하여 실제로 서버에 부하를 줌으로써 병목 지점을 확인한다.<br>\n만약 병목 지점이 생긴다면, 해당 시점 이후의 지표들을 토대로 병목 지점을 유추한다.<br>\n유추되는 지점이 존재한다면 해당 값을 적절히 조절해가며 적절한 설정 값을 찾는 과정을 거친다.</p>\n<blockquote>\n<h3 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h3>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=zowzVqx3MQ4\">https://www.youtube.com/watch?v=zowzVqx3MQ4</a></li>\n</ul>\n</blockquote>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#dbcp-database-connection-pool-%ED%83%84%EC%83%9D-%EB%B0%B0%EA%B2%BD\">DBCP (DataBase Connection Pool) 탄생 배경</a></p>\n</li>\n<li>\n<p><a href=\"#dbcp-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\">DBCP 기본 개념</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A2%85%EB%A5%98\">종류</a></p>\n</li>\n<li>\n<p><a href=\"#hikaricp\">HikariCP</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A4%91%EC%9A%94%ED%95%9C-%EC%84%A4%EC%A0%95-%ED%8F%AC%EC%9D%B8%ED%8A%B8\">중요한 설정 포인트</a></p>\n<ul>\n<li>\n<p><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95-mysql-%EA%B8%B0%EC%A4%80\">데이터베이스 서버 설정 (MySQL 기준)</a></p>\n</li>\n<li>\n<p><a href=\"#dbcp-%EC%84%A4%EC%A0%95-hikaricp-%EA%B8%B0%EC%A4%80\">DBCP 설정 (HikariCP 기준)</a></p>\n<ul>\n<li><a href=\"#%EA%B0%9C%EC%88%98-%EA%B4%80%EB%A0%A8-%EC%84%A4%EC%A0%95\">개수 관련 설정</a></li>\n<li><a href=\"#%EC%8B%9C%EA%B0%84-%EA%B4%80%EB%A0%A8-%EC%84%A4%EC%A0%95\">시간 관련 설정</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EA%B0%92%EC%9D%84-%EC%84%A4%EC%A0%95%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">적절한 파라미터 값을 설정하는 방법</a></p>\n</li>\n</ul>","frontmatter":{"title":"DBCP와 HikariCP 이해하기","date":"2023년 10월 16일","description":"DBCP와 HikariCP 이해하기","tags":["database","DBCP","hikariCP"]}},"previous":{"fields":{"slug":"/celuveat/tomcat-tuning/"},"frontmatter":{"title":"[셀럽잇] Tomcat 성능 최적화를 위해 Max-Threads, Max-Connections, Accept-Count 설정하기"}},"next":{"fields":{"slug":"/인프라/무중단-배포에-대해서/"},"frontmatter":{"title":"무중단 배포에 대해서"}}},"pageContext":{"id":"1733583f-ed55-5f62-911c-06a33fad648c","previousPostId":"441d9ebc-c6c4-5aa6-b9b9-ecfecf3f5acf","nextPostId":"4b7d7167-d810-5d76-8c86-b973204223bc"}},"staticQueryHashes":["1475414628","2841359383"],"slicesMap":{}}