{"componentChunkName":"component---src-templates-post-jsx","path":"/why-use-final/","result":{"data":{"site":{"siteMetadata":{"title":"log4dh"}},"markdownRemark":{"id":"9091e058-99be-5ff8-ae14-4489eba8e413","excerpt":"왜 값의 변경을 막아야 할까?  자동차 경주 피드백 중 하나이다. 왜 이런 피드백이 있는지 알아보자 final 키워드를 붙이면 좋은 점 1. 변경 가능성을 최소화한다. 즉, 코드의 예측이 쉬워진다. 사실 알잘딱깔센으로 객체나 값의 변경은 정말 필요한 곳에서 필요한 만큼 수행해야 한다. 하지만 final 키워드를 붙이지 않으면 분명한 것은 변경 가능성이 존…","html":"<h2>왜 값의 변경을 막아야 할까?</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 620px; '>\n      <a class='gatsby-resp-image-link' href='/static/49858e991f61c277dbd5636c889d2db8/abf7b/why-use-final.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVR42q1RXW+DMAzk//++SpXaJwgfI4EECARCyG52SqVpD1UrDekUG58v5zhrmgZCCNxuN+R5juv1muKiKHC5XHC/31FVFWKMeOfLtNZo2xZKKXA8DAP6vk+xpnM8c4a1NtWNMSjLMuXM414pJcZxfAhK+mEGA01E7z25+UY4DhwnnjG7jPERe7+nPNXDA9yXBSpss4NfPbZlxeIC/M4iLBqxE5Hzv9hD/BXzGah3RcYitpawosYkGuiyoxF6dL3BV6sw2QWbD1i3/SUcGWJu5smFI4e2kVg7DSsVclGhqhsizIn8juCTl7FlR8oLiU3GYewtFj3Qe44JqqNl0IXvCDKS4DLT29GIQ60gihoduc2LkjY60bImepvtE8GAmRocL8efhXNEHuGJjwTZwScuXgq6dUsb+g8xFvwBkhxTJCQ3BBQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='피드백 사진' title='' src='/static/49858e991f61c277dbd5636c889d2db8/abf7b/why-use-final.png' srcset='/static/49858e991f61c277dbd5636c889d2db8/e7570/why-use-final.png 170w,\n/static/49858e991f61c277dbd5636c889d2db8/f46e7/why-use-final.png 340w,\n/static/49858e991f61c277dbd5636c889d2db8/abf7b/why-use-final.png 620w' sizes='(max-width: 620px) 100vw, 620px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>피드백 사진</figcaption>\n  </figure></p>\n<p>자동차 경주 피드백 중 하나이다.</p>\n<p>왜 이런 피드백이 있는지 알아보자</p>\n<h2>final 키워드를 붙이면 좋은 점</h2>\n<h3>1. 변경 가능성을 최소화한다.</h3>\n<p>즉, 코드의 <strong>예측이 쉬워진다</strong>.</p>\n<p>사실 알잘딱깔센으로 객체나 값의 변경은 정말 필요한 곳에서 필요한 만큼 수행해야 한다.</p>\n<p>하지만 final 키워드를 붙이지 않으면 분명한 것은 변경 가능성이 존재하는 것이고, 모종의 이유로 사이드 이펙트 발생으로 버그를 낳을 수 있다.</p>\n<p>그럼 퇴근이 늦어질 것이다.</p>\n<h3>2. Thread-Safe한 값이 된다.</h3>\n<p>동시성 이슈이 발생하는 과정에는 반드시 값이 <strong>변경</strong>하는 과정이 존재한다.</p>\n<p>그런데 애초에 값을 변경하지 못하게 한다면 동시성 이슈는 일어날 일이 없다.</p>\n<p>그럼 퇴근이 빨라질 것이다.</p>\n<blockquote>\n<p><strong>유의해야 할 점</strong> ❗️ <br>\n<code class=\"language-text\">StringBuilder</code>나 <code class=\"language-text\">List</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code> 과 같은 컬렉션들은 값이 <strong>변경</strong>한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token operator\">></span><span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">final</span> <span class=\"token class-name\">StringBuilder</span> sb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   \n   sb<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   sb<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   \n   <span class=\"token keyword\">return</span> sb<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 객체들은 내부적으로 쓰기 작업을 모두 허용한다.<br>\n<strong>final 키워드는 사실 메모리 Level에서 값의 재할당을 불가능하게 막아줄 뿐이다.</strong></p>\n</blockquote>\n<h3>3. 성능의 사소한 이점</h3>\n<p>이건 우테코에서 배운건데 신기해서 공유한다.</p>\n<p>아래 두 코드는 바이트 코드 레벨에서 차이가 존재한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">example1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> a <span class=\"token operator\">=</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">String</span> b <span class=\"token operator\">=</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">example2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> a <span class=\"token operator\">=</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> b <span class=\"token operator\">=</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/66205/result_of_bytecode.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 44.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrUlEQVR42n2RW2vUQBiG83u98hesF70VaaEKioiCFNdeiiheCOKF4GGhqFtpt5g9ZnOeZGZy2E3yOJOWuoIaeHjeLxneCTOOEAI/CJFK0XUd/3uU1nhrH5FlNE3z1zWOLVyuVr8X7JbavENVVUznC6q6/uemjsglXhhTm8LWvGg7S3fl3e6OoihM4ax30zaGltZgc9u1l4Xxh7fMXwwpvn5EG6rxF4pvn/q5Hn+mPT+h+TGC2RmxyhlNz/gZebjRmkUaMDdMY5tDAi1wkqeHTAY3mB8MmB3cwt0f4D+6TfBkn+jobk/w+A7V+5fIsmYdp4RpRmBJhLG4zr755ojnDzjdu8nkcI9weB//6B6RcXT8kOzVM9SbY/TrIc3oHaqsWAWROaLEOL7K8TXrKMHJpxf456cUoUcjBdssYZunbERMFflsjdG5QZqzK1ksPVLzR9pkrYveyjiXqp+dVGTMliuklCiDdVWWdG37x03bWWrFxcwlEgnCbGCRpWZjL4WOxuBkyynL7yfohUtpsvXGX9CZQyf2L7FZRCQqY+xOmCc+Xhb3+DIlrRVio3t+AVClon7Bb1ZCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='바이트 코드단의 결과' title='' src='/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/ca1dc/result_of_bytecode.png' srcset='/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/e7570/result_of_bytecode.png 170w,\n/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/f46e7/result_of_bytecode.png 340w,\n/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/ca1dc/result_of_bytecode.png 680w,\n/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/02d09/result_of_bytecode.png 1020w,\n/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/9d567/result_of_bytecode.png 1360w,\n/static/68aa26a2ec9b1f1aa78cea7b3c1f24c4/66205/result_of_bytecode.png 2548w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>바이트 코드단의 결과</figcaption>\n  </figure></p>\n<p>왼쪽 빨간 영역은 <code class=\"language-text\">example1()</code>의 결과, 오른쪽은 <code class=\"language-text\">example2()</code>의 결과이다.</p>\n<p>프로그래밍 언어 관점에서는 아무 것도 아닌 것처럼 보이지만, 컴퓨터 관점에서 실행하는 코드의 양은 꽤 차이가 난다.</p>\n<h3>4. GC 성능을 높일 수 있다.</h3>\n<p>GC 성능을 높일 수 있다고 하는데, 이는 GC에 대해 알아보고 작성하자.</p>\n<h2>final 키워드를 붙이면 안좋은 점</h2>\n<h3>1. 값을 변경하려면 새로운 객체를 생성해야 한다.</h3>\n<p>이는 메모리를 추가적으로 사용하게 된다.</p>\n<p>근데 사실 GC가 있으니 크게 문제되어 보이지 않는다.</p>\n<p>GC를 믿어보자.</p>\n<h3>2. 코드가 다소 지저분해진다.</h3>\n<p>final 키워드를 통해 불변을 지키려면 가급적 불변을 지켜야하는 곳에는 모두 붙여줘야 할 것이다.</p>\n<p>어디는 해주고 어디는 안해주면 그게 더 혼란스러울테니까.</p>\n<p>그러면 인스턴스 변수 뿐만 아니라, 메서드 파라미터나 메서드 내의 지역변수에도 붙여줘야 할 것이다.</p>\n<p>하지만 이는 코드를 작성하는 과정에서도 그렇고 읽는 데에도 은근 거슬린다.</p>\n<p>아래는 진행했던 프로젝트의 메서드 중 하나이다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/21af4b93d96197fb3b49309dc14d5406/70668/before_final.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 32.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVR42n2QaW7EIAyFc4/OTBayEEhICAECs1a9/5leTVRVajudH58sy/bzszMlJaScIOcNSmnMeoU2DsZuGCmXYsIyU649BjGDlS2qqkXT9qhbvtN2YqduOLJ4ueP2+ECIV2zxArN4XN0d0V7hdUCYItwccLHU59/3OA8r1KihhgVCKHAxoqfYcYlMDuSOWG2A8xHLYuHdGYt28P4M6wImZeBMxGZp4eTgaJGWBpxJFDnD27HA4YusqVvoxe1iG7kM5xvM6sH7AcM471srRmfWiQ4la8CaDnlZ43AqcMqrH2SCC3JjIKQi2+MeE0ko5ekvx1P5h99C34I1bUsnp+E+ie3/GMnhSA3s5fBTwbxg/xZT7VX9meAnWd7O+Q7+5WoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='final 키워드 붙이기 전' title='' src='/static/21af4b93d96197fb3b49309dc14d5406/ca1dc/before_final.png' srcset='/static/21af4b93d96197fb3b49309dc14d5406/e7570/before_final.png 170w,\n/static/21af4b93d96197fb3b49309dc14d5406/f46e7/before_final.png 340w,\n/static/21af4b93d96197fb3b49309dc14d5406/ca1dc/before_final.png 680w,\n/static/21af4b93d96197fb3b49309dc14d5406/70668/before_final.png 757w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>final 키워드 붙이기 전</figcaption>\n  </figure></p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/7b374269752e3976f7fce5f1d590bbf7/6535c/after_final.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 30.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA90lEQVR42pWQSXLDIBBFdRFLaBaTBGIQsq2q5P6H+mlw4myTxSsK6Hr9uysxzThWBedPHOeFFA64kBDjHdfjEzHc4dSOZA6c8cKVPuC2iHmREGoDFxpCrlDaYOEKVd102JWAc4GET3gSOR/hbcLpnwgmFewWkNyjEOlPcwNFTKMA6wa03VioGOsxDBN1WuHDSSTsLmKzHnrbIamz3iwkpVHSQFKdVhZ9N2MgGBtwq9tCDlfVJOQLJfQHjA0ky6cH569Rplmg/i4usA63JtO+ye8NeV7CpofgEsbsZSeyQKlWi2Hk78K/UuW5c8qm/d0Dy9D9P6If4RfUgLEuR/RIQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='final 키워드 붙인 후' title='' src='/static/7b374269752e3976f7fce5f1d590bbf7/ca1dc/after_final.png' srcset='/static/7b374269752e3976f7fce5f1d590bbf7/e7570/after_final.png 170w,\n/static/7b374269752e3976f7fce5f1d590bbf7/f46e7/after_final.png 340w,\n/static/7b374269752e3976f7fce5f1d590bbf7/ca1dc/after_final.png 680w,\n/static/7b374269752e3976f7fce5f1d590bbf7/6535c/after_final.png 802w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>final 키워드 붙인 후</figcaption>\n  </figure></p>\n<p>은근 차이가 있어보인다.</p>\n<blockquote>\n<p>사실 셀럽잇 프로젝트할 때 이거 때문에 안붙였는데 불변을 지키지 않아 생기는 문제는 없었다. 😶</p>\n</blockquote>\n<h2>결론</h2>\n<p>프로그래밍에서 불변을 진리처럼 여기는 것 같다.</p>\n<p>하지만 늘 그랫듯 개발에는 <strong>정답</strong>은 없다.</p>\n<p>final 키워드를 통한 불변식을 지키는 것도 마찬가지이다.</p>\n<p>조금 더 넓은 범위에서 이해해보면, 사실 프로그래밍 언어가 제공하는 기능을 통해 프로그램의 안정성을 도모하는 것이다.</p>\n<p>프로그램이 안정적이면 개발자는 조금 더 퇴근을 빨리하거나 꿀잠을 잘 수 있다.</p>\n<p>하지만 개발하는 과정에서 final 키워드로 인해 눈이 조금이라도 피곤하고 머리가 아프다면 붙이지 않는 것이다.</p>\n<p>근데 나라면 더 빠른 퇴근과 편안한 잠을 위해 final 키워드를 붙이는 데에 손을 들고 싶다.</p>","frontmatter":{"title":"final 키워드를 사용해 값의 변경을 막아라. 왜?","date":"December 05, 2023","update":"December 05, 2023","tags":["java","clean-code"],"series":"Why? 시리즈"},"fields":{"slug":"/why-use-final/","readingTime":{"minutes":5.495}}},"seriesList":{"edges":[{"node":{"id":"e1be180a-113d-5df8-9bd4-3dd5d8bb4d1b","fields":{"slug":"/why-seperate-domain-and-view/"},"frontmatter":{"title":"Domain과 View를 분리한다. 왜?"}}},{"node":{"id":"9091e058-99be-5ff8-ae14-4489eba8e413","fields":{"slug":"/why-use-final/"},"frontmatter":{"title":"final 키워드를 사용해 값의 변경을 막아라. 왜?"}}},{"node":{"id":"35d8f587-ab7e-50fa-a624-8d68aec98522","fields":{"slug":"/why-use-collection-instead-of-array/"},"frontmatter":{"title":"배열 대신 컬렉션을 쓴다. 왜?"}}},{"node":{"id":"50eb9a45-26ac-517f-991c-9140da539386","fields":{"slug":"/why-wrap-primitive-type-and-string/"},"frontmatter":{"title":"모든 원시값과 문자열을 포장한다. 왜?"}}}]},"previous":{"fields":{"slug":"/why-seperate-domain-and-view/"},"frontmatter":{"title":"Domain과 View를 분리한다. 왜?"}},"next":{"fields":{"slug":"/os-interview-study-5week/"},"frontmatter":{"title":"[JSCODE] - OS 면접 스터디 5주차"}}},"pageContext":{"id":"9091e058-99be-5ff8-ae14-4489eba8e413","series":"Why? 시리즈","previousPostId":"e1be180a-113d-5df8-9bd4-3dd5d8bb4d1b","nextPostId":"fa7523ff-1ef3-530d-a49b-3cc2cd88ac17"}},"staticQueryHashes":[],"slicesMap":{}}