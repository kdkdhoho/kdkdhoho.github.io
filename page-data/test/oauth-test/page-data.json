{"componentChunkName":"component---src-templates-blog-post-js","path":"/test/oauth-test/","result":{"data":{"site":{"siteMetadata":{"title":"내가 재밌는 일을 하자 !"}},"markdownRemark":{"id":"2d2022fc-dacf-57e9-a780-dcfe1b198a01","excerpt":"이번 글에서는 Spring Boot에서 Rest Assured를 이용해 인수 테스트를 하는 과정에서 OAuth를 처리하는 방법을 고민한 흔적과 해결 방법을 기록하려고 합니다. 비단 OAuth 뿐만 아니라 다른 외부 REST API…","html":"<p>이번 글에서는 Spring Boot에서 Rest Assured를 이용해 인수 테스트를 하는 과정에서 OAuth를 처리하는 방법을 고민한 흔적과 해결 방법을 기록하려고 합니다.</p>\n<p>비단 OAuth 뿐만 아니라 다른 외부 REST API를 호출하는 부분을 해결하는 데에도 도움이 될 것으로 기대합니다.</p>\n<blockquote>\n<p>개발 환경은 Spring Boot 3.2.2, Rest Assured 5.3.2를 사용합니다.</p>\n</blockquote>\n<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<p>현재 ListyWave가 제공하는 모든 기능들에 인수 테스트를 작성하려고 합니다.</p>\n<p>하지만 서비스는 자체적인 로그인 기능을 제공하지 않고 <u>사용자 경험 개선</u>과 <u>서비스 신뢰도 향상</u>을 위해 카카오 OAuth를 채택하여 사용 중입니다.</p>\n<p>이는 다른 의미로, 회원과 관련된 기능들을 인수 테스트하기 위해서는 카카오 OAuth 로그인이 선행되어야 한다는 뜻입니다. 하지만 Rest Assured 만으로는 카카오 로그인을 수행하지 못합니다.</p>\n<h2 id=\"문제-파악하기\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%8C%8C%EC%95%85%ED%95%98%EA%B8%B0\" aria-label=\"문제 파악하기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 파악하기</h2>\n<p>왜 수행하지 못할까요?</p>\n<p>현재 ListyWave에서 수행 중인 로그인 요청부터 처리까지의 Flow는 대략 다음과 같습니다.</p>\n<ol>\n<li>사용자가 카카오로 로그인하기 버튼 클릭 -> 프론트엔드 서버에서 백엔드 서버로 로그인 URL 요청 -> 사용자는 카카오 로그인 페이지에서 로그인</li>\n<li>카카오 로그인에 성공하면 Redirect URI(프론트엔드 서버)로 AuthCode 전송 -> 프론트엔드는 AuthCode를 백엔드로 전송 -> AuthCode로 Kakao Authorization Server에 액세스 토큰 발급 요청 -> 발급받은 액세스 토큰으로 Kakao Resources Server에 회원 정보 요청 -> 받은 회원 정보로 로그인 비즈니스 로직 처리</li>\n</ol>\n<p>위 flow는 이해가 잘 가지 않을 수 있기에 핵심만 말씀드리면 <u>로그인이 선행되려면 AuthCode가 필요하고</u><br>\n<u>AuthCode는 카카오 로그인 페이지에서 로그인 해야 하기 때문입니다!</u></p>\n<p>추가로, 만~약에 RestAssured 만으로도 카카오 로그인에 성공해서 AuthCode를 받아왔다고 해도 OAuth는 결국 <u>외부 API를 호출하는 것과 같습니다.</u><br>\n이는 다시 말해, 테스트 코드로 인해 사이드 이펙트가 발생할 가능성이 있다는 의미와 같습니다.<br></p>\n<p>따라서 <u>테스트 코드는 AuthCode로부터 자유로워야 하고, 실제 REST API를 호출하지 않아야 합니다.</u></p>\n<h2 id=\"문제-해결하기\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"문제 해결하기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 해결하기</h2>\n<p>우선 OAuth 로그인에 사용되는 객체들을 천천히 살펴보았습니다.</p>\n<ul>\n<li>요청과 응답을 처리하는 AuthController</li>\n<li>로그인 비즈니스 로직을 처리하는 AuthService</li>\n<li>Kakao Authorization Server와 Resources Server에 REST API 요청을 보내기 위해 필요한 파라미터 값을 조립하는 KakaoOauthClient</li>\n<li>실제 REST API를 호출하는 KakaoOauthApiClient</li>\n</ul>\n<p>일단 <u>문제 해결의 핵심은 실제 REST API를 호출하는 <code class=\"language-text\">KakaoOauthApiClient</code></u>가 될 것으로 생각됩니다.</p>\n<p>AuthCode를 파라미터로 받아 Kakao Authorization Server에 액세스 토큰 발급 요청을 보내며,<br>\n발급받은 액세스 토큰을 통해 Kakao Resource Server에 회원 정보를 요청하기 때문입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b10c72d08b9cf34115e3a965bf60253/e8950/KakaoOauthApiClient.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1ElEQVR42n2T23LkIAxE5z8yY4NtxB2b8VxS+///1dsitansSx5OocIgqVv4kn1AHUS048TRn4O2n/Ch4DYtmGZlHets1l+55CJQ2h6xboKrsZgME1gm0EP2B8vKAha3mx3rpMzLf1wMEyzrhvN8op8vpL5DeoJ/VMi9whF5NMYFclaYIJjdBiMOhutXAYMr0fgiPmNzEaV2csCFBpsaltzgcyQeEhUWyQWhVYTKQinxbOTdMHASYRenkndKPgYpswPfMMUH5nBHKgk5bYjBIcaCxEJVC/NsCJV7lXcact5R230kvqTkuCHY1UPnh09m/WJeNkysOq8KY7vg+jHjejXfMofUn5Kn2cLQ8Pfnn0E9O/yZET4PyGsf+DfjJ32kr5YW2BxoC1f6eeMg/iUdQ9Gnoawu0eyCWRpusmOjJyIbnFMcoQIrSEKpLsNLhoQ8vBNPf2mJUQ8rTe69I6p/6Y61vWGJK/SmesTiEdhRavu4WOOBEndEYSMc6EjGhiL9HUPpXRNWvF4dj/McH4QPvFJe6gXlLMh3DuFoKMeBvT9w8LuXNFToIDSpdjok67PRJIGkVLFQyuyZgE8lRsdpbkRlsZs1Im3sZmVMi0LUzuo3+qf8BaXjQP91pI9QAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"KakaoOauthApiClient 코드\"\n        title=\"\"\n        src=\"/static/5b10c72d08b9cf34115e3a965bf60253/f058b/KakaoOauthApiClient.png\"\n        srcset=\"/static/5b10c72d08b9cf34115e3a965bf60253/c26ae/KakaoOauthApiClient.png 158w,\n/static/5b10c72d08b9cf34115e3a965bf60253/6bdcf/KakaoOauthApiClient.png 315w,\n/static/5b10c72d08b9cf34115e3a965bf60253/f058b/KakaoOauthApiClient.png 630w,\n/static/5b10c72d08b9cf34115e3a965bf60253/40601/KakaoOauthApiClient.png 945w,\n/static/5b10c72d08b9cf34115e3a965bf60253/78612/KakaoOauthApiClient.png 1260w,\n/static/5b10c72d08b9cf34115e3a965bf60253/e8950/KakaoOauthApiClient.png 2000w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>어쩌면 이 녀석만 해결하면 모든 문제가 술술 풀릴 것 같은 생각이 듭니다.</p>\n<p>따라서 저는 Mocking을 통해 해당 객체를 <a href=\"https://tecoble.techcourse.co.kr/post/2020-09-19-what-is-test-double/\">테스트 더블</a>을 시도해보았습니다.<br>\nStubing으로도 해결할 수 있겠지만 Mocking이 더 유연하고 간편하다고 판단했기 때문입니다.<br>\n또한 인수 테스트 특성 상, Test Context에 모든 Bean을 Load하기에 <code class=\"language-text\">@MockBean</code>을 통해 쉽게 Mocking 할 수 있다고 판단했기 때문입니다.</p>\n<h2 id=\"해결-과정\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95\" aria-label=\"해결 과정 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결 과정</h2>\n<p>우선 모든 인수 테스트가 상속받는 <code class=\"language-text\">AcceptanceTest</code>에 <code class=\"language-text\">KakaoOauthApiClient</code> 객체를 <code class=\"language-text\">@MockBean</code>으로 선언하여 등록합니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1a76075338e483fa7f663afa3b31bb73/e8950/AcceptanceTest.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVR42mWPy27TQBSG8wbQi0AicZz4OvZ4fGni8TVJK1SBShcIULtHLEjbV2CBEBtW0Jbn/Zi6lRBl8c35dWbmP+cf1W1CVUvqJqHt7nXV5Og6p+ka+vURdbsyvZ623xi9pqxa1npJpzVpVKBEhhQpkVCM+lpRLyW9Mey0MVzEtHXDpluhq47V5iVdf4hKCw6Pjil1Q14sWZqqVEGXtNRJg440eXzAaCFj0lCQBCGL6F5Hnk8uAqRMKRYVxUE5kOULXC9kYs0YT2ys6ZyxZTOezgYmhtHYcpi7Lk7wgO/hC5+Z59w/nvxlYpjaDvbMHRi07f7DyJo65EqwqhS9VjQmclkISpXhO2LYZtjkYYM77gZZ9nwwfMxoYo5MCDaFMcwUbVnT6NYMOKIqO1ITU4UZZaxZRia6OGARlwReNAz6z3A6c3DmJqYTmOrjh5I4SQkjiYgSQiEJzeckSJG+IvbkUF3zfmoM7ceGjhsRN6+IT7bI15+w1p95srxgR1+wq7eGC/bqS3aqLTv1lqe1uTPsmt5+e8Vec8W+4VlzOTB6rj8iTr5Qvv+OfvcN+fYH8dlvkvNb5NkN6vyG6MM1whCc/CQ/vSE9vSYzNXnzC3V6i3f8lRfRirHo+QPw/BpWggEmCAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AcceptanceTest\"\n        title=\"\"\n        src=\"/static/1a76075338e483fa7f663afa3b31bb73/f058b/AcceptanceTest.png\"\n        srcset=\"/static/1a76075338e483fa7f663afa3b31bb73/c26ae/AcceptanceTest.png 158w,\n/static/1a76075338e483fa7f663afa3b31bb73/6bdcf/AcceptanceTest.png 315w,\n/static/1a76075338e483fa7f663afa3b31bb73/f058b/AcceptanceTest.png 630w,\n/static/1a76075338e483fa7f663afa3b31bb73/40601/AcceptanceTest.png 945w,\n/static/1a76075338e483fa7f663afa3b31bb73/78612/AcceptanceTest.png 1260w,\n/static/1a76075338e483fa7f663afa3b31bb73/e8950/AcceptanceTest.png 2000w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그리고 테스트 코드에서 Mocking을 해줍니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/61d81c52f712a095341da30984eb7e84/e8950/Mocking-in-TestCode.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.50632911392405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVR42pWSW07DMBREswskSPy24yRuXk5bSBESK+CD/a9lGFct4rN8jK59b3w8Y6VKfY9DGjGtR2pD6ge03QF+mCFchDQB6h+qnHOQYcCTTahdgvQd1ItAfK7RsepGoRYKzVUaTXOrv1J/pFG11uE8ZcwpYwoJB7rahcFXI/HNj96VQWMDtOHF2rIWJ/e1h9Eeuoh9yX7VSoM9Tbgcz/jIr/jcLrhsO8ZxQR5XbG0PS9c2tNDOw/sexhPqueasdT28jXChg2a/Uspi4SB3A3JMmDlYQ4/JBcyuxcC9osMSVdB5iSYYTdwi1zfdn6ASBApaz6cd6+kNcZkxns4YjhndvMA6ArWDYJJHVEkCy4GBsWOX4HyEj4xRIrDfSHO9+WFggXU9fxPGvMIIusuxJxn3UVgB/gDLyuRKJxAWvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Mocking in TestCode\"\n        title=\"\"\n        src=\"/static/61d81c52f712a095341da30984eb7e84/f058b/Mocking-in-TestCode.png\"\n        srcset=\"/static/61d81c52f712a095341da30984eb7e84/c26ae/Mocking-in-TestCode.png 158w,\n/static/61d81c52f712a095341da30984eb7e84/6bdcf/Mocking-in-TestCode.png 315w,\n/static/61d81c52f712a095341da30984eb7e84/f058b/Mocking-in-TestCode.png 630w,\n/static/61d81c52f712a095341da30984eb7e84/40601/Mocking-in-TestCode.png 945w,\n/static/61d81c52f712a095341da30984eb7e84/78612/Mocking-in-TestCode.png 1260w,\n/static/61d81c52f712a095341da30984eb7e84/e8950/Mocking-in-TestCode.png 2000w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>디버깅 모드로 하나씩 따라가보면 아래 사진처럼 만든 값들이 그대로 나오는 것을 확인할 수 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0ee56258650dff0a56b02f037d6131d7/e8950/debug.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.24050632911392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVR42kWQW2+bQBBG+TGNL2Bjc2fZ5WJjGzB2c6lkRZWj5rmvfWibJs1PPx1jqXk4mgFmz86HpbpnmtN3Nud3qtNP6scX2qdXmq8vrE+/yG5/0J5fh3f142+6pzf6b3/Zyvfm/Gfoj8/vrGS2kxlrqTasqh375pZ+f0/f3bNrHlDtA8nhjmBzIMhafNXgCaHpiPI9gdRLHxf90HuqJdAdlj1fYHyXRvm0ecK+SDgKaRLiasEEONGSeepjy9zNaMKn0UjqmMnUGZjaH1jOIiCPAjojssrQlZpSZ6jU4MdKtjBEQqA1Zl1TrXfUu4562zKXs/ZsiTP3/mM5rk8e+oOwF+GhugpDkXmZxheRn2USWaHKEl2sRLqlqGqRLZjYc8bT2VAvz7Khj7kIdcJdXYhU86XO6UuDKTLyrSYqRSi9Z5RssbziesOlShfovCIzJQsvxJpdIocBrYk5rg2tiGqR7moj/1PT6JQ0SvH8lCjOiFK5ILliZNtts6frP7PrDjITXyOrwGeVRmxkgzhOcNKYmWw8kgg3tsvEWUgcd2DqfHCJOpo43IztoV4i/wPYzBC4d+cm7QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"debug\"\n        title=\"\"\n        src=\"/static/0ee56258650dff0a56b02f037d6131d7/f058b/debug.png\"\n        srcset=\"/static/0ee56258650dff0a56b02f037d6131d7/c26ae/debug.png 158w,\n/static/0ee56258650dff0a56b02f037d6131d7/6bdcf/debug.png 315w,\n/static/0ee56258650dff0a56b02f037d6131d7/f058b/debug.png 630w,\n/static/0ee56258650dff0a56b02f037d6131d7/40601/debug.png 945w,\n/static/0ee56258650dff0a56b02f037d6131d7/78612/debug.png 1260w,\n/static/0ee56258650dff0a56b02f037d6131d7/e8950/debug.png 2000w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"결과\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과</h2>\n<p>테스트가 통과하는 것을 확인할 수 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/87488/test-success.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.41772151898735%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHElEQVR42n2U6ZKbMBCEeY/4ACGBuG8wi494s7WVSuVH3v9lOjMjvLHjbH58JYmSmp4egacjizzPYYseUVoiNBYqjBGoCKG20FECbRIomisdyzNGmVj2ap3Q2s35mecHWjY0zQF9O6OpBnTDAVXdwtoMUZzCRKkc8LURcZkbmpOZSKfQoXXPae3t/VDcFHmNvjugbUZ07YimHcRdTJiViIVDFmVnMWFlzs8CelkYxyyoSdAgTys0ZY+qbFFWHWxCMSSFCPlKww/MSgiu6gEyxcb8UDuHnEFV90jSAmlWIMlKGokko40Km62P7Y4JHtjt1R2BiHr7wDnM8spR1MgJFucxzSrK8ZYllU4jrzmzR0GHNIWV+QDnlq7uuGTntHKZGdfdj/l6G/jsp4JtN6IoG3LWiFCal7JmcdeYVBoViUtyTE75/JMgE9MVYcRB+MeJ62IkmW02e3xZ4VyZT0tWdKhueizzBcfmjGlaMM4LuZ4wtXwvO4kgy12uil70nwyVNKahkllwaU9Yjhe8HM84DAtOw1dcxleMzeyqoLL5uv1b0HcOGd6c55ShrZCXLkdxRLCjv0ve7tTTVfL4slpLYdN36DoZP6E0f9fEuscRCxzVPV47THh7/47rt3ecLq8YphfUbU8MH7T9KHAkt/FGRbnf452vb/jx8xeO5yum+Sh0w0xCI81PGA/UmH6SHwY3hWMx8gdyTs3dt878BqmDuNMqk4tAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test success\"\n        title=\"\"\n        src=\"/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/f058b/test-success.png\"\n        srcset=\"/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/c26ae/test-success.png 158w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/6bdcf/test-success.png 315w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/f058b/test-success.png 630w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/40601/test-success.png 945w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/78612/test-success.png 1260w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/87488/test-success.png 1282w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이제 이를 <code class=\"language-text\">AcceptanceTest</code> 객체에 메서드로 만들어 다른 도메인에서 재사용할 수도 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e95e9c426b6aa7aca6c9bc1dd05373c9/f1901/login-method.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 122.15189873417722%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAADKElEQVR42p1VWZLbOBTTPTrWxl0kRclaLLs7SWUyv7n/cRCQTqczVcmMez5QpCUZwsPDo6ptD7hciG3GbdtxXTbs84qZSGGEVR5KODStQN30/4kqBYeJCMHjc4r4ti74tpyx+giph0Jo5PA4YS8URu8wBgslNT7UHU5Nhw+n9o76jkfICqGSClsKWOYF87TBGo+gR3ii61Qhf5TsTqg09iWw5ADrItwQYUg6aO5VYLn+4XILodaazYhUOCGmBd6PCDYhmonNsGg7iaYR71GosJ89xhgwhARj7+qCGdH/v5LvhGmMJJxKmdm/XGZuxql+J6Em4bGGn4QxznD00qihEPuiVD+stHj4so84zwmeZDGd2aCpEAWTvUwliw/n0JDw4zGyKTPStGJgU0bLvTszl/cJeVeXhZCIg2H+LGMzQjMysrdwMpSRyx7mgJe1hDwHvy/ra/h/faaSJAz0T7gJ2hporUgcSrdLx6l4YDatcsVTp/kiaejz/V7ObXmGUBzVonDg6AnjmLme5XXoeoVe6H+CeczNyVHK2ex/80z+X9WRZFl37MenEujBRD6sSwl1Lu8Vza/7nmv/23tVL+mXZZfHHTFsiOMGQy/zdaHsj9UVyB9rJ8wfUUnK9Myi1QaCCrOXOYee3oQhMOiuRMfxCBuyp/Q3l99STUbDRr3t2eWp6/Alenzl4fr3fsFf64YvxFfuD872kTa8nDcc3mOzDhu9Xti8pCQWitjcgJmNnIzERUpUvmlZMmeZpV6WZyzTgXW9Yb99pLdH6XCXDSdaoqG/NRWe6H1e2/Jb4Kln/CiuCm3LSDCHucQ4IVGVswMPi8SgL1B8meDBm68ZG5hTroTW9985Wpr/7+nfam1W2CDyuF/nK78nL5zrF+zrFcfxjPmcm7SUUcxKJZv0CsEsviJHqCEmHtZU2EFTvuGkzMuOiSQTPXT8QLV57IRguTzGTm/TcKrbt8jk04h4YkN83ZCQdXfMUY7I9fkz1u2KyI9UuuxYbzeM+4owca5ZZs5e/YfD9okI7EeV+h46E9LYMz3zHClN+ZYvcNrxE8CSqKBv/h0tkZoW3wH6VLQvRMUR1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"login method\"\n        title=\"\"\n        src=\"/static/e95e9c426b6aa7aca6c9bc1dd05373c9/f058b/login-method.png\"\n        srcset=\"/static/e95e9c426b6aa7aca6c9bc1dd05373c9/c26ae/login-method.png 158w,\n/static/e95e9c426b6aa7aca6c9bc1dd05373c9/6bdcf/login-method.png 315w,\n/static/e95e9c426b6aa7aca6c9bc1dd05373c9/f058b/login-method.png 630w,\n/static/e95e9c426b6aa7aca6c9bc1dd05373c9/f1901/login-method.png 942w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>또한, 요구사항 중에 최초로 로그인 한 회원의 여부를 <code class=\"language-text\">LoginResult#isFirst</code> 필드에 boolean 타입으로 담아 반환하고 있는데요.<br>\n해당 로직을 테스트해도 제대로 응답하고 있음을 확인할 수 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 559px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7d33bf2282ed284e747b81406ca34777/a65ce/other-test.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.48101265822784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACl0lEQVR42oVU23LaQAz1dyQxvmFjG9/vBgOxwSEUSNJk0maSdvr/X3EqbYCGpjN9OCOttNbqnNVaMiwbijaEMTSRZx5GtoOBakLVLWhDG6pxxIhiIxFXdPqGfEU/xIYONMprugkpzAuYjgfTGqPOEnhxDSeZYxRNYUUzONkSbt7BSRewkwXGRYug6eFVHcL5Lby6h1P08JMpoqSEpGomZEUHW0U14PkR0rzCmKw7DuhkEwPKn0B7FFUXexXNEOuPeYnbZEfV3ws6ri8KMbwghm5Y5wX/g08FNdLIGrmQBxourxRhj5vZlwf6AdopJx/yKt3Fn4K0YJRVg2beYjJdoJldY9osUFQT4Vd1gzDOTr5PDOrJDGVRoSwnCML0c4esYZIWYjPTD6MUQ9MW6yjJhQz8Ie+J4pz2eIhcF67j4oo6Pi9IHQ4Ug0bIFnQuLgcCV7JC9N99loFxcSGLuJBGVslXzzXkYtxhRjfMNPKiRppVyMgyzSyvT+CuC6LIHcd+itBLEJM/9sJDQTqFb1MjJGkpIIpRcabGm3mU2DLNJCsFjCENNzHSaOSOjUk8R9y2Ow4FOMHF/8a/4qytaTlnkGyeOy9Au7w5oVutsexv0XY9WvJXNxv0662wHD/mp3zbJM9HSDFRKsoa1/TxerPD7Zc74bfLNRbtCvPrJa1v3g+gw44xBsvAt85NHSFxsJg0ItmtNtTFVujHGuUkPF+IHyY0KvTOg4TYhPQsY+EHUUb5/AMySItlj28vP/Hy+gvP39/I/4H93RN2d1+x3T1gu3/Abk8+YX//SPFH6nhNdFuBZt5hs73H0/MrMdxDcv0QaVnR9LdCg3lLFOkQpsYvhqnNFp2QgWkzuHOH3jr/QBgBjVGU5sL+BjzU77ShHBg/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"other test\"\n        title=\"\"\n        src=\"/static/7d33bf2282ed284e747b81406ca34777/a65ce/other-test.png\"\n        srcset=\"/static/7d33bf2282ed284e747b81406ca34777/c26ae/other-test.png 158w,\n/static/7d33bf2282ed284e747b81406ca34777/6bdcf/other-test.png 315w,\n/static/7d33bf2282ed284e747b81406ca34777/a65ce/other-test.png 559w\"\n        sizes=\"(max-width: 559px) 100vw, 559px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h2>\n<p>이렇게 Spring Boot에서 Rest Assured로 인수 테스트하는 과정에서 OAuth와 같이 REST API를 호출하는 로직을 처리하는 방법에 대해 알아보았습니다.</p>\n<p>피드백 및 더 좋은 방법 제시는 언제든지 환영입니다.<br>\n긴 글 읽어주셔서 감사합니다.</p>","tableOfContents":"<ul>\n<li><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%8C%8C%EC%95%85%ED%95%98%EA%B8%B0\">문제 파악하기</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0\">문제 해결하기</a></li>\n<li><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95\">해결 과정</a></li>\n<li><a href=\"#%EA%B2%B0%EA%B3%BC\">결과</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n</ul>","frontmatter":{"title":"Spring Boot에서 Rest Assured로 인수 테스트할 때 OAuth 로그인 처리하기","date":"2024년 3월 5일","description":"인수테스트에서 OAuth 로그인 처리하기","tags":["Spring Boot","Acceptance Test","Rest Assured","OAuth"]}},"previous":{"fields":{"slug":"/retrospection/listywave-retrospection/3-6-weeks/"},"frontmatter":{"title":"[ListyWave] 3~6주차 회고"}},"next":{"fields":{"slug":"/database/real-mysql-book-study/10-execute-plain/"},"frontmatter":{"title":"MySQL의 실행 계획에 대해 알아보자"}}},"pageContext":{"id":"2d2022fc-dacf-57e9-a780-dcfe1b198a01","previousPostId":"a0802fe5-4052-5c8c-8914-d1cf7a946506","nextPostId":"c6b11df9-8fbb-5a4d-bdc9-9d14b370caa0"}},"staticQueryHashes":["1475414628","2841359383"],"slicesMap":{}}