{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/sql-union-and-union-all/","result":{"data":{"site":{"siteMetadata":{"title":"김동호 블로그"}},"markdownRemark":{"id":"79822319-2e0e-56f2-b737-4f8582103960","excerpt":"1. UNION에 대해서와 UNION…","html":"<h1 id=\"1-union에-대해서와-union을-사용하는-이유\" style=\"position:relative;\"><a href=\"#1-union%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C%EC%99%80-union%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"1 union에 대해서와 union을 사용하는 이유 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. UNION에 대해서와 UNION을 사용하는 이유</h1>\n<p><code class=\"language-text\">UNION</code> 은 두 개 이상의 <code class=\"language-text\">SELECT</code> 문 결과 집합을 <strong>세로로 결합</strong>하여 하나의 결과로 만드는 집합 연산자이다.</p>\n<p>주로 <code class=\"language-text\">UNION</code>은 다음과 같은 이유로 사용한다.</p>\n<ul>\n<li>서로 다른 테이블의 데이터를 통합 조회\n<ul>\n<li>예를 들어 '온라인 주문' 테이블과 '오프라인 주문' 테이블이 따로 있을 때, 이를 하나의 '전체 주문 내역'으로 보고 싶을 때 사용합니다.</li>\n</ul>\n</li>\n<li>복잡한 조건을 하나로 병합\n<ul>\n<li>하나의 쿼리 내에서 <code class=\"language-text\">OR</code> 조건으로 풀기 너무 복잡하거나 성능이 안 나올 때, 각각의 쿼리를 따로 작성한 뒤 UNION으로 합치기도 합니다.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"2-union-사용법\" style=\"position:relative;\"><a href=\"#2-union-%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"2 union 사용법 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. UNION 사용법</h1>\n<p>기본 사용법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> col1<span class=\"token punctuation\">,</span> col2\n<span class=\"token keyword\">FROM</span> table1\n\n<span class=\"token keyword\">UNION</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">ALL</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">SELECT</span> col1<span class=\"token punctuation\">,</span> col2\n<span class=\"token keyword\">FROM</span> table2</code></pre></div>\n<p>각 <code class=\"language-text\">SELECT</code>문 사이에 <code class=\"language-text\">UNION</code> 또는 <code class=\"language-text\">UNION ALL</code>을 넣으면 됩니다.</p>\n<ul>\n<li><code class=\"language-text\">UNION</code>: 중복된 행을 제거합니다.</li>\n<li><code class=\"language-text\">UNION ALL</code>: 중복을 제거하지 않습니다.</li>\n</ul>\n<h1 id=\"3-union의-제약사항-및-한계\" style=\"position:relative;\"><a href=\"#3-union%EC%9D%98-%EC%A0%9C%EC%95%BD%EC%82%AC%ED%95%AD-%EB%B0%8F-%ED%95%9C%EA%B3%84\" aria-label=\"3 union의 제약사항 및 한계 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. UNION의 제약사항 및 한계</h1>\n<h2 id=\"31-제약-사항\" style=\"position:relative;\"><a href=\"#31-%EC%A0%9C%EC%95%BD-%EC%82%AC%ED%95%AD\" aria-label=\"31 제약 사항 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. 제약 사항</h2>\n<p><code class=\"language-text\">UNION</code>을 사용할 때는 다음의 까다로운 규칙을 지켜야 합니다.</p>\n<ul>\n<li>\n<p>열의 개수 일치</p>\n<ul>\n<li>첫 번째 SELECT에서 3개의 열을 뽑았다면, 두 번째에서도 반드시 3개를 뽑아야 합니다.</li>\n</ul>\n</li>\n<li>\n<p>데이터 타입의 호환성</p>\n<ul>\n<li>동일한 위치의 열은 서로 데이터 타입이 비슷해야 합니다. (예: 문자열과 숫자를 합치면 MySQL이 암시적 형변환을 시도하지만, 오류의 원인이 될 수 있습니다.)</li>\n</ul>\n</li>\n<li>\n<p>컬럼명 결정</p>\n<ul>\n<li>최종 결과 세트의 컬럼명은 첫 번째 SELECT 문에서 지정한 이름을 따릅니다.</li>\n</ul>\n</li>\n<li>\n<p>정렬의 위치</p>\n<ul>\n<li>ORDER BY는 개별 쿼리에 붙일 수 없으며, 가장 마지막에 한 번만 작성하여 전체 결과를 정렬합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"32-단점\" style=\"position:relative;\"><a href=\"#32-%EB%8B%A8%EC%A0%90\" aria-label=\"32 단점 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2. 단점</h2>\n<ol>\n<li>메모리 및 CPU 소모</li>\n</ol>\n<p><code class=\"language-text\">UNION</code>은 내부적으로 임시 테이블을 생성하고 데이터를 정렬해서 중복을 찾아냅니다. 따라서 데이터 양이 많을수록 부하가 급증합니다.</p>\n<ol start=\"2\">\n<li>인덱스 활용의 한계</li>\n</ol>\n<p>개별 쿼리에서는 인덱스를 타더라도, <code class=\"language-text\">UNION</code>의 결과 집합에 다시 조건을 걸 때는 인덱스를 활용하기 어렵습니다.</p>\n<ol start=\"3\">\n<li>가독성 저하</li>\n</ol>\n<p>너무 많은 <code class=\"language-text\">SELECT</code>절을 <code class=\"language-text\">UNION</code>으로 묶으면 쿼리가 길어지고 유지보수가 힘들어집니다.</p>\n<h1 id=\"4-대안\" style=\"position:relative;\"><a href=\"#4-%EB%8C%80%EC%95%88\" aria-label=\"4 대안 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 대안</h1>\n<ol>\n<li><code class=\"language-text\">JOIN</code></li>\n</ol>\n<ul>\n<li>상황: 여러 테이블의 데이터를 \"행 확장(가로 결합)\"해서 조회할 때 사용합니다. 예를 들어 주문 테이블에 회원 정보, 상품 정보를 붙여서 한 번에 보고 싶을 때 적합합니다.</li>\n<li>설명: <code class=\"language-text\">UNION</code>이 결과를 세로로 붙이는 방식이라면, <code class=\"language-text\">JOIN</code>은 키를 기준으로 컬럼을 늘리는 방식입니다. 데이터 간 관계(외래 키)가 명확할 때 가장 자연스럽고, 인덱스를 잘 활용하면 성능상 유리한 경우가 많습니다.</li>\n</ul>\n<ol start=\"2\">\n<li><code class=\"language-text\">IN</code> 또는 <code class=\"language-text\">OR</code></li>\n</ol>\n<ul>\n<li>상황: 같은 테이블에서 조건만 다른 데이터를 함께 조회할 때 사용합니다. 예를 들어 같은 주문 테이블에서 상태가 <code class=\"language-text\">PAID</code> 또는 <code class=\"language-text\">SHIPPED</code>인 건만 조회하는 경우입니다.</li>\n<li>설명: 단일 <code class=\"language-text\">SELECT</code> 안에서 조건을 합칠 수 있으므로 쿼리가 짧아지고 관리가 쉬워집니다. 다만 조건이 매우 복잡해지면 가독성이 떨어질 수 있으니, 그때는 <code class=\"language-text\">UNION ALL</code>로 분리하는 것이 더 명확할 수 있습니다.</li>\n</ul>\n<ol start=\"3\">\n<li><code class=\"language-text\">CASE WHEN</code></li>\n</ol>\n<ul>\n<li>상황: 행을 합치는 것보다, 결과를 분류/라벨링해서 보여주고 싶을 때 사용합니다. 예를 들어 금액에 따라 주문을 <code class=\"language-text\">HIGH</code>, <code class=\"language-text\">MID</code>, <code class=\"language-text\">LOW</code>로 구분할 때 유용합니다.</li>\n<li>설명: 여러 쿼리를 합치는 대신 하나의 결과 집합 안에서 조건별 값을 계산하거나 분기할 수 있습니다. 특히 집계 쿼리에서 조건부 집계(<code class=\"language-text\">SUM(CASE WHEN ...)</code>)를 만들 때 <code class=\"language-text\">UNION</code>보다 단순하고 빠른 경우가 많습니다.</li>\n</ul>\n<ol start=\"4\">\n<li>View 또는 물리 테이블</li>\n</ol>\n<ul>\n<li>상황: 동일한 <code class=\"language-text\">UNION</code> 로직을 여러 서비스/화면에서 반복해서 사용할 때 적합합니다. 또는 조회 성능이 중요해 결과를 미리 준비해 둬야 할 때 사용합니다.</li>\n<li>설명: View는 쿼리 재사용성과 일관성을 높여 주고, 물리 테이블(예: 배치 적재 테이블)은 읽기 성능을 크게 개선할 수 있습니다. 다만 데이터 최신성, 갱신 주기, 운영 복잡도(배치 실패 대응)를 함께 설계해야 합니다.</li>\n</ul>\n<h1 id=\"5-결론\" style=\"position:relative;\"><a href=\"#5-%EA%B2%B0%EB%A1%A0\" aria-label=\"5 결론 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 결론</h1>\n<p><code class=\"language-text\">UNION</code>은 여러 결과 집합을 하나로 합쳐야 할 때 매우 유용한 도구입니다.<br>\n하지만 중복 제거가 필요한지 여부에 따라 <code class=\"language-text\">UNION</code>과 <code class=\"language-text\">UNION ALL</code>을 명확히 구분해서 선택해야 합니다.</p>\n<p>만약 성능이 중요하다면 기본적으로 <code class=\"language-text\">UNION ALL</code>을 먼저 고려하고, 정말 중복 제거가 필요할 때만 <code class=\"language-text\">UNION</code>을 사용하는 것이 안전합니다.<br>\n또한 열 개수와 타입 호환성, 정렬 위치 같은 제약을 정확히 지켜야 예측 가능한 쿼리를 만들 수 있습니다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-union%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C%EC%99%80-union%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">1. UNION에 대해서와 UNION을 사용하는 이유</a></p>\n</li>\n<li>\n<p><a href=\"#2-union-%EC%82%AC%EC%9A%A9%EB%B2%95\">2. UNION 사용법</a></p>\n</li>\n<li>\n<p><a href=\"#3-union%EC%9D%98-%EC%A0%9C%EC%95%BD%EC%82%AC%ED%95%AD-%EB%B0%8F-%ED%95%9C%EA%B3%84\">3. UNION의 제약사항 및 한계</a></p>\n<ul>\n<li><a href=\"#31-%EC%A0%9C%EC%95%BD-%EC%82%AC%ED%95%AD\">3.1. 제약 사항</a></li>\n<li><a href=\"#32-%EB%8B%A8%EC%A0%90\">3.2. 단점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-%EB%8C%80%EC%95%88\">4. 대안</a></p>\n</li>\n<li>\n<p><a href=\"#5-%EA%B2%B0%EB%A1%A0\">5. 결론</a></p>\n</li>\n</ul>","frontmatter":{"title":"[SQL] UNION과 UNION ALL 정리","date":"2026년 2월 26일","dateISO":"2026-02-26","description":"UNION의 개념, 사용법, 제약사항과 한계를 정리했습니다.","tags":["SQL","UNION"]}},"previous":{"fields":{"slug":"/posts/remember-to-use-group-by/"},"frontmatter":{"title":"[SQL] GROUP BY 사용할 때 명심할 점"}},"next":null},"pageContext":{"id":"79822319-2e0e-56f2-b737-4f8582103960","previousPostId":"7c86c29a-8f65-52e8-86ab-e3af34e8a377","nextPostId":null}},"staticQueryHashes":["2637872971","3361002528","3414707483"],"slicesMap":{}}