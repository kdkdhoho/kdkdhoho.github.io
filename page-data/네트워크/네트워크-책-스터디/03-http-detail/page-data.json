{"componentChunkName":"component---src-templates-blog-post-js","path":"/네트워크/네트워크-책-스터디/03-http-detail/","result":{"data":{"site":{"siteMetadata":{"title":"김동호 블로그"}},"markdownRemark":{"id":"a041ab4b-4190-57d6-ba91-ee5baf691641","excerpt":"들어가며 이 글은 그림으로 배우는 Http & Network Basic을 읽고 학습한 내용을 정리한 글입니다. 이번 글에서는 Http Request와 Http Response가 어떻게 동작하는지에 대해 작성하겠습니다. HTTP 메시지 HTTP…","html":"<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>이 글은 <a href=\"https://m.yes24.com/Goods/Detail/15894097\">그림으로 배우는 Http &#x26; Network Basic</a>을 읽고 학습한 내용을 정리한 글입니다.</p>\n<p>이번 글에서는 Http Request와 Http Response가 어떻게 동작하는지에 대해 작성하겠습니다.</p>\n<h2 id=\"http-메시지\" style=\"position:relative;\"><a href=\"#http-%EB%A9%94%EC%8B%9C%EC%A7%80\" aria-label=\"http 메시지 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTP 메시지</h2>\n<p>HTTP 프로토콜은 <strong>여러 개의 행으로 이루어진 문자열</strong>입니다.</p>\n<p>이를 <em>HTTP 메시지</em> 라고 합니다.</p>\n<p>HTTP 메시지는 정해진 구조가 있습니다.</p>\n<blockquote>\n<p>참고: <a href=\"https://kdkdhoho.github.io/02-http-protocol/\">HTTP Request와 Response의 구조에 대해 정리한 글</a></p>\n</blockquote>\n<h2 id=\"http-압축\" style=\"position:relative;\"><a href=\"#http-%EC%95%95%EC%B6%95\" aria-label=\"http 압축 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTP 압축</h2>\n<p>HTTP Request나 Response를 보낼 때 HTTP 메시지의 크기가 크다면 <strong>압축</strong>해서 보낼 수 있습니다.</p>\n<p>압축하는 방식은 <em>콘텐츠 코딩</em>, <em>청크 전송 코딩</em> 으로 나뉠 수 있습니다.</p>\n<h3 id=\"콘텐츠-코딩\" style=\"position:relative;\"><a href=\"#%EC%BD%98%ED%85%90%EC%B8%A0-%EC%BD%94%EB%94%A9\" aria-label=\"콘텐츠 코딩 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>콘텐츠 코딩</h3>\n<p>HTTP 메시지 본문이나 전송되는 데이터를 압축하는 방식입니다.</p>\n<p>이미지나 영상같은 Multipart 파일이나 Json 형식의 String이 압축되는 것을 의미합니다.</p>\n<h4 id=\"file-형식-압축-multipart-파일-압축\" style=\"position:relative;\"><a href=\"#file-%ED%98%95%EC%8B%9D-%EC%95%95%EC%B6%95-multipart-%ED%8C%8C%EC%9D%BC-%EC%95%95%EC%B6%95\" aria-label=\"file 형식 압축 multipart 파일 압축 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>File 형식 압축 (Multipart 파일 압축)</h4>\n<p>두 가지 방식이 있습니다.</p>\n<ul>\n<li>\n<p>무손실 압축</p>\n<ul>\n<li>데이터를 압축하는 과정에서 데이터의 손실이 발생하지 않습니다.</li>\n<li>이미지에서는 <code class=\"language-text\">gif</code>, <code class=\"language-text\">png</code>의 파일 확장자를 가진 파일이 사용합니다.</li>\n<li><code class=\"language-text\">zip</code>도 무손실 압축에 포함됩니다.</li>\n</ul>\n</li>\n<li>\n<p>손실 압축</p>\n<ul>\n<li>사용자가 알아채기 힘든 정도로 데이터를 일부 손실하면서 압축하는 방식입니다.</li>\n<li>웹에서 비디오 형식은 모두 손실 압축이며 이미지의 경우 <code class=\"language-text\">jpeg</code>가 적용됩니다.</li>\n</ul>\n</li>\n</ul>\n<p><code class=\"language-text\">webp</code>는 무손실 혹은 손실 모두 적용 가능합니다.</p>\n<h4 id=\"종단간-압축-json-형식의-string-압축\" style=\"position:relative;\"><a href=\"#%EC%A2%85%EB%8B%A8%EA%B0%84-%EC%95%95%EC%B6%95-json-%ED%98%95%EC%8B%9D%EC%9D%98-string-%EC%95%95%EC%B6%95\" aria-label=\"종단간 압축 json 형식의 string 압축 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>종단간 압축 (Json 형식의 String 압축)</h4>\n<p>서버에서 Http Response를 압축하고 클라이언트가 수신한 Http Response를 압축 해제하는 방식을 <em>종단간 압축</em> 방식이라고 합니다.</p>\n<p>흔히 사용되는 압축 알고리즘은 <code class=\"language-text\">gzip</code> 이 있습니다. 그리고 <code class=\"language-text\">br</code> 도 있습니다.</p>\n<p>브라우저는 브라우저가 지원하는 압축 알고리즘(gzip, br)을 <code class=\"language-text\">Accept-Encoding</code> 헤더에 정보를 담아서 보냅니다.<br>\n이를 활용해 서버는 적절한 압축 알고리즘 방식으로 Http Response를 압축하여 응답합니다.<br>\n이때, 선택한 알고리즘은 <code class=\"language-text\">Content-Encoding</code> 헤더를 통해 알려줍니다. 그리고 캐싱과 관련된 헤더인 <code class=\"language-text\">Vary</code> 헤더에 <code class=\"language-text\">Accept-Encoding</code> 값을 추가해 새로운 캐시 정책을 적용할 수 있도록 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6daac95f31d811b4dd8ba38a0e266f40/5d030/http_compress.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.87341772151899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSElEQVR42oVQ30+CUBS+oQSZqVlEJhtNYZbT2nK2RWxMx48r3EY+8IIPPrDxwMbfwJ9u9yQalNW33Z3tnnO+73wfQgXIsswPBuOxpKpd9AckSTrp9XojWR7cos3mqNSM45jFGHMpTrkMZYyiKBz9rn7jgCWmUBlRfDjNZ8twTffes9+fF4u3V8dZdmDIdd1rXdeF+XwuOo7TmUwmTbie1hpdARJWEIR6QfjryiAIKvAMw4AmMxwOj8MwPF+t0kYcxM31et0ihNTSFHNJEtRhNl+FSyvoPwDhVjn7XMgyxGzF9kR729RBF89wnwpeQnQFsXLgtPCWZV15nqeapnlDM+7PXmby3XR6kfdZELMMa0Qw0ZeEPHm290jnhB+EuXVErfJJkoDF+i6CKIra8L+7VNO0M0rS8H2/Zdt2m2bMHnJdLYX8Ow5m+AEgmkGX7cd1OwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"종단간 압축\"\n        title=\"\"\n        src=\"/static/6daac95f31d811b4dd8ba38a0e266f40/f058b/http_compress.png\"\n        srcset=\"/static/6daac95f31d811b4dd8ba38a0e266f40/c26ae/http_compress.png 158w,\n/static/6daac95f31d811b4dd8ba38a0e266f40/6bdcf/http_compress.png 315w,\n/static/6daac95f31d811b4dd8ba38a0e266f40/f058b/http_compress.png 630w,\n/static/6daac95f31d811b4dd8ba38a0e266f40/5d030/http_compress.png 771w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>스프링에서 <code class=\"language-text\">gzip</code> 방식 압축을 적용하려면 다음과 같이 작성하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">compression</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">min-response-size</span><span class=\"token punctuation\">:</span> <span class=\"token key atrule\">압축 기준 크기 (default</span><span class=\"token punctuation\">:</span> 2048 (byte))\n    <span class=\"token key atrule\">mime-types</span><span class=\"token punctuation\">:</span> <span class=\"token key atrule\">압축을 지원하는 Content type (default</span><span class=\"token punctuation\">:</span> text/html<span class=\"token punctuation\">,</span> text/xml<span class=\"token punctuation\">,</span> text/plain<span class=\"token punctuation\">,</span> text/css<span class=\"token punctuation\">,</span> text/javascript<span class=\"token punctuation\">,</span> application/javascript<span class=\"token punctuation\">,</span> application/json<span class=\"token punctuation\">,</span> application/xml)\n    </code></pre></div>\n<blockquote>\n<p>참고: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.webserver.enable-response-compression\">HTTP Response Compression - Spring Boot Reference</a></p>\n</blockquote>\n<h3 id=\"청크-전송-코딩\" style=\"position:relative;\"><a href=\"#%EC%B2%AD%ED%81%AC-%EC%A0%84%EC%86%A1-%EC%BD%94%EB%94%A9\" aria-label=\"청크 전송 코딩 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>청크 전송 코딩</h3>\n<p>데이터를 <strong>여러 청크로 분할해 전송하는 방식</strong>의 알고리즘입니다.</p>\n<p>이를 통해 전체 콘텐츠가 준비될 때까지 기다리지 않고 일부분을 먼저 송신 및 수신할 수 있습니다.<br>\n특히 큰 파일이나 동영상 스트리밍과 같은 상황에서 유용하게 적용됩니다.</p>\n<p>이를 위한 헤더로 클라이언트가 사용하는 <code class=\"language-text\">TE</code>, 서버가 사용하는 <code class=\"language-text\">Transfer-Encoding</code> 헤더가 있다.</p>\n<ul>\n<li>\n<p>TE</p>\n<ul>\n<li>브라우저에서 수신할 수 있는 전송 인코딩 방식을 나타낸다</li>\n<li>예) <code class=\"language-text\">TE: trailers, chunked</code></li>\n</ul>\n</li>\n<li>\n<p>Transfer-Encoding</p>\n<ul>\n<li>HTTP 메시지에 적용된 전송 인코딩 방식을 나타낸다</li>\n<li>예) <code class=\"language-text\">Transfer-Encoding: chunked</code></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>참고: <a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Transfer-Encoding\">Transfer-Encoding - MDN</a></p>\n</blockquote>\n<h2 id=\"여러-형식의-데이터를-보내는-멀티파트\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EB%9F%AC-%ED%98%95%EC%8B%9D%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EB%B3%B4%EB%82%B4%EB%8A%94-%EB%A9%80%ED%8B%B0%ED%8C%8C%ED%8A%B8\" aria-label=\"여러 형식의 데이터를 보내는 멀티파트 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>여러 형식의 데이터를 보내는 멀티파트</h2>\n<p>HTTP는 <a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/MIME_types\">MIME 프로토콜</a>을 지원하기에 다양한 형식의 파일을 전송할 수 있습니다.</p>\n<h3 id=\"multipartform-data\" style=\"position:relative;\"><a href=\"#multipartform-data\" aria-label=\"multipartform data permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>multipart/form-data</h3>\n<p>흔히 브라우저에 파일을 업로드하고 이를 서버로 전송하는 경우가 있습니다.<br>\n이를 위한 html은 다음과 같을 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">enctype</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>multipart/form-data<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>description<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>some text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>myFile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>위 폼을 통해 서버가 수신하는 HTTP Request는 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST /foo HTTP/1.1\nContent-Length: 68137\nContent-Type: multipart/form-data; boundary=---------------------------974767299852498929531610575\nContent-Disposition: form-data; name=\"description\"\n---------------------------974767299852498929531610575\n\nsome text\n\n---------------------------974767299852498929531610575\nContent-Disposition: form-data; name=\"myFile\"; filename=\"foo.txt\"\nContent-Type: text/plain\n\n(content of the uploaded file foo.txt)\n\n---------------------------974767299852498929531610575--</code></pre></div>\n<p><code class=\"language-text\">boundary</code> 속성으로 각각의 멀티파트 엔티티에 대해 구분합니다.</p>\n<p>그리고 마지막에는 boundary 뒤에 <code class=\"language-text\">--</code>를 붙여 마무리합니다.</p>\n<h3 id=\"multipartbyteranges\" style=\"position:relative;\"><a href=\"#multipartbyteranges\" aria-label=\"multipartbyteranges permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>multipart/byteranges</h3>\n<p>이미지와 데이터를 특정 지점부터 원하는 만큼만 받을 수 있습니다.</p>\n<p>이를 <em>resume</em> 기능이라고 하고, _Range Request_라고 부릅니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET /tip.jpg HTTP/1.1\nHost: www.usagidesing.jp\nRange: bytes=5001-10000</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HTTP/1.1 206 Partial Content\nDate: Fri, 13 Jul 2012 04:39:17 GMT\nContent-Range: bytes 5001-10000/10000\nContent-Length: 5000\nContent-Type: image/jpeg</code></pre></div>\n<p>여기서 중요한 점은 Http Request에서 <code class=\"language-text\">Range</code> 헤더를 통해 원하는 만큼의 부분을 요청한다는 것과</p>\n<p>Http Response에서 <code class=\"language-text\">Content-Range</code>를 통해 응답에 대한 정보를 담는다는 것입니다.<br>\n그리고 응답 코드로 <code class=\"language-text\">206 Partial Content</code>를 포함합니다.</p>\n<blockquote>\n<p>참고: <a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Content-Range\">Content-Range - MDN</a></p>\n</blockquote>\n<h2 id=\"콘텐츠-협상-content-negotiation\" style=\"position:relative;\"><a href=\"#%EC%BD%98%ED%85%90%EC%B8%A0-%ED%98%91%EC%83%81-content-negotiation\" aria-label=\"콘텐츠 협상 content negotiation permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>콘텐츠 협상 (Content Negotiation)</h2>\n<p>동일한 URI에서 리소스의 서로 다른 버전을 제공하기 위해 사용되는 매커니즘입니다.</p>\n<p>브라우저가 사용자에게 가장 fit한 리소스를 제공하기 위해 Http Reqeust를 보낼 때 정보를 담고 서버는 그에 따라 다른 값을 응답할 수 있습니다.<br>\n예를 들어 문서의 언어, 이미지 포맷 혹은 콘텐츠 인코딩 방식 등에 적용될 수 있습니다.</p>\n<p>콘텐츠 협상에는 두 가지 방식이 있습니다.</p>\n<h3 id=\"서버-주도적-협상\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EC%A3%BC%EB%8F%84%EC%A0%81-%ED%98%91%EC%83%81\" aria-label=\"서버 주도적 협상 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 주도적 협상</h3>\n<p>협상의 주도권이 서버에 있습니다.</p>\n<p>브라우저는 협상에 필요한 정보들을 헤더에 담아 전송하면 서버는 이를 통해 가장 적합한 방식으로 리소스를 응답합니다.</p>\n<p>브라우저는 <code class=\"language-text\">Accept</code>, <code class=\"language-text\">Accept-Language</code>, <code class=\"language-text\">Accept-Charset</code>, <code class=\"language-text\">Accept-Encoding</code> 헤더를 통해 필요한 정보를 보냅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7e75521b3e563213b365a5ab2f113f4/dcccd/server-driven-negotiation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.12658227848101%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABT0lEQVR42pWSi4rCQAxF5/9/TlCkRbFvbX20Wh+lVm3kBLLUZYXtQMg0TW7uTcbJP07f9+rP57NMJhOZz+dq0+lUVquVdF33k+tkxHk+nxJFkeR5LkEQyGazUcD9fq/N8KMBAUjTVDzPkzAMZbFYyHq91thsNhNHEmayvknGyKNwt9tJlmXKCDAYb7dbieNYnHUkUNe1HI9HtdPppDIul4smwqYsS1kul3r3fV9l8410gGHtiqLQQNM0kiSJFtO9qip5vV7KDGDArter/j8cDpoLUyMDDg3c4/FQFhwSAYIdcSQaqM0Qdkg1YDxgGGo/ANu2lfv9rp44d/wQkC3TFHaMBqYmmQUpID+MzV9mi6MBjChmdkjlzuwhgXcUMCM+oAwDDGkUE2M2MCGGzNvtpjXGfPhC3PCNMXjmZxum62+2356XxT8AGbZtDMbExp43usKXrv7lssoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"서버 주도적 콘텐츠 협상\"\n        title=\"\"\n        src=\"/static/b7e75521b3e563213b365a5ab2f113f4/f058b/server-driven-negotiation.png\"\n        srcset=\"/static/b7e75521b3e563213b365a5ab2f113f4/c26ae/server-driven-negotiation.png 158w,\n/static/b7e75521b3e563213b365a5ab2f113f4/6bdcf/server-driven-negotiation.png 315w,\n/static/b7e75521b3e563213b365a5ab2f113f4/f058b/server-driven-negotiation.png 630w,\n/static/b7e75521b3e563213b365a5ab2f113f4/40601/server-driven-negotiation.png 945w,\n/static/b7e75521b3e563213b365a5ab2f113f4/dcccd/server-driven-negotiation.png 1127w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"클라이언트-주도적-협상\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%A3%BC%EB%8F%84%EC%A0%81-%ED%98%91%EC%83%81\" aria-label=\"클라이언트 주도적 협상 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라이언트 주도적 협상</h3>\n<p>협상의 주도권이 클라이언트에게 있습니다.</p>\n<p>클라이언트가 서버에 요청을 보내면 서버는 응답 가능한 모든 버전의 리소스들에 대한 링크를 포함하여 응답합니다.<br>\n그러면 브라우저는 이를 통해 원하는 리소스에 해당하는 URL로 재요청을 보내는 방식입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c3802e4e666bc03c82bd60c81c440f79/2ad15/client-driven-nogotiation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.72151898734178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpUlEQVR42p2TbW/aQBCE/f//FyIfEoX0m1vbNMJgYsCvGPNimNyz9CqridQ2K63OutudnZk7B/pCXM5nxXGsJE6ULlLFUazXn686Ho8KvgR4uShNUy2XS0VRpKZpVNW1+sNBwfV61e12s+T7X+J0Oin6ESkMv2v2/Ky2bbXZbGwNOCzLUkVRGmXSD7gPuanve9WOAQ3s0fP49KTpdKqH6YOd7XY77fd7BdCfz+dKkrnOzpu6qpRlmbJVpvV6bWBIQlqSJFYDYBiGmkwmenn5ZkB5DkMHSPN2u7UpSAaAaX6P5mEYLL0lkGDYbDbTcrW6e+hUdl2nAIlIoYEY+zlO9sYeMnCxWJh3TdNq5YCxzgAP7nZYkdMf7gyLojBfaSTZa13j2bEDEBJIZSVgCY4BIhMZpGfcdfdiZJM0j+u8BYDwDRn2DXBcRNPa+YqEPM9NBuyo49zX+mSoB8MWezZ/PtrK3XRV1b+LB7d3HT5/owwaRwAjQEmakYB/nllZVubh3j0JXzfOD4Cf/QX525vJ3bi3BTiX4V/B3+IDII3Nr4sgUfA/8Q41Ez1/WXVRawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"클라이언트 주도적 콘텐츠 협상\"\n        title=\"\"\n        src=\"/static/c3802e4e666bc03c82bd60c81c440f79/f058b/client-driven-nogotiation.png\"\n        srcset=\"/static/c3802e4e666bc03c82bd60c81c440f79/c26ae/client-driven-nogotiation.png 158w,\n/static/c3802e4e666bc03c82bd60c81c440f79/6bdcf/client-driven-nogotiation.png 315w,\n/static/c3802e4e666bc03c82bd60c81c440f79/f058b/client-driven-nogotiation.png 630w,\n/static/c3802e4e666bc03c82bd60c81c440f79/2ad15/client-driven-nogotiation.png 801w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>참고: <a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Content_negotiation#%EC%97%90%EC%9D%B4%EC%A0%84%ED%8A%B8_%EC%A3%BC%EB%8F%84_%ED%98%91%EC%83%81\">콘텐츠협상 - MDN</a></p>\n</blockquote>\n<h3 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h3>\n<blockquote>\n<ul>\n<li><a href=\"https://m.yes24.com/Goods/Detail/15894097\">그림으로 배우는 Http &#x26; Network Basic</a></li>\n</ul>\n</blockquote>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\">들어가며</a></p>\n</li>\n<li>\n<p><a href=\"#http-%EB%A9%94%EC%8B%9C%EC%A7%80\">HTTP 메시지</a></p>\n</li>\n<li>\n<p><a href=\"#http-%EC%95%95%EC%B6%95\">HTTP 압축</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%BD%98%ED%85%90%EC%B8%A0-%EC%BD%94%EB%94%A9\">콘텐츠 코딩</a></p>\n<ul>\n<li><a href=\"#file-%ED%98%95%EC%8B%9D-%EC%95%95%EC%B6%95-multipart-%ED%8C%8C%EC%9D%BC-%EC%95%95%EC%B6%95\">File 형식 압축 (Multipart 파일 압축)</a></li>\n<li><a href=\"#%EC%A2%85%EB%8B%A8%EA%B0%84-%EC%95%95%EC%B6%95-json-%ED%98%95%EC%8B%9D%EC%9D%98-string-%EC%95%95%EC%B6%95\">종단간 압축 (Json 형식의 String 압축)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B2%AD%ED%81%AC-%EC%A0%84%EC%86%A1-%EC%BD%94%EB%94%A9\">청크 전송 코딩</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%97%AC%EB%9F%AC-%ED%98%95%EC%8B%9D%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EB%B3%B4%EB%82%B4%EB%8A%94-%EB%A9%80%ED%8B%B0%ED%8C%8C%ED%8A%B8\">여러 형식의 데이터를 보내는 멀티파트</a></p>\n<ul>\n<li><a href=\"#multipartform-data\">multipart/form-data</a></li>\n<li><a href=\"#multipartbyteranges\">multipart/byteranges</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BD%98%ED%85%90%EC%B8%A0-%ED%98%91%EC%83%81-content-negotiation\">콘텐츠 협상 (Content Negotiation)</a></p>\n<ul>\n<li><a href=\"#%EC%84%9C%EB%B2%84-%EC%A3%BC%EB%8F%84%EC%A0%81-%ED%98%91%EC%83%81\">서버 주도적 협상</a></li>\n<li><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%A3%BC%EB%8F%84%EC%A0%81-%ED%98%91%EC%83%81\">클라이언트 주도적 협상</a></li>\n<li><a href=\"#reference\">Reference</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"3장. HTTP 정보는 HTTP 메시지에 있다","date":"2024년 1월 23일","description":"HTTP 메시지 구조, 압축, 멀티파트, 콘텐츠 협상","tags":["Network"],"series":"그림으로 배우는 Http & Network Basic"}},"previous":{"fields":{"slug":"/git-github/apply-issue-and-pr-template/"},"frontmatter":{"title":"[github] Github Repository에 Issue, PR Template 적용하기"}},"next":{"fields":{"slug":"/네트워크/네트워크-책-스터디/04-http-status-code/"},"frontmatter":{"title":"4장. 결과를 전달하는 HTTP 상태 코드"}}},"pageContext":{"id":"a041ab4b-4190-57d6-ba91-ee5baf691641","previousPostId":"9608f7d1-9ef5-5ac0-9848-c88ef96c1bb3","nextPostId":"a3aba94a-cef8-556c-b9bf-a4f8a1fb3ab1"}},"staticQueryHashes":["1475414628","2841359383","3539066558"],"slicesMap":{}}