{"componentChunkName":"component---src-templates-post-jsx","path":"/oauth-test/","result":{"data":{"site":{"siteMetadata":{"title":"log4dh"}},"markdownRemark":{"id":"b1dc584d-3c69-5ae8-82a8-09b015fa3d02","excerpt":"이번 글에서는 Spring Boot에서 Rest Assured를 이용해 인수 테스트를 하는 과정에서 OAuth를 처리하는 방법을 고민한 흔적과 해결 방법을 기록하려고 합니다. 비단 OAuth 뿐만 아니라 다른 외부 REST API를 호출하는 부분을 해결하는 데에도 도움이 될 것으로 기대합니다. 개발 환경은 Spring Boot 3.2.2, Rest Ass…","html":"<p>이번 글에서는 Spring Boot에서 Rest Assured를 이용해 인수 테스트를 하는 과정에서 OAuth를 처리하는 방법을 고민한 흔적과 해결 방법을 기록하려고 합니다.</p>\n<p>비단 OAuth 뿐만 아니라 다른 외부 REST API를 호출하는 부분을 해결하는 데에도 도움이 될 것으로 기대합니다.</p>\n<blockquote>\n<p>개발 환경은 Spring Boot 3.2.2, Rest Assured 5.3.2를 사용합니다.</p>\n</blockquote>\n<h2>개요</h2>\n<p>현재 ListyWave가 제공하는 모든 기능들에 인수 테스트를 작성하려고 합니다.</p>\n<p>하지만 서비스는 자체적인 로그인 기능을 제공하지 않고 <u>사용자 경험 개선</u>과 <u>서비스 신뢰도 향상</u>을 위해 카카오 OAuth를 채택하여 사용 중입니다.</p>\n<p>이는 다른 의미로, 회원과 관련된 기능들을 인수 테스트하기 위해서는 카카오 OAuth 로그인이 선행되어야 한다는 뜻입니다. 하지만 Rest Assured 만으로는 카카오 로그인을 수행하지 못합니다.</p>\n<h2>문제 파악하기</h2>\n<p>왜 수행하지 못할까요?</p>\n<p>현재 ListyWave에서 수행 중인 로그인 요청부터 처리까지의 Flow는 대략 다음과 같습니다.</p>\n<ol>\n<li>사용자가 카카오로 로그인하기 버튼 클릭 -> 프론트엔드 서버에서 백엔드 서버로 로그인 URL 요청 -> 사용자는 카카오 로그인 페이지에서 로그인</li>\n<li>카카오 로그인에 성공하면 Redirect URI(프론트엔드 서버)로 AuthCode 전송 -> 프론트엔드는 AuthCode를 백엔드로 전송 -> AuthCode로 Kakao Authorization Server에 액세스 토큰 발급 요청 -> 발급받은 액세스 토큰으로 Kakao Resources Server에 회원 정보 요청 -> 받은 회원 정보로 로그인 비즈니스 로직 처리</li>\n</ol>\n<p>위 flow는 이해가 잘 가지 않을 수 있기에 핵심만 말씀드리면 <u>로그인이 선행되려면 AuthCode가 필요하고</u><br>\n<u>AuthCode는 카카오 로그인 페이지에서 로그인 해야 하기 때문입니다!</u></p>\n<p>추가로, 만~약에 RestAssured 만으로도 카카오 로그인에 성공해서 AuthCode를 받아왔다고 해도 OAuth는 결국 <u>외부 API를 호출하는 것과 같습니다.</u><br>\n이는 다시 말해, 테스트 코드로 인해 사이드 이펙트가 발생할 가능성이 있다는 의미와 같습니다.<br></p>\n<p>따라서 <u>테스트 코드는 AuthCode로부터 자유로워야 하고, 실제 REST API를 호출하지 않아야 합니다.</u></p>\n<h2>문제 해결하기</h2>\n<p>우선 OAuth 로그인에 사용되는 객체들을 천천히 살펴보았습니다.</p>\n<ul>\n<li>요청과 응답을 처리하는 AuthController</li>\n<li>로그인 비즈니스 로직을 처리하는 AuthService</li>\n<li>Kakao Authorization Server와 Resources Server에 REST API 요청을 보내기 위해 필요한 파라미터 값을 조립하는 KakaoOauthClient</li>\n<li>실제 REST API를 호출하는 KakaoOauthApiClient</li>\n</ul>\n<p>일단 <u>문제 해결의 핵심은 실제 REST API를 호출하는 <code class=\"language-text\">KakaoOauthApiClient</code></u>가 될 것으로 생각됩니다.</p>\n<p>AuthCode를 파라미터로 받아 Kakao Authorization Server에 액세스 토큰 발급 요청을 보내며,<br>\n발급받은 액세스 토큰을 통해 Kakao Resource Server에 회원 정보를 요청하기 때문입니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/5b10c72d08b9cf34115e3a965bf60253/f97d7/KakaoOauthApiClient.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 52.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1ElEQVR42n2T23LkIAxE5z8yY4NtxB2b8VxS+///1dsitansSx5OocIgqVv4kn1AHUS048TRn4O2n/Ch4DYtmGZlHets1l+55CJQ2h6xboKrsZgME1gm0EP2B8vKAha3mx3rpMzLf1wMEyzrhvN8op8vpL5DeoJ/VMi9whF5NMYFclaYIJjdBiMOhutXAYMr0fgiPmNzEaV2csCFBpsaltzgcyQeEhUWyQWhVYTKQinxbOTdMHASYRenkndKPgYpswPfMMUH5nBHKgk5bYjBIcaCxEJVC/NsCJV7lXcact5R230kvqTkuCHY1UPnh09m/WJeNkysOq8KY7vg+jHjejXfMofUn5Kn2cLQ8Pfnn0E9O/yZET4PyGsf+DfjJ32kr5YW2BxoC1f6eeMg/iUdQ9Gnoawu0eyCWRpusmOjJyIbnFMcoQIrSEKpLsNLhoQ8vBNPf2mJUQ8rTe69I6p/6Y61vWGJK/SmesTiEdhRavu4WOOBEndEYSMc6EjGhiL9HUPpXRNWvF4dj/McH4QPvFJe6gXlLMh3DuFoKMeBvT9w8LuXNFToIDSpdjok67PRJIGkVLFQyuyZgE8lRsdpbkRlsZs1Im3sZmVMi0LUzuo3+qf8BaXjQP91pI9QAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='KakaoOauthApiClient 코드' title='' src='/static/5b10c72d08b9cf34115e3a965bf60253/ca1dc/KakaoOauthApiClient.png' srcset='/static/5b10c72d08b9cf34115e3a965bf60253/e7570/KakaoOauthApiClient.png 170w,\n/static/5b10c72d08b9cf34115e3a965bf60253/f46e7/KakaoOauthApiClient.png 340w,\n/static/5b10c72d08b9cf34115e3a965bf60253/ca1dc/KakaoOauthApiClient.png 680w,\n/static/5b10c72d08b9cf34115e3a965bf60253/02d09/KakaoOauthApiClient.png 1020w,\n/static/5b10c72d08b9cf34115e3a965bf60253/9d567/KakaoOauthApiClient.png 1360w,\n/static/5b10c72d08b9cf34115e3a965bf60253/f97d7/KakaoOauthApiClient.png 2000w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>KakaoOauthApiClient 코드</figcaption>\n  </figure></p>\n<p>어쩌면 이 녀석만 해결하면 모든 문제가 술술 풀릴 것 같은 생각이 듭니다.</p>\n<p>따라서 저는 Mocking을 통해 해당 객체를 <a href=\"https://tecoble.techcourse.co.kr/post/2020-09-19-what-is-test-double/\">테스트 더블</a>을 시도해보았습니다.<br>\nStubing으로도 해결할 수 있겠지만 Mocking이 더 유연하고 간편하다고 판단했기 때문입니다.<br>\n또한 인수 테스트 특성 상, Test Context에 모든 Bean을 Load하기에 <code class=\"language-text\">@MockBean</code>을 통해 쉽게 Mocking 할 수 있다고 판단했기 때문입니다.</p>\n<h2>해결 과정</h2>\n<p>우선 모든 인수 테스트가 상속받는 <code class=\"language-text\">AcceptanceTest</code>에 <code class=\"language-text\">KakaoOauthApiClient</code> 객체를 <code class=\"language-text\">@MockBean</code>으로 선언하여 등록합니다.\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/1a76075338e483fa7f663afa3b31bb73/f97d7/AcceptanceTest.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 46.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVR42mWPy27TQBSG8wbQi0AicZz4OvZ4fGni8TVJK1SBShcIULtHLEjbV2CBEBtW0Jbn/Zi6lRBl8c35dWbmP+cf1W1CVUvqJqHt7nXV5Og6p+ka+vURdbsyvZ623xi9pqxa1npJpzVpVKBEhhQpkVCM+lpRLyW9Mey0MVzEtHXDpluhq47V5iVdf4hKCw6Pjil1Q14sWZqqVEGXtNRJg440eXzAaCFj0lCQBCGL6F5Hnk8uAqRMKRYVxUE5kOULXC9kYs0YT2ys6ZyxZTOezgYmhtHYcpi7Lk7wgO/hC5+Z59w/nvxlYpjaDvbMHRi07f7DyJo65EqwqhS9VjQmclkISpXhO2LYZtjkYYM77gZZ9nwwfMxoYo5MCDaFMcwUbVnT6NYMOKIqO1ITU4UZZaxZRia6OGARlwReNAz6z3A6c3DmJqYTmOrjh5I4SQkjiYgSQiEJzeckSJG+IvbkUF3zfmoM7ceGjhsRN6+IT7bI15+w1p95srxgR1+wq7eGC/bqS3aqLTv1lqe1uTPsmt5+e8Vec8W+4VlzOTB6rj8iTr5Qvv+OfvcN+fYH8dlvkvNb5NkN6vyG6MM1whCc/CQ/vSE9vSYzNXnzC3V6i3f8lRfRirHo+QPw/BpWggEmCAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='AcceptanceTest' title='' src='/static/1a76075338e483fa7f663afa3b31bb73/ca1dc/AcceptanceTest.png' srcset='/static/1a76075338e483fa7f663afa3b31bb73/e7570/AcceptanceTest.png 170w,\n/static/1a76075338e483fa7f663afa3b31bb73/f46e7/AcceptanceTest.png 340w,\n/static/1a76075338e483fa7f663afa3b31bb73/ca1dc/AcceptanceTest.png 680w,\n/static/1a76075338e483fa7f663afa3b31bb73/02d09/AcceptanceTest.png 1020w,\n/static/1a76075338e483fa7f663afa3b31bb73/9d567/AcceptanceTest.png 1360w,\n/static/1a76075338e483fa7f663afa3b31bb73/f97d7/AcceptanceTest.png 2000w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>그리고 테스트 코드에서 Mocking을 해줍니다.\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/61d81c52f712a095341da30984eb7e84/f97d7/Mocking-in-TestCode.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 40.588235294117645%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVR42pWSW07DMBREswskSPy24yRuXk5bSBESK+CD/a9lGFct4rN8jK59b3w8Y6VKfY9DGjGtR2pD6ge03QF+mCFchDQB6h+qnHOQYcCTTahdgvQd1ItAfK7RsepGoRYKzVUaTXOrv1J/pFG11uE8ZcwpYwoJB7rahcFXI/HNj96VQWMDtOHF2rIWJ/e1h9Eeuoh9yX7VSoM9Tbgcz/jIr/jcLrhsO8ZxQR5XbG0PS9c2tNDOw/sexhPqueasdT28jXChg2a/Uspi4SB3A3JMmDlYQ4/JBcyuxcC9osMSVdB5iSYYTdwi1zfdn6ASBApaz6cd6+kNcZkxns4YjhndvMA6ArWDYJJHVEkCy4GBsWOX4HyEj4xRIrDfSHO9+WFggXU9fxPGvMIIusuxJxn3UVgB/gDLyuRKJxAWvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Mocking in TestCode' title='' src='/static/61d81c52f712a095341da30984eb7e84/ca1dc/Mocking-in-TestCode.png' srcset='/static/61d81c52f712a095341da30984eb7e84/e7570/Mocking-in-TestCode.png 170w,\n/static/61d81c52f712a095341da30984eb7e84/f46e7/Mocking-in-TestCode.png 340w,\n/static/61d81c52f712a095341da30984eb7e84/ca1dc/Mocking-in-TestCode.png 680w,\n/static/61d81c52f712a095341da30984eb7e84/02d09/Mocking-in-TestCode.png 1020w,\n/static/61d81c52f712a095341da30984eb7e84/9d567/Mocking-in-TestCode.png 1360w,\n/static/61d81c52f712a095341da30984eb7e84/f97d7/Mocking-in-TestCode.png 2000w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>디버깅 모드로 하나씩 따라가보면 아래 사진처럼 만든 값들이 그대로 나오는 것을 확인할 수 있습니다.\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/0ee56258650dff0a56b02f037d6131d7/f97d7/debug.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 38.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVR42kWQW2+bQBBG+TGNL2Bjc2fZ5WJjGzB2c6lkRZWj5rmvfWibJs1PPx1jqXk4mgFmz86HpbpnmtN3Nud3qtNP6scX2qdXmq8vrE+/yG5/0J5fh3f142+6pzf6b3/Zyvfm/Gfoj8/vrGS2kxlrqTasqh375pZ+f0/f3bNrHlDtA8nhjmBzIMhafNXgCaHpiPI9gdRLHxf90HuqJdAdlj1fYHyXRvm0ecK+SDgKaRLiasEEONGSeepjy9zNaMKn0UjqmMnUGZjaH1jOIiCPAjojssrQlZpSZ6jU4MdKtjBEQqA1Zl1TrXfUu4562zKXs/ZsiTP3/mM5rk8e+oOwF+GhugpDkXmZxheRn2USWaHKEl2sRLqlqGqRLZjYc8bT2VAvz7Khj7kIdcJdXYhU86XO6UuDKTLyrSYqRSi9Z5RssbziesOlShfovCIzJQsvxJpdIocBrYk5rg2tiGqR7moj/1PT6JQ0SvH8lCjOiFK5ILliZNtts6frP7PrDjITXyOrwGeVRmxkgzhOcNKYmWw8kgg3tsvEWUgcd2DqfHCJOpo43IztoV4i/wPYzBC4d+cm7QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='debug' title='' src='/static/0ee56258650dff0a56b02f037d6131d7/ca1dc/debug.png' srcset='/static/0ee56258650dff0a56b02f037d6131d7/e7570/debug.png 170w,\n/static/0ee56258650dff0a56b02f037d6131d7/f46e7/debug.png 340w,\n/static/0ee56258650dff0a56b02f037d6131d7/ca1dc/debug.png 680w,\n/static/0ee56258650dff0a56b02f037d6131d7/02d09/debug.png 1020w,\n/static/0ee56258650dff0a56b02f037d6131d7/9d567/debug.png 1360w,\n/static/0ee56258650dff0a56b02f037d6131d7/f97d7/debug.png 2000w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2>결과</h2>\n<p>테스트가 통과하는 것을 확인할 수 있습니다.\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/018c1/test-success.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 73.52941176470587%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHElEQVR42n2U6ZKbMBCEeY/4ACGBuG8wi494s7WVSuVH3v9lOjMjvLHjbH58JYmSmp4egacjizzPYYseUVoiNBYqjBGoCKG20FECbRIomisdyzNGmVj2ap3Q2s35mecHWjY0zQF9O6OpBnTDAVXdwtoMUZzCRKkc8LURcZkbmpOZSKfQoXXPae3t/VDcFHmNvjugbUZ07YimHcRdTJiViIVDFmVnMWFlzs8CelkYxyyoSdAgTys0ZY+qbFFWHWxCMSSFCPlKww/MSgiu6gEyxcb8UDuHnEFV90jSAmlWIMlKGokko40Km62P7Y4JHtjt1R2BiHr7wDnM8spR1MgJFucxzSrK8ZYllU4jrzmzR0GHNIWV+QDnlq7uuGTntHKZGdfdj/l6G/jsp4JtN6IoG3LWiFCal7JmcdeYVBoViUtyTE75/JMgE9MVYcRB+MeJ62IkmW02e3xZ4VyZT0tWdKhueizzBcfmjGlaMM4LuZ4wtXwvO4kgy12uil70nwyVNKahkllwaU9Yjhe8HM84DAtOw1dcxleMzeyqoLL5uv1b0HcOGd6c55ShrZCXLkdxRLCjv0ve7tTTVfL4slpLYdN36DoZP6E0f9fEuscRCxzVPV47THh7/47rt3ecLq8YphfUbU8MH7T9KHAkt/FGRbnf452vb/jx8xeO5yum+Sh0w0xCI81PGA/UmH6SHwY3hWMx8gdyTs3dt878BqmDuNMqk4tAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='test success' title='' src='/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/ca1dc/test-success.png' srcset='/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/e7570/test-success.png 170w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/f46e7/test-success.png 340w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/ca1dc/test-success.png 680w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/02d09/test-success.png 1020w,\n/static/8e0fc8a4ee0b0ebd722292ebd1fc5d04/018c1/test-success.png 1282w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>이제 이를 <code class=\"language-text\">AcceptanceTest</code> 객체에 메서드로 만들어 다른 도메인에서 재사용할 수도 있습니다.\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/e95e9c426b6aa7aca6c9bc1dd05373c9/8aec5/login-method.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 122.3529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAADKElEQVR42p1VWZLbOBTTPTrWxl0kRclaLLs7SWUyv7n/cRCQTqczVcmMez5QpCUZwsPDo6ptD7hciG3GbdtxXTbs84qZSGGEVR5KODStQN30/4kqBYeJCMHjc4r4ti74tpyx+giph0Jo5PA4YS8URu8wBgslNT7UHU5Nhw+n9o76jkfICqGSClsKWOYF87TBGo+gR3ii61Qhf5TsTqg09iWw5ADrItwQYUg6aO5VYLn+4XILodaazYhUOCGmBd6PCDYhmonNsGg7iaYR71GosJ89xhgwhARj7+qCGdH/v5LvhGmMJJxKmdm/XGZuxql+J6Em4bGGn4QxznD00qihEPuiVD+stHj4so84zwmeZDGd2aCpEAWTvUwliw/n0JDw4zGyKTPStGJgU0bLvTszl/cJeVeXhZCIg2H+LGMzQjMysrdwMpSRyx7mgJe1hDwHvy/ra/h/faaSJAz0T7gJ2hporUgcSrdLx6l4YDatcsVTp/kiaejz/V7ObXmGUBzVonDg6AnjmLme5XXoeoVe6H+CeczNyVHK2ex/80z+X9WRZFl37MenEujBRD6sSwl1Lu8Vza/7nmv/23tVL+mXZZfHHTFsiOMGQy/zdaHsj9UVyB9rJ8wfUUnK9Myi1QaCCrOXOYee3oQhMOiuRMfxCBuyp/Q3l99STUbDRr3t2eWp6/Alenzl4fr3fsFf64YvxFfuD872kTa8nDcc3mOzDhu9Xti8pCQWitjcgJmNnIzERUpUvmlZMmeZpV6WZyzTgXW9Yb99pLdH6XCXDSdaoqG/NRWe6H1e2/Jb4Kln/CiuCm3LSDCHucQ4IVGVswMPi8SgL1B8meDBm68ZG5hTroTW9985Wpr/7+nfam1W2CDyuF/nK78nL5zrF+zrFcfxjPmcm7SUUcxKJZv0CsEsviJHqCEmHtZU2EFTvuGkzMuOiSQTPXT8QLV57IRguTzGTm/TcKrbt8jk04h4YkN83ZCQdXfMUY7I9fkz1u2KyI9UuuxYbzeM+4owca5ZZs5e/YfD9okI7EeV+h46E9LYMz3zHClN+ZYvcNrxE8CSqKBv/h0tkZoW3wH6VLQvRMUR1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='login method' title='' src='/static/e95e9c426b6aa7aca6c9bc1dd05373c9/ca1dc/login-method.png' srcset='/static/e95e9c426b6aa7aca6c9bc1dd05373c9/e7570/login-method.png 170w,\n/static/e95e9c426b6aa7aca6c9bc1dd05373c9/f46e7/login-method.png 340w,\n/static/e95e9c426b6aa7aca6c9bc1dd05373c9/ca1dc/login-method.png 680w,\n/static/e95e9c426b6aa7aca6c9bc1dd05373c9/8aec5/login-method.png 942w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>또한, 요구사항 중에 최초로 로그인 한 회원의 여부를 <code class=\"language-text\">LoginResult#isFirst</code> 필드에 boolean 타입으로 담아 반환하고 있는데요.<br>\n해당 로직을 테스트해도 제대로 응답하고 있음을 확인할 수 있습니다.\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 559px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/7d33bf2282ed284e747b81406ca34777/11d18/other-test.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 78.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACl0lEQVR42oVU23LaQAz1dyQxvmFjG9/vBgOxwSEUSNJk0maSdvr/X3EqbYCGpjN9OCOttNbqnNVaMiwbijaEMTSRZx5GtoOBakLVLWhDG6pxxIhiIxFXdPqGfEU/xIYONMprugkpzAuYjgfTGqPOEnhxDSeZYxRNYUUzONkSbt7BSRewkwXGRYug6eFVHcL5Lby6h1P08JMpoqSEpGomZEUHW0U14PkR0rzCmKw7DuhkEwPKn0B7FFUXexXNEOuPeYnbZEfV3ws6ri8KMbwghm5Y5wX/g08FNdLIGrmQBxourxRhj5vZlwf6AdopJx/yKt3Fn4K0YJRVg2beYjJdoJldY9osUFQT4Vd1gzDOTr5PDOrJDGVRoSwnCML0c4esYZIWYjPTD6MUQ9MW6yjJhQz8Ie+J4pz2eIhcF67j4oo6Pi9IHQ4Ug0bIFnQuLgcCV7JC9N99loFxcSGLuJBGVslXzzXkYtxhRjfMNPKiRppVyMgyzSyvT+CuC6LIHcd+itBLEJM/9sJDQTqFb1MjJGkpIIpRcabGm3mU2DLNJCsFjCENNzHSaOSOjUk8R9y2Ow4FOMHF/8a/4qytaTlnkGyeOy9Au7w5oVutsexv0XY9WvJXNxv0662wHD/mp3zbJM9HSDFRKsoa1/TxerPD7Zc74bfLNRbtCvPrJa1v3g+gw44xBsvAt85NHSFxsJg0ItmtNtTFVujHGuUkPF+IHyY0KvTOg4TYhPQsY+EHUUb5/AMySItlj28vP/Hy+gvP39/I/4H93RN2d1+x3T1gu3/Abk8+YX//SPFH6nhNdFuBZt5hs73H0/MrMdxDcv0QaVnR9LdCg3lLFOkQpsYvhqnNFp2QgWkzuHOH3jr/QBgBjVGU5sL+BjzU77ShHBg/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='other test' title='' src='/static/7d33bf2282ed284e747b81406ca34777/11d18/other-test.png' srcset='/static/7d33bf2282ed284e747b81406ca34777/e7570/other-test.png 170w,\n/static/7d33bf2282ed284e747b81406ca34777/f46e7/other-test.png 340w,\n/static/7d33bf2282ed284e747b81406ca34777/11d18/other-test.png 559w' sizes='(max-width: 559px) 100vw, 559px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2>마치며</h2>\n<p>이렇게 Spring Boot에서 Rest Assured로 인수 테스트하는 과정에서 OAuth와 같이 REST API를 호출하는 로직을 처리하는 방법에 대해 알아보았습니다.</p>\n<p>피드백 및 더 좋은 방법 제시는 언제든지 환영입니다.<br>\n긴 글 읽어주셔서 감사합니다.</p>","frontmatter":{"title":"Spring Boot에서 Rest Assured로 인수 테스트할 때 OAuth 로그인 처리하기","date":"March 05, 2024","update":null,"tags":["Spring Boot","Acceptance Test","Rest Assured","OAuth"],"series":null},"fields":{"slug":"/oauth-test/","readingTime":{"minutes":6.53}}},"seriesList":{"edges":[{"node":{"id":"a30ff988-ea74-5562-b241-90fbff73a3da","fields":{"slug":"/kissoft-retrospection/"},"frontmatter":{"title":"키스소프트 현장실습 회고"}}},{"node":{"id":"aedd8f5b-dd45-5a14-9b57-3a48cdc0b641","fields":{"slug":"/what-is-varargs/"},"frontmatter":{"title":"[Java] Varargs는 어떻게 사용하고, 사용했을 때 장점이 무엇일까?"}}},{"node":{"id":"d41198ca-d162-523b-84f8-128b247a19b4","fields":{"slug":"/apply-https/"},"frontmatter":{"title":"[셀럽잇] HTTPS 적용기"}}},{"node":{"id":"3b94cbd6-f64a-5d82-96a2-0761602c250b","fields":{"slug":"/dbcp/"},"frontmatter":{"title":"DBCP와 HikariCP 이해하기"}}},{"node":{"id":"c418073e-50be-5fe1-807d-478c9c47f640","fields":{"slug":"/zero-downtime-deployment/"},"frontmatter":{"title":"무중단 배포 이해하기"}}},{"node":{"id":"c5760ea9-e137-5edf-8244-3a93e25b067b","fields":{"slug":"/unit-test/"},"frontmatter":{"title":"단위 테스트 이해하기"}}},{"node":{"id":"8ae82b3f-5b72-555c-89fe-9939dcf8377c","fields":{"slug":"/using-junit-and-assertJ/"},"frontmatter":{"title":"JUnit과 AssertJ 활용법"}}},{"node":{"id":"91a7a622-00f8-5cca-b6c1-e4f7db7ee31e","fields":{"slug":"/about-tdd/"},"frontmatter":{"title":"TDD 이해하기"}}},{"node":{"id":"10e0dab4-d2e7-52df-8daa-31bfef1b08b6","fields":{"slug":"/static-with-memory-structure/"},"frontmatter":{"title":"static을 더 잘 사용하기"}}},{"node":{"id":"c773b0a0-9610-5605-bdb9-9089df57f52b","fields":{"slug":"/about-garbage-collection/"},"frontmatter":{"title":"JVM의 Garbage Collection과 동작 원리"}}},{"node":{"id":"0bf99b61-98a4-5c40-b8ce-05a918d212f7","fields":{"slug":"/garbage-collection-tuning/"},"frontmatter":{"title":"Garbage Collection 튜닝에 대해"}}},{"node":{"id":"61bd95c2-424a-54c8-96d9-bec4c8a4f58c","fields":{"slug":"/garbage-collection-algorithms/"},"frontmatter":{"title":"Garbage Collection 알고리즘"}}},{"node":{"id":"c87443bb-4e35-55e7-94d5-a5cb70d2dbc8","fields":{"slug":"/cautions-for-using-collections-in-Java/"},"frontmatter":{"title":"Java에서 컬렉션을 사용할 때 주의할 점"}}},{"node":{"id":"c2d7615d-6232-5fce-8794-f4c790106bb5","fields":{"slug":"/2023-retrospection/"},"frontmatter":{"title":"2023년 회고록"}}},{"node":{"id":"def28d41-907f-5432-8060-ed5429114882","fields":{"slug":"/compare-of-datetime-and-timestamp/"},"frontmatter":{"title":"[MySQL] DATETIME vs TIMESTAMP"}}},{"node":{"id":"9bf8ca89-e021-526b-a7b5-2cce0b1e366f","fields":{"slug":"/add-feat-and-issue-number-automatically/"},"frontmatter":{"title":"[git&github] IntelliJ에서 커밋 메시지 작성 시, 자동으로 커밋 타입과 이슈 번호 추가하기"}}},{"node":{"id":"01318426-7520-5a57-92ff-c917e1483247","fields":{"slug":"/difference-of-controller-and-restcontroller/"},"frontmatter":{"title":"[Spring] @Controller와 @RestController 비교하기"}}},{"node":{"id":"bc68fa05-ec4a-5e12-a9b8-4e58769887df","fields":{"slug":"/deploy-spring-boot-in-aws-ec2-manually/"},"frontmatter":{"title":"[Infra] AWS EC2에 Spring Boot 수작업으로 배포하기"}}},{"node":{"id":"122a1e9c-6fe5-5e7f-b797-a31f54d086b0","fields":{"slug":"/what-is-ami-architecture-of-ec2/"},"frontmatter":{"title":"CPU 아키텍처란?"}}},{"node":{"id":"c23a12ff-7b48-57ef-91ed-81f5386d680a","fields":{"slug":"/apply-issue-and-pr-template/"},"frontmatter":{"title":"[github] Github Repository에 Issue, PR Template 적용하기"}}},{"node":{"id":"b1dc584d-3c69-5ae8-82a8-09b015fa3d02","fields":{"slug":"/oauth-test/"},"frontmatter":{"title":"Spring Boot에서 Rest Assured로 인수 테스트할 때 OAuth 로그인 처리하기"}}},{"node":{"id":"9f43b8a7-b5ce-5766-b984-3ed0775d698f","fields":{"slug":"/ioc-container-and-di/"},"frontmatter":{"title":"[Spring] 스프링 컨테이너, 그리고 IoC/DI"}}},{"node":{"id":"e1b2a9fb-d6e3-5f65-9f50-d3a30c2518d1","fields":{"slug":"/what-is-jdbc/"},"frontmatter":{"title":"[Java] JDBC 파헤쳐보기"}}},{"node":{"id":"81b7fb10-f532-5f48-a797-379c3bb99bee","fields":{"slug":"/understanding-transaction-and-concurrency-problem/"},"frontmatter":{"title":"[MySQL] 트랜잭션과 트랜잭션 격리 수준"}}},{"node":{"id":"adfb7cc4-25f1-5b31-8060-e40d763b0afe","fields":{"slug":"/sovle-concurrency-problem/"},"frontmatter":{"title":"[ListyWave] 리스트 수정 시, 동시성 이슈 발생 확인 및 해결기"}}},{"node":{"id":"5ecb4a12-dc98-589f-94e0-695fb2d84fab","fields":{"slug":"/restore-using-binarylog/"},"frontmatter":{"title":"[MySQL] 바이너리 로그로 데이터 복구하기"}}},{"node":{"id":"c375e6a2-7e6c-5607-a579-04d3ab5f3188","fields":{"slug":"/understanding-generic/"},"frontmatter":{"title":"[Java] 제네릭 이해하기"}}},{"node":{"id":"83ad74c1-0d46-5f86-92fc-998642e4367d","fields":{"slug":"/covariant-invariant-and-pecs/"},"frontmatter":{"title":"[Java] 배열의 공변, 제네릭의 불공변. 그리고 PECS"}}},{"node":{"id":"7b9b6854-62e7-5f25-afbf-d5459fa5d021","fields":{"slug":"/commands-of-docker/"},"frontmatter":{"title":"[Docker] 도커의 기본적인 명령어들"}}},{"node":{"id":"d77e8b24-f01d-5673-8c55-d93e2d110c4f","fields":{"slug":"/enhance-speed-ci-workflow/"},"frontmatter":{"title":"[Infra] Github Actions를 이용한 CI 작업 속도를 캐싱으로 개선하기"}}},{"node":{"id":"b4550a40-b215-5e9a-a6a7-8c27bfb63e25","fields":{"slug":"/continuous-deploy-using-github-actions-and-docker/"},"frontmatter":{"title":"[Infra] Github Actions와 Docker를 이용해 배포 자동화 구축하기"}}},{"node":{"id":"e38bb1ed-1a51-5947-a1d2-52aaae42ac97","fields":{"slug":"/build-monitoring-system/"},"frontmatter":{"title":"[Infra] Prometheus와 Grafana, 그리고 Docker를 이용해 모니터링 대시보드 구축하기"}}},{"node":{"id":"961e4fc3-1d57-55a3-99fd-9e1233cef1dd","fields":{"slug":"/june-3rd/"},"frontmatter":{"title":"[회고] 06.10 ~ 06.16"}}},{"node":{"id":"fcade266-d38c-5c36-a3b7-87d56d9be862","fields":{"slug":"/june-4th-and-5th/"},"frontmatter":{"title":"[회고] 06.17 ~ 06.30"}}},{"node":{"id":"7b64a367-9192-557d-b45d-0e3bc68d44d3","fields":{"slug":"/thread-in-jvm/"},"frontmatter":{"title":"Java Thread 1 - Java의 Thread에 대해 알아보자"}}},{"node":{"id":"9e5a98c2-ba89-5b36-8e72-0028211a2c5b","fields":{"slug":"/status-and-control-thread-in-java/"},"frontmatter":{"title":"Java Thread 2 - Java Thread의 상태와 행동을 제어하는 방법"}}},{"node":{"id":"45a781cf-0e04-559c-a853-d1609dab1bd4","fields":{"slug":"/synchronize-threads/"},"frontmatter":{"title":"Java Thread 3 - Thread 동기화하기"}}},{"node":{"id":"236f7305-5647-51fe-800e-61577d25cd0c","fields":{"slug":"/july-1st/"},"frontmatter":{"title":"[회고] 07.01 ~ 07.07"}}},{"node":{"id":"abad5436-5cba-50a3-8fda-72440c646a78","fields":{"slug":"/solid/"},"frontmatter":{"title":"객체지향 설계 원칙: SOLID"}}},{"node":{"id":"f113bb3f-df7e-589a-b3c1-378c812ac8da","fields":{"slug":"/insert-dummy-data-to-db/"},"frontmatter":{"title":"[Spring] 스프링 애플리케이션 동작과 동시에 DB에 더미 데이터 삽입하기"}}},{"node":{"id":"7890e82c-9f9c-52ed-9724-2efc1ddf8aef","fields":{"slug":"/procedure-function-package/"},"frontmatter":{"title":"[DB] 프로시저, 함수, 패키지에 대해"}}},{"node":{"id":"ac276a35-d955-59ae-9f71-28ad65030c42","fields":{"slug":"/july-2nd-3rd-4th/"},"frontmatter":{"title":"[회고] 07.08 ~ 07.23"}}}]},"previous":{"fields":{"slug":"/3-6-weeks/"},"frontmatter":{"title":"[ListyWave] 3~6주차 회고"}},"next":{"fields":{"slug":"/10-execute-plain/"},"frontmatter":{"title":"MySQL의 실행 계획에 대해 알아보자"}}},"pageContext":{"id":"b1dc584d-3c69-5ae8-82a8-09b015fa3d02","series":null,"previousPostId":"be3ac5e9-c34a-57c3-8370-c144a0f623b2","nextPostId":"94032e77-bdeb-5604-be4a-7b868b61f76d"}},"staticQueryHashes":[],"slicesMap":{}}