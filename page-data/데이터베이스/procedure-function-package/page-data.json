{"componentChunkName":"component---src-templates-blog-post-js","path":"/데이터베이스/procedure-function-package/","result":{"data":{"site":{"siteMetadata":{"title":"김동호 블로그"}},"markdownRemark":{"id":"a0bdc810-736d-52f3-8248-aaa0aca992ef","excerpt":"DB의 프로시저(Procedure), 함수(Function), 패키지(Package)에 대해 간단히 알아보자.\n그리고 프로시저와 함수의 차이에 대해서도 알아보자. 프로시저 DB…","html":"<p>DB의 프로시저(Procedure), 함수(Function), 패키지(Package)에 대해 간단히 알아보자.<br>\n그리고 프로시저와 함수의 차이에 대해서도 알아보자.</p>\n<h2 id=\"프로시저\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%8B%9C%EC%A0%80\" aria-label=\"프로시저 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로시저</h2>\n<p>DB 프로시저는 <strong>데이터베이스에 저장된 일련의 쿼리와 절차적 코드를 포함하는 프로그램</strong>이다.<br>\n주로, 데이터베이스 내 복잡한 작업을 자동화하거나 반복적인 작업을 처리하는 데 사용된다.</p>\n<h3 id=\"주요-특징\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%ED%8A%B9%EC%A7%95\" aria-label=\"주요 특징 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 특징</h3>\n<ol>\n<li>모듈성: 프로시저는 독립적인 모듈로서 여러 곳에서 재사용될 수 있다.</li>\n<li>성능 향상: SQL 쿼리를 미리 컴파일해 저장하기에 실행 시 더 빠르게 처리된다.</li>\n<li>반환 값 없음: 프로시저는 반환 값이 없어도 된다. 혹, 반환값이 있을 경우 <code class=\"language-text\">OUT</code> 매개변수를 이용해 반환한다.</li>\n<li>에러 처리: 프로시저 내에서 에러를 처리할 수 있다.</li>\n</ol>\n<h3 id=\"사용-예시-코드\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C\" aria-label=\"사용 예시 코드 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용 예시 코드</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- 프로시저 호출</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">PROCEDURE</span> update_employee_salary {\n    <span class=\"token comment\">-- 파라미터 1</span>\n    <span class=\"token operator\">IN</span> employee_id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">-- 파라미터 2</span>\n    <span class=\"token operator\">IN</span> new_salary <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n}\n<span class=\"token comment\">-- 실행부</span>\n<span class=\"token keyword\">BEGIN</span>\n    <span class=\"token keyword\">UPDATE</span> employees\n    <span class=\"token keyword\">SET</span> salary <span class=\"token operator\">=</span> new_salary\n    <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> employee_id<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">END</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- 프로시저 호출</span>\n<span class=\"token keyword\">CALL</span> update_employee_salary<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">75000.00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"함수\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EC%88%98\" aria-label=\"함수 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>함수</h2>\n<p>DB 함수는 <strong>특정 작업을 수행하고 하나의 값을 반환하는 쿼리 블록</strong>이다.<br>\n주로 데이터를 계산하거나 변환하는 데 사용된다.</p>\n<h3 id=\"주요-특징-1\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%ED%8A%B9%EC%A7%95-1\" aria-label=\"주요 특징 1 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 특징</h3>\n<ol>\n<li>반환 값 필수: 함수는 항상 하나의 값을 반환해야 한다.</li>\n<li>호출 방식: 쿼리 내에서 호출될 수 있으며, SELECT 문 등에서 사용될 수 있다.</li>\n<li>트랜젝션 제어 불가: 트랜잭션을 제어하는 COMMIT, ROLLBACK 명령어가 포함될 수 없다.</li>\n</ol>\n<h3 id=\"사용-예시-코드-1\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-1\" aria-label=\"사용 예시 코드 1 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용 예시 코드</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- 함수 선언</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">FUNCTION</span> get_employee_salary {\n    <span class=\"token comment\">-- 파라미터</span>\n    employee_id <span class=\"token keyword\">INT</span>\n} <span class=\"token keyword\">RETURNS</span> <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">-- 실행부</span>\n<span class=\"token keyword\">BEGIN</span>\n    <span class=\"token keyword\">DECLARE</span> employee_salary <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">SELECT</span> salary <span class=\"token keyword\">INTO</span> employee_salary\n    <span class=\"token keyword\">FROM</span> employees\n    <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> employee_id\n    <span class=\"token keyword\">RETURN</span> employee_salary<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">END</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"패키지\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80\" aria-label=\"패키지 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지</h2>\n<p>DB 패키지는 <strong>프로시저, 함수, 변수, 커서 등 DB 객체를 그룹화한 논리적인 단위</strong>이다.<br>\nHeader와 Body로 나뉜다.</p>\n<h3 id=\"주요-특징-2\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%ED%8A%B9%EC%A7%95-2\" aria-label=\"주요 특징 2 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 특징</h3>\n<ol>\n<li>관련 프로시저와 함수를 논리적인 한 단위로 묶음으로써 큰 단위의 모듈을 구축할 수 있다.</li>\n<li>패키지가 처음 호출될 때 메모리에 로드되므로 이후 이후의 호출에는 더 빠르게 실행된다.</li>\n</ol>\n<h3 id=\"사용-예시-코드-2\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-2\" aria-label=\"사용 예시 코드 2 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용 예시 코드</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- Header부</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token operator\">OR</span> <span class=\"token keyword\">REPLACE</span> PACKAGE employee_pkg <span class=\"token operator\">IS</span>\n    <span class=\"token keyword\">PROCEDURE</span> update_salary<span class=\"token punctuation\">(</span>employee_id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span> new_salary <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    FUNTION get_salary<span class=\"token punctuation\">(</span>employee_id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">RETURN</span> <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">;</span>\n}\n\n<span class=\"token comment\">-- Body부</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token operator\">OR</span> <span class=\"token keyword\">REPLACE</span> PACKAGE BODY employee_pkg <span class=\"token operator\">IS</span>\n    <span class=\"token keyword\">PROCEDURE</span> update_salary<span class=\"token punctuation\">(</span>employee_id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span> new_salary <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">IS</span>\n    <span class=\"token keyword\">BEGIN</span>\n        <span class=\"token keyword\">UPDATE</span> employees\n        <span class=\"token keyword\">SET</span> salary <span class=\"token operator\">=</span> new_salary\n        <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> employee_id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">END</span> update_salary<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">FUNCTION</span> get_salary<span class=\"token punctuation\">(</span>employee_id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">RETURN</span> <span class=\"token keyword\">DECIMAL</span> <span class=\"token operator\">IS</span>\n        employee_salary <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">BEGIN</span>\n        <span class=\"token keyword\">SELECT</span> salary <span class=\"token keyword\">INTO</span> employee_salary\n        <span class=\"token keyword\">FROM</span> employees\n        <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> employee_id\n        <span class=\"token keyword\">RETURN</span> employee_salary<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">END</span> get_salary\n<span class=\"token keyword\">END</span> employee_pkg<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- 패키지 내 프로시저 호출</span>\n<span class=\"token keyword\">EXEC</span> employee_pkg<span class=\"token punctuation\">.</span>update_salary<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000.00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 패키지 내 함수 호출</span>\n<span class=\"token keyword\">SELECT</span> employee_pkg<span class=\"token punctuation\">.</span>get_salary<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> dual<span class=\"token punctuation\">;</span></code></pre></div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%EC%8B%9C%EC%A0%80\">프로시저</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%ED%8A%B9%EC%A7%95\">주요 특징</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C\">사용 예시 코드</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%95%A8%EC%88%98\">함수</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%ED%8A%B9%EC%A7%95-1\">주요 특징</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-1\">사용 예시 코드</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80\">패키지</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%ED%8A%B9%EC%A7%95-2\">주요 특징</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C-2\">사용 예시 코드</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"[DB] 프로시저, 함수, 패키지에 대해","date":"2024년 7월 22일","description":"데이터베이스 프로시저, 함수, 패키지 && 프로시저 vs 함수","tags":["DB"]}},"previous":{"fields":{"slug":"/Spring-Boot/insert-dummy-data-to-db/"},"frontmatter":{"title":"[Spring] 스프링 애플리케이션 동작과 동시에 DB에 더미 데이터 삽입하기"}},"next":{"fields":{"slug":"/회고/회고록/2024년-7월-회고록/"},"frontmatter":{"title":"2024년 7월 회고록"}}},"pageContext":{"id":"a0bdc810-736d-52f3-8248-aaa0aca992ef","previousPostId":"cda18e4a-f958-5406-98d4-97225d4554e2","nextPostId":"526bccf1-4d4b-53ba-8643-7d029c58fd73"}},"staticQueryHashes":["2841359383","3414707483","3539066558"],"slicesMap":{}}