{"componentChunkName":"component---src-templates-blog-post-js","path":"/데이터베이스/restore-using-binarylog/","result":{"data":{"site":{"siteMetadata":{"title":"내가 재밌는 일을 하자 !"}},"markdownRemark":{"id":"a9719807-4394-5222-88fb-9f57f75be775","excerpt":"들어가며 며칠 전, 리스티웨이브 프로젝트를 진행하며 특정 조건의 데이터를 모두 삭제 할 일이 있었습니다.\n하지만 실수로 해당 테이블의 데이터가 모두 삭제되는 일이 있었는데요..!\n이를 복원하기 위해 MySQL…","html":"<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>며칠 전, <a href=\"https://listywave.com\">리스티웨이브</a> 프로젝트를 진행하며 특정 조건의 데이터를 모두 삭제 할 일이 있었습니다.<br>\n하지만 실수로 해당 테이블의 데이터가 모두 삭제되는 일이 있었는데요..!<br>\n이를 복원하기 위해 MySQL이 지원하는 바이너리 로그를 이용해봤습니다.</p>\n<p>이번 글에서는 위 과정을 정리하고 바이너리 로그를 통해 복원하는 방법에 대해 정리해보겠습니다.</p>\n<blockquote>\n<p>MySQL 버전은 8.3.0이며 Homebrew로 설치해 로컬에서 진행했습니다.</p>\n</blockquote>\n<h2 id=\"바이너리-로그\" style=\"position:relative;\"><a href=\"#%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%EB%A1%9C%EA%B7%B8\" aria-label=\"바이너리 로그 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>바이너리 로그</h2>\n<p>우선 복구를 진행함에 앞서 바이너리 로그를 이해해야 합니다.</p>\n<p>바이너리 로그는 테이블 생성이나 데이터 변경과 같은 DB 변경 사항을 설명하는 <em>이벤트</em> 가 기록되는 로그입니다.<br>\n데이터에 영향을 주지 않는 SELECT 나 SHOW 같은 처리는 기록되지 않습니다.<br>\n이러한 바이너리 로그를 통해 <strong>DB 복제(레플리케이션)</strong> 이나 <strong>데이터 복구 작업</strong>을 수행할 수 있습니다.</p>\n<p>MySQL 서버는 기본적으로 바이너리 로그를 기록합니다.<br>\n서버가 시작되거나 종료될 때, 서버가 로그를 flush 할 때, 혹은 로그 파일의 크기가 <code class=\"language-text\">max_binlog_size</code>에 도달할 때마다 새로운 로그 파일을 자동으로 만들며 기록합니다.</p>\n<p>기록된 바이너리 로그 파일을 보고 싶다면 MySQL 서버에 접속해서 <code class=\"language-text\">SHOW BINARY LOGS;</code> 를 입력하면 확인할 수 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 302px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4713115907e84e37c4b79ddf8c1ab59d/5f1d2/show-binary-logs.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACwElEQVR42oVU2XLiQAzkT3YrJOEIp8GAsfHBZfBBjIkxIUCA2uP/v0CrliFblQq7D1Mez0itVkujnG7OaO6/0MDySFFt8sOUnNGCxtOIlqs3Oe9qYwr4vNm2KP/YolKlR48llR6KbVn3hbb8F5+6lFNUizRjSv2BK197GIhjtWFQs2VRtz8hBAVoT8d+Th3eG9ac9MFM/EzbF5tGywSgLZcTd0mm45E7X1G1rgsLGCCI6fgcKKSB7YkNghgMgHNkMp3HGREmkKsrA46cMUQUfOdBQtNZLP9gWih3ZIG5NfQlkMUA+CJV3D3V+hlDAI6mz6LjInqlMNrQ4fib0u2Zxm4khnCAdhoHhq7Vpk7Py63IcF9oyX25qknAXEMxyRmHzGhJ/mIt7NLtSRwgRbWhXwTvSPq4rzUNsVV7o1uAC5pwisFzSl6wpg2zkwqzZjVOGexcbyXnyAKp+YuUOp8AlfZFQ2cUclEi8sKEU0/Y8URRvBVAMERr6KZLM5Ylftkxw4EAfslQAK8ph+sL4JkiZojKVbjicLh7aAojnCNIcBvQpCGnjNIjqscabfc/aLU+fDCEA1iiG+JkLzLcBIQew8mC+y8WI7DcHX5RsjmKFFeGcOwbLiXpUYqCblC/0hCAKAr6LuDKgWH6eqIla4VAV8CHoioMl6Lh1wyVz22TVTkDTDbvEqhS70vbfM83BCCK3yTl/xZlwoB/q3zmau6lDwFY5mfY0UZiBw3h4/+rKNAKDMEOLwZtA0e81aeaJoXBm8UdGGaANxobekCr2eXpQcfd4aewtEeBAKLC3+7q1O4Oab05fRQFrPOPikiCYSKArY7DT2oixn2MMeMyJHiPcaXyORoZLGFr8PjCG9bYDv8YHlhK26YWT66czEGuHlhCM6QBY8sJqMdjCsyRusULRSrwEC1Xe1TkNEuVbH9dYPkH+oxvP0fEHtsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"show binary logs\"\n        title=\"\"\n        src=\"/static/4713115907e84e37c4b79ddf8c1ab59d/5f1d2/show-binary-logs.png\"\n        srcset=\"/static/4713115907e84e37c4b79ddf8c1ab59d/c26ae/show-binary-logs.png 158w,\n/static/4713115907e84e37c4b79ddf8c1ab59d/5f1d2/show-binary-logs.png 302w\"\n        sizes=\"(max-width: 302px) 100vw, 302px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>현재 기록중인 바이너리 로그 파일을 확인하고 싶다면 <code class=\"language-text\">SHOW MASTER STATUS;</code> 를 입력하면 됩니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/074453ab7fd8c9d7b4ea979021dc3360/fcda8/show-master-status.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.354430379746837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsElEQVR42k1QSRLCMAzrd6B7KGRvM93LwP+fI2K3BQ4eW4rGkZxIPULZCa7bYP0CbWfYdsU117hkiovmH5ZHPzn5p1NItJtR3VpUokUj+7h05YXSTDBugQ9PuHYD6UzkCdP7zi2sdxGTlkwl9Bj6F8LwxkMPyCvLInJNc1l7FLWDaLodC8+9iHx9cGeRLiFX0owQ94CHGjgynyE6pA+y0nKclGPvsc54aRE5mr9nUfgAjvKD3bKNC7cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"show master status\"\n        title=\"\"\n        src=\"/static/074453ab7fd8c9d7b4ea979021dc3360/fcda8/show-master-status.png\"\n        srcset=\"/static/074453ab7fd8c9d7b4ea979021dc3360/c26ae/show-master-status.png 158w,\n/static/074453ab7fd8c9d7b4ea979021dc3360/6bdcf/show-master-status.png 315w,\n/static/074453ab7fd8c9d7b4ea979021dc3360/fcda8/show-master-status.png 590w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>로그 파일이 저장되는 위치는 기본적으로 <code class=\"language-text\">datadir</code> 에 저장됩니다.<br>\n<code class=\"language-text\">--log-bin</code> 시스템 옵션을 통해 절대 경로를 지정하여 위치를 변경할 수 있습니다.<br>\n저는 따로 설정해주지 않아 <em>/var/mysql</em> 아래에 저장되어 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 529px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/300f344e23416f784584536daa91ed84/67d6a/binary-log-files.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVR42n2T6XKqQBSEeRhXDK6s4gYICkhkEb1Jbu77v0Xfnomx4pYfXUNRh48+p88oI32J4WQBbeBiwNMdOvCNOQJrCY/nUp8hoGx9jqGxQqujo3lWq2uirV5LWawSOLMN3PkW1nSNmRtirFkY9y15js7qvdjQLR+mHWBierCcNVTNIdS4Bi79FHn5gSz/g/WmgO1GaLLoIhY1Oga6/NgPX+EutlJzGlE1W0I6PUtKAj0vRbY7IGTx1AnQbE/u2hAuen0Hm6RCmp3grTNs+ZyX7/zJHqsgk+9Eh0rmx8jjAsf8hGNaot/VpatboGgv2hYoqg9EcYWYJjyC7GnIrkKILESNErHlaFejOP5DsT8ROEFLvR+2UJyyk01Ot1Mp0c1XOMZFysZPsE1rlIdPVPljoCjsMpQkO8LkWBrt8QV0l/IVcP8cKAJI2InHWYuZGSJxwr/DeAxk0tpToMN2Czk7AU5fT1gw0E7vicOCwGP1/msoIUMJoj3XK5fQh3sYERgJYP2Jkg5/m2FwXhHh0if4UXBKTGCaVqjrv3ir3iSw+WSGAiiv6dCVP3gaSp0dUCQlPDdAm+ndL7b55ZCudpzdiNAG627nJ4Hiwtu8yyr3qvEA9lMC+jKYonuT7E/gfxdBzphn3YNEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"binary log files\"\n        title=\"\"\n        src=\"/static/300f344e23416f784584536daa91ed84/67d6a/binary-log-files.png\"\n        srcset=\"/static/300f344e23416f784584536daa91ed84/c26ae/binary-log-files.png 158w,\n/static/300f344e23416f784584536daa91ed84/6bdcf/binary-log-files.png 315w,\n/static/300f344e23416f784584536daa91ed84/67d6a/binary-log-files.png 529w\"\n        sizes=\"(max-width: 529px) 100vw, 529px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"mysqlbinlog\" style=\"position:relative;\"><a href=\"#mysqlbinlog\" aria-label=\"mysqlbinlog permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mysqlbinlog</h2>\n<p>바이너리 로그는 이름 그대로 <strong>이진 데이터를 기록하는 로그 파일</strong>입니다.<br>\n즉, 사람이 로그 파일을 읽고 쓸 수 없습니다.<br>\n하지만 MySQL이 기본으로 제공하는 <strong><em>mysqlbinlog</em> 를 이용하면 사람이 읽을 수 있는 형식으로 출력</strong>해줍니다.<br>\n또한 바이너리 로그를 <code class=\"language-text\">.txt</code>, <code class=\"language-text\">.sql</code>과 같은 확장자를 가진 파일로 변환도 가능하게 해줍니다.</p>\n<p>사용법은 어렵지 않습니다.<br>\n로그 파일이 있는 폴더에서 <code class=\"language-text\">mysqlbinlog [options] {log_files}</code> 를 입력하면 해당 파일을 출력해줍니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6a6f8163866082c193526894c5fc314/2b2c6/read-log-file.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEUlEQVR42lWSW2/TQBCF/WOApE0cJ7YT3+JL3Dr32LkHJbVb0rRSW1pxeYAiNRQEtGpIhVr6ADzxSw+76xDEw6czO7N7ZiwP57sNBOUANbuGjufDVLeQyVnIiTZ4wUCK19ekeWOl/2JKRigikzXZfW4cnWPv7BuG+58xmH5CJ7pEd/cj2kT9yRzBznu0w0um9dE7pq3JBZrjCxYHO/P4XvQBXnAGrhvN0T95gL+/QGu6QHN6g+BgifbhLdPgcMnUn31F49nNWum9v9B3rdkttvtvyYQHX7D75jfCVz8Rvv6FycsfGD5/QP/4njS6R+/4Dr2jOwxOvmN4ShrPlqiEV6hG16hEV4Tr+Ly3gDc8BzcYnWIwfoFqI0SlHqJcC+FVJ7DdIUynv2LAtGh3CT3oZodhWN0Yk2oPqtYAZzt1eF4TqupAlosQRZ3ENgoFi8QGJMlg+RzJJ5MiJJLL5jQIgspqMUWWT5A6V9ry4ZK/q5tV6FYNiu5BNcrQipU1tEZVIXmp4CKVIX+ZbsCK9IpESgFXqXXR7o3R9EdoBk/Jp/dhlerIqy5kxSUGJUaerJNKmvFZA48SMp5s5PE4Kf9HYrNAJ2yhXO1AI93zSmxCp6QmgmghK5GdlG2ymyY20io7U9O0oJO6ycisNEkntJwGqKmibTND+phOQ5EKDjOmTcS8g01eY0pNs2LciEJzVOmEfwDfFHFVCke3HAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mysqlbinlog 사용\"\n        title=\"\"\n        src=\"/static/c6a6f8163866082c193526894c5fc314/f058b/read-log-file.png\"\n        srcset=\"/static/c6a6f8163866082c193526894c5fc314/c26ae/read-log-file.png 158w,\n/static/c6a6f8163866082c193526894c5fc314/6bdcf/read-log-file.png 315w,\n/static/c6a6f8163866082c193526894c5fc314/f058b/read-log-file.png 630w,\n/static/c6a6f8163866082c193526894c5fc314/2b2c6/read-log-file.png 869w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>로그 형식은 STATEMENT 기반인지 Row 기반인지에 따라 달라집니다.<br>\n기본적으로 Row 기반 출력이며 이때의 출력 형식은 SQL 문이 아닌, 행 변경의 과정이 기록됩니다.</p>\n<p>읽는 방법은 다음과 같습니다.</p>\n<p>각 이벤트 앞에는 추가 정보를 제공하는 주석이 존재합니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8b3f90ffe1a4537cf24ddeee695f5a93/d4c13/log-format.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.62025316455696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVR42i2P3XKDIBBGfZg2rZjpRIRFRMT4EzWZmmR6kfd/kq8Lk4szB5jl291sv78wT7+wdkRjJ2aE9wuIArQOUCrAUA/NPh5Neqtki/Lk2B4UayoPpbmmdMiu5w1DfYavWjjp4JXHYAcE6tCb8HYPrz3Mj4HnRsQBOsKBRnXpHmvqk0W27y9c1yfW5ZHow4bWzXBMcjMl4jlO3nDAd04QhYEQhJwpCoIVElIoZLfbH7b1geVyZz9xmXd0/DGuaXnyuFJ0bZh6RCsbuLzEgYMiX29/MJ+C8A94Hoaykfry3AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Header Comment\"\n        title=\"\"\n        src=\"/static/8b3f90ffe1a4537cf24ddeee695f5a93/f058b/log-format.png\"\n        srcset=\"/static/8b3f90ffe1a4537cf24ddeee695f5a93/c26ae/log-format.png 158w,\n/static/8b3f90ffe1a4537cf24ddeee695f5a93/6bdcf/log-format.png 315w,\n/static/8b3f90ffe1a4537cf24ddeee695f5a93/f058b/log-format.png 630w,\n/static/8b3f90ffe1a4537cf24ddeee695f5a93/d4c13/log-format.png 825w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>첫 번째 줄 (# at 2374386)</p>\n<ul>\n<li>at 뒤에 오는 숫자는 바이너리 로그 파일에서 이벤트의 오프셋 또는 시작 위치를 나타냅니다.</li>\n</ul>\n</li>\n<li>\n<p>두 번째 줄 (#240316 21:21:54 server id 1 end_log_pos 2374462)</p>\n<ul>\n<li>이벤트가 발생한 날짜와 시간, 서버의 id, 다음 이벤트가 시작되는 위치 값을 나타냅니다.</li>\n<li>end_log_pos 2374462: 다음 이벤트의 오프셋의 번호가 2374462 라는 의미입니다.</li>\n</ul>\n</li>\n</ul>\n<p>또한 Row Based 출력 형식이라면 options에 <code class=\"language-text\">-v</code>, <code class=\"language-text\">-vv</code>를 입력함으로써 좀 더 자세한 내용을 확인할 수 있습니다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/12831c930dfee0f24bc1a777738b736e/d26aa/when-v.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVR42pWRaU7DQAyFcxnaZmm2ydpszd40SYGARIWQuP8pHvawI6jEj0+OZc+z/aJM1RGnbkaXdxjrEZwLkcF0M1hOBsNKYJg7GVUjgraNoVPOkXOucW46qUQp6xnzzRlFNSGIG4S7FrusR5S0EMEeXlhC+Hv4UQWdRHiIS7nl5hIRlHC8QvbYIoeSl6MU86OaipVsZrjxK1xnMX68tZM30g8sukgzYyjd4Rbnh2csy6Pk7v4Jw7AgKwakOUGRt43TDnsanGQHrFT/G1fM5vVbOTYjjv01EjopphMTOjEkD10zwoY9I9QfrLXgT5ShndEcFukde2L77FsFhwR54lr9bH7f6KJgX08omhmCNmMv+O9Ko7csGFx8/Kvg2Ezo2hNcMllTPei0gU7R1jystP8LvgD0DASzk0M4VgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"-v 옵션\"\n        title=\"\"\n        src=\"/static/12831c930dfee0f24bc1a777738b736e/f058b/when-v.png\"\n        srcset=\"/static/12831c930dfee0f24bc1a777738b736e/c26ae/when-v.png 158w,\n/static/12831c930dfee0f24bc1a777738b736e/6bdcf/when-v.png 315w,\n/static/12831c930dfee0f24bc1a777738b736e/f058b/when-v.png 630w,\n/static/12831c930dfee0f24bc1a777738b736e/d26aa/when-v.png 839w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aa7013f638a1b14003fb2fdeec83fd92/9d76a/when-vv.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.60759493670886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaklEQVR42nWS2XKCQBRE+RoVBAUEZN/XQRCXJCb5/+/otKTKmAcfTt1h7tDVt2ekY3WASBvUYYlTMyAPSqjbAJoeYqk4MwvZnnleL2TnwX1f0Txo/E+qigNCv4RlRrCtGLoeYGOEM6aVwNjFczXtFMu1A53ntmb8wGBPv59hf8ueJMYbiuaEvJ5QsgapgB+38KNmrm5QwwtrfrfwiO0WWKkuZI2o/1mt95Cu0w2DOEPUR9YL2mpEFjdwnQSBm8NzUuztBP4+Q8w4HE6xli2sFPspEuexloS4IqSDIKjgc3SXDkxav7Pl+ArHVJRfZGYns27UPVQKLpQ/oYdgVh1Rt3Q4vKPuzuj660xOp21/QcQITDvDzsmYVwqDWVm76LVgUo6Isx7D9Inj+Rvt4Q09cy0pLsYPZOznjMP2Cqx5i6oRzRf3UrDlsymSBkN3wu3yhZF1orOxm2baooeoBsRejg2z04ih7KC9EPwBu8YLghfUaUUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"-vv 옵션\"\n        title=\"\"\n        src=\"/static/aa7013f638a1b14003fb2fdeec83fd92/f058b/when-vv.png\"\n        srcset=\"/static/aa7013f638a1b14003fb2fdeec83fd92/c26ae/when-vv.png 158w,\n/static/aa7013f638a1b14003fb2fdeec83fd92/6bdcf/when-vv.png 315w,\n/static/aa7013f638a1b14003fb2fdeec83fd92/f058b/when-vv.png 630w,\n/static/aa7013f638a1b14003fb2fdeec83fd92/9d76a/when-vv.png 829w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"이제-진짜-복구해보기\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%A0%9C-%EC%A7%84%EC%A7%9C-%EB%B3%B5%EA%B5%AC%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"이제 진짜 복구해보기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이제 진짜 복구해보기</h2>\n<p>우선 실제로 복구했던 환경과 최대한 비슷하게 세팅을 하겠습니다.<br>\n(<del>사실 뒤에 나올 내용은 세팅 환경이 중요하지 않습니다.</del>)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 205px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/db28ef14d5108564df3336a2650e2d86/85860/table-users.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABvElEQVR42o2TW0/CQBCF+1tMQJEiLbSltPRCoYKCXETkokFjjC/GJ/9/jnMGUHlRHibdbna+PXNm1qjaEUwrhFWPUbFaKFeaqHttWLUINTeF08hkP4R5EcByEvhhLnGJczlnVgPNubBbKJk+iucejMXqGdPZA+aLJ7S7NwLLcL98xkT27hYbdHsT2AJy/Qx5f4qX13dsnt7g+R2Mb9eS+6j7WT5WqJG0B6qCSVF6jUbQRVXUUbEtESVXosZH4cyRcHdfB6eihvsls7FbN3FWbsAgyGt2kXaGWqrtpEiyIa6Hc72Al/Ewk5iwDU//iyVX4mfN7xYo8tNsD0y0TNqwV0/gPuG/MFpSEs1nc/Yl02QGS49lrywNORpIVSyDMIIJzPLRt0+0Qzt4LNARIBdpRzoswCDqaddOCrZCOSY0/2ggFXHOwrinyUGrp94RwlJ5waGHf4ONUBJqbqJD6ge5NKGt/tW9VD0kkGDawgSOCde/x+cAyO5S2VyGeXa/URhHht6NJisdXAKX6xfp/hTvH5/yAEboD+70AcTp4KBpBn9oerUW68hwTbUskwppBxXxIp7lHu3YPrnoQD2BX2qXiiTr8OZkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"table users\"\n        title=\"\"\n        src=\"/static/db28ef14d5108564df3336a2650e2d86/85860/table-users.png\"\n        srcset=\"/static/db28ef14d5108564df3336a2650e2d86/c26ae/table-users.png 158w,\n/static/db28ef14d5108564df3336a2650e2d86/85860/table-users.png 205w\"\n        sizes=\"(max-width: 205px) 100vw, 205px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4766a2b2a16a56b1003729f02f88e7f8/772e8/table-list.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.74683544303798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLElEQVR42o1U2XLaQBDUr6SCEZcAge4LHWAMwsT4CiSOK3GlnKf8/2N7eyRckDg4D1u7Wu329PT0rNYxPPTNCMYwxGAUy9wxfNheLvsjO8XYydAbhGoEap3Dj87hhTM5y33TmsidZtuGNhxP8Hn3A6tPW1zfPmA6vxKAh8dnLFf3uLn7hjRfwXJz2S/X93j8/gvbL09wvAL5dI31ZockW6LbD6AxQpKVGKkopgKP06W6nGGg2JHxYJTIv/4wEkAvmOFjcyyj2bbQ6rrCrN3zZK0ZNWWmkBYrucQ0yXQ632CmZkOBZdNLRJOF/CcAL+sdB3rbqeZ6aEYd2fGLml2V2qK8VWAbFLO1BJyotKkdtSXgIcgfgCGiZAFqORwniCdVyn0zFmbcYwDOttIsiOfvAzJFahkmF7Lu9v2jQw19LCyrlFM0WycBI0mDFWLKjj+V9SGLs5YlBSMgz/L7JCB1I8O0uJS03gSsGfLsfwHSmBXDfwGmSGpLvQ+oRKeWrKTt5n8BNnRLmCdpKQU6Ccj2YlQWgj60BNCXSwTloIkZlN3A/0c+fKvKrnI/gVkQ2oJ6sW/5j4OMyYznOD40zNdgZy37KBuNfqM29BmBgriyDrXknuUW0rNDFkXZKojmEpiaczAwM2rWHaPxMqvHyNvdE66uv6KnGC3KO0lvox6Mi+WN+I+PR6ac8PP5t7QqHw6eDxUJelV6mah7Pdjg+ybf7x+u9Y77+hgc6nao5wvenwni8qdXRQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"table list\"\n        title=\"\"\n        src=\"/static/4766a2b2a16a56b1003729f02f88e7f8/772e8/table-list.png\"\n        srcset=\"/static/4766a2b2a16a56b1003729f02f88e7f8/c26ae/table-list.png 158w,\n/static/4766a2b2a16a56b1003729f02f88e7f8/772e8/table-list.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f7f714358a7c7b57ba5a5eaf578ec12f/6f3f2/table-collaborator.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeElEQVR42mVS2XKDQAzjX9rcEBruM9yQkKuZzOT//0S1nPLQ5sHDsrYlWV5ju8sQZz2K+oSdV8DxSzTdTf7PiJIOluSDqMHp+kRWHOGHNZJ8QJR2KJuL9qb7A4K4xcoMYRBgPD8xHB/aQJDucEfVXuAFNVzJ5+WoeQLxTIC2/0Y33JFkg/SNSrDZJjBMO4EbVFrsCTtVEphEVMZmnn05x9Ls+hVCUeOFFWZLHx9zB58LV8LDYh3AsL5eI9cyZpi02kw1VJILcC7sQdyg6W+qfLqfFBFkuQk1fgFTUVjCdnJVZNop1laswQY/qmX0SotXZqT5L7dQxWsrwnzla24Kg0sh2GQsCxgcg7miOul3tvT0frkJtJYkJHwDJOPOfW2XRVQxyWeOJLaTqUfTaKpQ/N5s43dAAnEJ9KZszupjtj+qT3Haq4fD+HhtND+I11e1houciP8Acim2s0fdXrGvRh0/lKdDQKrzw0buT/qM6Fsvi6Hn/5VNgD9nlyrLyW6DQAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"table collaborator\"\n        title=\"\"\n        src=\"/static/f7f714358a7c7b57ba5a5eaf578ec12f/6f3f2/table-collaborator.png\"\n        srcset=\"/static/f7f714358a7c7b57ba5a5eaf578ec12f/c26ae/table-collaborator.png 158w,\n/static/f7f714358a7c7b57ba5a5eaf578ec12f/6f3f2/table-collaborator.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>궁금해서 바이너리 로그를 출력해보니 모두 잘 기록되어 있네요 👍\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a6d1d6b83754f82fae5a3186d0bdbe4/bb3ba/confirm-binary-log.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.48101265822784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkElEQVR42m1UWXabQBDkMrEBSez7vghJIGF5zfJecv9jVKoH2Y6sfNTrmQFququr0ap+RtFMKNsjvLDF2imwsnMYmxSmleHOjKCvkyvcrz6hr2PGGN+MSL2rPc+vOB9fcNyf0dcHdNUeHWNTDMjjFq6VIgkqpFGNyC2WdVgjCStkcYPAydVZyGe+lUCbdg8LQblDK4RES9KahGXWI+LLZbZFzJiQqEg7+G4On0ShXyLgOvAKtZe1Ns7fcXz4gYk4nX8qzI+/8PT2B+PpDQ0lifMBOsszLzIsZcfXYLkSNfnoML2oD9vtjLweEWcDsnIPx69JFF/h3vxcG0IsRP9AG4YHpGmPhKV4XgmXWjiERNmbqwgOy5Ezm9HlmexlvSFuCMeBXaZeoQgrgrMRPjUJqI/EtRnCozaeukT0KvleDd9OoRuh6uwV4ZZlptWIjKWm1YElT0jLA7FXe5dWsrxKaWdussVOtNWKmRu87CbD4+ERKbsYMDvfrxhrhOxmzEyjsMGKL202bAg/NoxAQScsk2szus1wpge3/Qkdzd0wy66dFOSs5VmadIyjIk94SZFvWT61Fl2ZuUUpBGs7o6YFtAO7LLaRbn/Y5om2ef2NYXxGxQkK4m7J5GKRu0tmd8Z/Sj7TMlL2tpvQM7OKGaRRg5yZBe7SFIvj5XAK7E2sIHubcHmm39pmRpD0KgtJ3WYXbZZksxw3WHz4XpbYRJ5bLE1m3uFYftVR24kP2VE/ol2YWURP2v5C9k6oLhEiuZB28qRZ0nVjacz9V8KMNslJKijYGJmSrNirKB8LkUyFwTKNy4RIVitqqPMvo/40F2gT/zIldUuYXUy7iLEFOScnS1pqlqjBX7SLPmBfdFwu+sRfUi0O7p05jYwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"confirm binary log\"\n        title=\"\"\n        src=\"/static/6a6d1d6b83754f82fae5a3186d0bdbe4/f058b/confirm-binary-log.png\"\n        srcset=\"/static/6a6d1d6b83754f82fae5a3186d0bdbe4/c26ae/confirm-binary-log.png 158w,\n/static/6a6d1d6b83754f82fae5a3186d0bdbe4/6bdcf/confirm-binary-log.png 315w,\n/static/6a6d1d6b83754f82fae5a3186d0bdbe4/f058b/confirm-binary-log.png 630w,\n/static/6a6d1d6b83754f82fae5a3186d0bdbe4/40601/confirm-binary-log.png 945w,\n/static/6a6d1d6b83754f82fae5a3186d0bdbe4/bb3ba/confirm-binary-log.png 1121w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이제 실수를 가정하고 collaborator의 모든 데이터를 삭제해보겠습니다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 274px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/337dbf2fe60e6a3adee4f289964e9b80/d3fa7/delete-all-collaborator.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.51898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOElEQVR42nWT15LaYAyFeZdsKEs3xsYYF2yKMaYsybbs5CKT938GRZ+MdyYzycU/f5OOjo6kVn+0lDAuZBntxfXWslhuJV4fJUpL8YJcBuOlJHovym/izFNZhFtZxQdZJQcJwtp25mXSGyyk8+hJazRdyV6NQzWKklKC1U5iBSPI1E10peaUZpV4i9wAOad5ZcEBni8yeRwqYE8BB8pwroYw9JcbA+TMjpMXbMTXtdlfxfUzY06wr11XvrQdWw8dV9oKZgyHk9CcfY3GDgMAV0ktA6zCqJB8e7HAIX+aDVIB0O37tjgb4GAcytiJZDSNTLNGi3ZvLo6mjG7oCCPexk5swbHj3gB9Ag4nK0FH0oJdA/bQmel9Z/r0R4EB8kbh0Lvb/y9gaBEBZocRAWBNQWDt+muZzBLBdjKLTRpS/icgjmiV5ifZFTdjBcjucDOtovQgx9OLHI7fJc6OkqmWAFOEZv0FiKDogU4wo/yNrqSKM+0Do6G+szdFaHaYNmytD6vzq7J7sp6iPQplA8NEGXG+Pf80pon233b/JJfbD+tF/tabk5IITFMDRJPr7UMNr9Zf1eXNGNEiOG12V2vgoqydSX2rwSkMgEiANPldCkuZCD1N1dLS4jhznZB7EYhKoQiCHW/IwUD073fzH9CPyhDD1/dfcrq+2WSQUqlFqM4vGv1srVRWz/L+8VtZ1cXDhkLB6qhyIRWg6NiiGACgXTNiMGBSmHHmmllm0Yt1P9Y9yc7oAdQU6A/ID9TDl8RNHgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"delete all collaborator\"\n        title=\"\"\n        src=\"/static/337dbf2fe60e6a3adee4f289964e9b80/d3fa7/delete-all-collaborator.png\"\n        srcset=\"/static/337dbf2fe60e6a3adee4f289964e9b80/c26ae/delete-all-collaborator.png 158w,\n/static/337dbf2fe60e6a3adee4f289964e9b80/d3fa7/delete-all-collaborator.png 274w\"\n        sizes=\"(max-width: 274px) 100vw, 274px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>복구를 시작하기에 앞서 가장 먼저 <strong>현재 바이너리 로그 파일의 이름</strong>을 알아야 합니다.<br>\n<code class=\"language-text\">mysql> SHOW MASTER STATUS;</code> 을 통해 현재 바이너리 로그 파일의 이름을 확인합니다.<br>\n복구에 이용될 로그 파일 이름은 <em>binlog.002564</em> 이네요.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 593px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3a0407b4feb30f377af732710995ef5/0b5b1/current-binary-log.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.354430379746837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k2PVw7CQAxEcxogvUHK1kSQAuH+1xlsR0H5eJrxSOtZB03/QqsmGLeiNzP5fQ6TDteo+XOLW9FL+BCO7DwzgRs2ZKVBUTm0tNwNH2hPy/UMbVcpsv4NZWdigSGvKeN3XMyZGzdRzgNLCxQ99OMXTf9EkmvyG/jn7PPKSlndjFRsZWbK2qO8e8mK2okyAW/u9IRO7fRmkdO5TZGPMyXnH8pETHrK0j1j/wNCiIPjqoB+jQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"current binary log\"\n        title=\"\"\n        src=\"/static/e3a0407b4feb30f377af732710995ef5/0b5b1/current-binary-log.png\"\n        srcset=\"/static/e3a0407b4feb30f377af732710995ef5/c26ae/current-binary-log.png 158w,\n/static/e3a0407b4feb30f377af732710995ef5/6bdcf/current-binary-log.png 315w,\n/static/e3a0407b4feb30f377af732710995ef5/0b5b1/current-binary-log.png 593w\"\n        sizes=\"(max-width: 593px) 100vw, 593px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그리고 위 파일을 확실하게 기록하고 저장하기 위해 <code class=\"language-text\">mysql> FLUSH LOGS;</code> 명령어를 통해 현재 로그를 기록해줍니다.<br>\n새로운 로그 파일이 생기는 것을 확인할 수 있습니다.</p>\n<p>이제 <code class=\"language-text\">local> mysqlbinlog binglog.002564 | mysql -u root -p</code> 명령어를 통해 복구를 진행할 수 있습니다.<br>\n이때, 중요한 점은 <em>binglog.002564</em> 파일에 있는 모든 이벤트들이 mysql 서버에서 재실행이 되는 구조입니다.<br>\n따라서 경우에 따라 아래같이 에러가 발생해 실패하는 경우가 있습니다.<br>\n<code class=\"language-text\">test</code> 데이터베이스에 <code class=\"language-text\">item</code> 이라는 테이블이 없는데 <code class=\"language-text\">DROP</code> 하려는 명령어때문에 발생한 오류이네요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 407px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/caeea7a337b8afdcfefdb2ed744d900c/0ff56/occurs-error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.72151898734177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5ElEQVR42j1Qy26DMBDkf6pGaklTEjDEdnmagAMBAoGEVlUv/f/z1CxSD6NZaWYfs1bmRVAsQuwILPUpSPDxFqz1MUVxzIweIz2EyNwIqRtCGj33E/J4GwfeswO22ROs7+sD82XEWHaYdI+haPHZTJjrEb/zD77aO5RpXjzTuTfaiFvRoRQKbVqhM9BcQdgB3Kd3WI/6Bi1yjPqK4dSgSfT/FXIbEHObIdxxQryXxML2V96uzF8Z+AuDda8G2tbnjYmb0tYmOSM5SGrO/ZiiKxNviVmFBfmWN9RRSYO1zOklWij8AQKbkx5mBbaUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"복구 결과 에러 발생\"\n        title=\"\"\n        src=\"/static/caeea7a337b8afdcfefdb2ed744d900c/0ff56/occurs-error.png\"\n        srcset=\"/static/caeea7a337b8afdcfefdb2ed744d900c/c26ae/occurs-error.png 158w,\n/static/caeea7a337b8afdcfefdb2ed744d900c/6bdcf/occurs-error.png 315w,\n/static/caeea7a337b8afdcfefdb2ed744d900c/0ff56/occurs-error.png 407w\"\n        sizes=\"(max-width: 407px) 100vw, 407px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 324px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39e0b86bb4ee63b0685003e965400634/67580/check-by-query.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhUlEQVR42lWN2wqCQABE/ZlQkiCo1F3zvq6566UiiYge+/9PONnlpYfDwHCYcQKpUPqIiDUyabDDlVDW6MMZsW+I4pqi6vFXgoW3xfUD3OUXzw//8o2TFZb740mhBoyZsN1EkreMpxumn4jm8ba7UOmRNDfzmfq4gVDsooqstKw3KeWvewGSNkVVpFpIrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"실제 쿼리 결과\"\n        title=\"\"\n        src=\"/static/39e0b86bb4ee63b0685003e965400634/67580/check-by-query.png\"\n        srcset=\"/static/39e0b86bb4ee63b0685003e965400634/c26ae/check-by-query.png 158w,\n/static/39e0b86bb4ee63b0685003e965400634/6bdcf/check-by-query.png 315w,\n/static/39e0b86bb4ee63b0685003e965400634/67580/check-by-query.png 324w\"\n        sizes=\"(max-width: 324px) 100vw, 324px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 342px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc6d0c3ccc1c2406751237434b4fcd50/e2c15/check-by-vim.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.556962025316455%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAu0lEQVR42j3L226CQBSFYd5GgdsBiQWDYRBlykHaYcRTxNaYvv8D/J1i0osve2XtvZ3+PePaHWml4nu48nO58zzduOwNh+qDsT/zsP2oTxwbzeeuIV+uSYOEbJFSxJIsSlmLmEiscMYu52mfzqph2FZ8dYZcvNHnCmMVYUKzktxazbCr7V2LluXU7dONVVAlkjpKWPgCR5sSpQxl2SFlTRxvmLsBs7nA9YIp/3G98DWnHOD54b/XzvJDfgF7OWv9tCergAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vim으로 확인 결과\"\n        title=\"\"\n        src=\"/static/dc6d0c3ccc1c2406751237434b4fcd50/e2c15/check-by-vim.png\"\n        srcset=\"/static/dc6d0c3ccc1c2406751237434b4fcd50/c26ae/check-by-vim.png 158w,\n/static/dc6d0c3ccc1c2406751237434b4fcd50/6bdcf/check-by-vim.png 315w,\n/static/dc6d0c3ccc1c2406751237434b4fcd50/e2c15/check-by-vim.png 342w\"\n        sizes=\"(max-width: 342px) 100vw, 342px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이럴 땐 <strong>이벤트 번호를 통해 원하는 곳을 지정</strong>할 수 있습니다.<br>\n간단한 예시로 <code class=\"language-text\">fruits</code> 테이블을 만들고 <code class=\"language-text\">fruit</code>로 이름을 수정하고 테이블을 삭제하는 케이스가 있다고 가정하겠습니다.<br>\n이제 <code class=\"language-text\">mysqlbinlog</code> 명령어로 아래 그림처럼 복구를 희망하는 시작 지점의 이벤트 번호 (237) 과 종료 시점의 이벤트 번호 (681)을 확인합니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f112cad8556c9457bda170d86a6c1357/cf4cc/restore-fruit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCUlEQVR42lVS2ZLaMBD0v2QB35csn2B8AzY212Y3lbzk/3+iMyM2W8VD14xVcqu7Z7TpeMXQTqjLAUVaIxE7xOH2CeplUED4haqRn6tz4WXqnqBv6STQzRibL2iH6R396a7QDjdU3YKk6BHGtUKc90gIgazhBDu4YQlPlLD9LXQng21Er4TT/BMnJj3c0PQLmm5GUR4h0wZCVvCIxCcSlwhsLycUsAgbK8HKiOGY8pVwOD1wJMKBFJb1hLQY4Is9/GgP083wpkf4sRaqvukSG6q2HsLRBWwiC0xBRFKRrQ0Jra9H5EmFLN6rXDgnziaizJKoVEjl/plhuEMRZOj8GH2YoXZj5HaklJtOqtRr0/kd5/kDI6mclw8sl0+F++MPLtdfOI4PiuMKQYo9Gg5H4ITPDNn2mmBSloadKFKN7TKa/oKqnbFvzsi2NPHyhChpYNAl3XpOcs05Uc/21BnBYFKy+h/agbLb0s9MIuIKlpsTsm8L3LMlN9h+wyJFAUXBvU33Tfv5qEFVDYWV8UAqmjAr5Wm3wxUt98MFHW2AILUB2WZ4UQWXqu7kWFkpHIqCbXPVxuUT8+03jucPAq0Q5ck7yec1kcq8Uzu4oddXbNvOICyJ1AwRK4hXy3+nCx7diHt9wFJ2GLMKfVSgDlLUfoodTXHnSFRegpKmWtHZ3onQU21cidZ93cN/9SxufxGaM9gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이벤트 번호 확인\"\n        title=\"\"\n        src=\"/static/f112cad8556c9457bda170d86a6c1357/f058b/restore-fruit.png\"\n        srcset=\"/static/f112cad8556c9457bda170d86a6c1357/c26ae/restore-fruit.png 158w,\n/static/f112cad8556c9457bda170d86a6c1357/6bdcf/restore-fruit.png 315w,\n/static/f112cad8556c9457bda170d86a6c1357/f058b/restore-fruit.png 630w,\n/static/f112cad8556c9457bda170d86a6c1357/40601/restore-fruit.png 945w,\n/static/f112cad8556c9457bda170d86a6c1357/cf4cc/restore-fruit.png 1079w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그리고 <code class=\"language-text\">--start-point</code>, <code class=\"language-text\">--end-point</code> 옵션을 통해 원하는 구간의 이벤트만 재실행하도록 합니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 619px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b6badf79668e5a18b407d707ee7e66b7/e628c/restore-fruti-command.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.759493670886075%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfklEQVR42lWNUQ6CMBQEuQ8BBSml9BWkpaIBjYH7n2Vs+PNjssluMps1esK4BSuRzyTscyKO7EHwMtCaiE17re5/qC5QVkLdjORlT3UbyAtDNvqNsHx5rQfH7Hg7xSrtmYPWqFP4pE0C3Uca7THpvLORKsk6++BSO1Tqi6vwA4xQREecaC5tAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"복구 시도\"\n        title=\"\"\n        src=\"/static/b6badf79668e5a18b407d707ee7e66b7/e628c/restore-fruti-command.png\"\n        srcset=\"/static/b6badf79668e5a18b407d707ee7e66b7/c26ae/restore-fruti-command.png 158w,\n/static/b6badf79668e5a18b407d707ee7e66b7/6bdcf/restore-fruti-command.png 315w,\n/static/b6badf79668e5a18b407d707ee7e66b7/e628c/restore-fruti-command.png 619w\"\n        sizes=\"(max-width: 619px) 100vw, 619px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그 결과 fruit 테이블이 복구되는 것을 확인할 수 있습니다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 180px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/657d141a0a4913691b799aab4c323292/e9ff0/result-of-restore-fruit-table.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.81012658227847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACX0lEQVR42o1U2W4aQRDkS6Ikjm3uvS/Y28AuCwvmCsYxPpREyf//QKertaAkYMsPoxnNTFdXVx+1RtuhZsejesuhVrdHbaVP101b7jqqT422K284462r+fzmyv1Vw5K/f6+abkW0f/5Fs9sdbbZPNF/ek27FFKdTut9/p2/7H2S5NzTMF/Qo/+7kz2S2Jc2MTkBrXfacDmbkeAPy/EyMVSOU3ekNyeuPyGAHlpPKu2En1A9zitghIjphqOgB2R6MBwLi+SNyGQgsER7u8Ae7yWAmAyt6SG5/SJd18xQQbGBgOgk9PP6k5XpPi9UDzRY70vhtzlLAYVF+pTVLUnLIzbYn7P8HqxiGEkKb6Xe1QFZH7UsSLDeVM9iqeiCMFXaimzH54fh8UvAJ9GEcJhPWZkJhXFDCuvrRWM7QK+DdZT3hUGNAaHsWEJmCNhC85PAAiIxvd880nd9RMd3IPbJqc+IurnQBQlRvAoLNILsVZgBBqF+uDTE6GGJHTWK9CoikIHPwjvLJi7WAo3APn+pN5x+jNwE1I5LaAiiKF+xMOxV2MDyXyXcBglU2WdOHT136fMk6nQF6HyBriAyjcEf5ktLhnCLONvr2nMEBEARe1xAM2WNRbigbL6WPVSM4GmM1qr3eskXfXpAf3zFgDvJI66HOsLeVniw4Mayk0jYhhWsPZ0SBIrervofOWB8v1GNF1MAuvinFICtWNOV6M1kCFDvCwj3ukkEp3YNJE8Rjenr5LSXWCzKZQGgKyCedgl4FK+iHsMHCqIodkwaOMDQwmSAHzjnf2dUwycYrSRKw/gCvCjPwpioziAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"복구 성공\"\n        title=\"\"\n        src=\"/static/657d141a0a4913691b799aab4c323292/e9ff0/result-of-restore-fruit-table.png\"\n        srcset=\"/static/657d141a0a4913691b799aab4c323292/c26ae/result-of-restore-fruit-table.png 158w,\n/static/657d141a0a4913691b799aab4c323292/e9ff0/result-of-restore-fruit-table.png 180w\"\n        sizes=\"(max-width: 180px) 100vw, 180px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 이제 원래 목적인 collaborator 데이터를 복구해보겠습니다.<br>\n바이너리 로그를 이용한 복구 방법에는 다양한 방법이 있습니다.<br>\n위에서 해봤던 position을 이용해 원하는 부분만 재실행하는 방법, 그리고 <strong>모든 바이너리 로그 파일을 sql 파일로 저장하고 해당 파일을 수정한 뒤 mysql 서버에 실행하는 방법</strong></p>\n<p>position을 이용한 방법은 위에서 해봤으니 이번엔 sql 파일을 통해 복구를 해보겠습니다.</p>\n<p>우선 지금까지의 모든 바이너리 로그 파일을 하나의 sql 파일로 저장합니다.<br>\n<code class=\"language-text\">local> mysqlbinlog binlog.00* > binlog.sql</code></p>\n<p>그리고 vim을 통해 파일을 수정해줍니다.<br></p>\n<blockquote>\n<p>참고로 vim 편집기에서 <code class=\"language-text\">Shift + g</code> 를 누르면 맨 마지막 줄로 커서가 이동합니다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/71f498c6fa38d86701813199a09fb147/94829/apply-comment.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.88607594936709%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVR42i2OW3KDMBRDWQ0NUErwC5PwsAGnbUhIZtqfTve/DlV4+nHmyrak6+T+vuF22TCeZgykaxx8F9BbD1OfYVUPK3scCw1RNlHrqoUiLd+iR3YwpBIDknVe0bsrtHHQjUctaOI0doLSjnqCPS14LS0qhhV9NUuFHMkAqcboV28WaWaQ/Hz/Ily/MF+eCB9PTGHDQu3me2TwK+cN3fgZz4JLDkWDvGyRccnOro+FQZqzcIslD3ia/bJh+seeA2rlYoHgL5TxkNR7OM00XhjeZ9SkylW8+wNDZIZbz3WLUAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"주석 처리\"\n        title=\"\"\n        src=\"/static/71f498c6fa38d86701813199a09fb147/f058b/apply-comment.png\"\n        srcset=\"/static/71f498c6fa38d86701813199a09fb147/c26ae/apply-comment.png 158w,\n/static/71f498c6fa38d86701813199a09fb147/6bdcf/apply-comment.png 315w,\n/static/71f498c6fa38d86701813199a09fb147/f058b/apply-comment.png 630w,\n/static/71f498c6fa38d86701813199a09fb147/94829/apply-comment.png 878w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n문제가 되는 부분을 찾아 주석처리 해줍니다.</p>\n<p>이제 <code class=\"language-text\">$> mysql -u root -p -f &lt; binlog.sql</code> 을 입력하면 그동안 수행된 모든 로그들이 재실행됨으로써 복구할 수 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd8cc98f21919138f2ccc8804de2eb74/91f10/restore-using-sql-file.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.21518987341772%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVR42oVQW26DMBDkNG0TAgESsLGNeRhDmnfvf5jp7iqq1I+qH6MdjbSzs5P44YI+XKFtFLRuQVZY7PYWm50mKGyzVvjbpha8b5s/kczLU4z68QI/nlEde0zxjloH1GpCVQ/CS9Lz0iHN2/8MH2S4YJiuCMxNRFy/MM43jOEG5z8x0ORjpltRHnp8pJxavz7QP5+wnrARL/rhDNudZOnYjFBk3LSBMAvnlMwLMkxzI7VwFVnhkDMofUY1JSE+JJnzJ0nHHarXNG6FJZ1rYCgzyywqLxUc6PC+6n71+w3nxqVy/ap7FwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"복구 시도\"\n        title=\"\"\n        src=\"/static/cd8cc98f21919138f2ccc8804de2eb74/f058b/restore-using-sql-file.png\"\n        srcset=\"/static/cd8cc98f21919138f2ccc8804de2eb74/c26ae/restore-using-sql-file.png 158w,\n/static/cd8cc98f21919138f2ccc8804de2eb74/6bdcf/restore-using-sql-file.png 315w,\n/static/cd8cc98f21919138f2ccc8804de2eb74/f058b/restore-using-sql-file.png 630w,\n/static/cd8cc98f21919138f2ccc8804de2eb74/40601/restore-using-sql-file.png 945w,\n/static/cd8cc98f21919138f2ccc8804de2eb74/91f10/restore-using-sql-file.png 992w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 261px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a31be43151dc657cc73280cab8217281/edf96/result-of-restore.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVR42nWS6VLCQBCE8y4iIBACucl9k0gAyyr1/Z+knZ6IpRb+2Nqt2Z2eb3rWWG8j+IcGQdTA2qfYuwXirEcgMccrsd0l8MIKZXOBH9Zyn8P2CoRRq3mOnAM5W3aK+ZMHY+dkGMY3NN0VUXpEGLfo+lcU9VkEpIjcJ1LgdH7HITnqG+7j5QNle9HilewEWqx8GCRkhTDulIQXST7A8QsVT4tnJfKEjsluUKmg45d4mDt4XLqYLab9W5CJFHGDUtuo2+sknA0qYkvrdfeibfNtnPZafLkOfi0VNHexEtIb9UQqs4gp3ll2JjSdxlbmQWO0iLR8S88o8nMZGytWQ0nE1pg4W7jSji3JqbQ8SCzUZLZFEtrDt3/FvggTrUZvKMopb6xIRUhND0lFIVOK844TJvldwq18lYjTk0W/pi80Dek2oLwadZKMJXmvFrCrfwhjJWEiaXi+TZJe3YZDURbKypMS36Oj4Ceajyl+9jSQ4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"복구 성공!\"\n        title=\"\"\n        src=\"/static/a31be43151dc657cc73280cab8217281/edf96/result-of-restore.png\"\n        srcset=\"/static/a31be43151dc657cc73280cab8217281/c26ae/result-of-restore.png 158w,\n/static/a31be43151dc657cc73280cab8217281/edf96/result-of-restore.png 261w\"\n        sizes=\"(max-width: 261px) 100vw, 261px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><code class=\"language-text\">-f</code> 옵션은 로그 재실행 중에 발생하는 에러를 출력만하고 무시하고 계속해서 진행하는 옵션입니다.</p>\n</blockquote>\n<p>사실 위 방법은 모든 바이너리 로그를 재실행한다는 점에서 운용중인 DB에 사용하면 서비스 장애를 초래할 수 있습니다.<br>\n따라서 사용자가 많이 없는 시간을 이용하거나 이벤트 position을 통해 정말 필요한 부분만 재실행 할 필요가 있겠습니다.<br>\n혹은 복구용 데이터베이스를 만들고 복구를 마친 다음, 서버 애플리케이션이 복구된 데이터베이스를 바로보도록 하는 등의 방식이 안전할 것 같습니다.<br></p>\n<p>바이너리 로그를 이용해 복구하는 방법에는 여러 방법이 있으니 취사 선택하시면 될 것 같습니다.</p>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h2>\n<p>지금까지 MySQL이 제공하는 바이너리 로그를 이용해 데이터 복구 하는 방법에 대해 알아보았습니다.<br>\n막상 어렵지는 않지만 실제 상황에서 잘못 데이터를 날려 복구해야 하는 상황이라면 뇌가 하얘지고 손발이 달달 떨릴 것 같습니다..<br>\n그럴 일이 없길 바라며 마치겠습니다.</p>\n<p>감사합니다.</p>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<blockquote>\n<ul>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/mysqlbinlog.html#option_mysqlbinlog_start-datetime\">https://dev.mysql.com/doc/refman/8.0/en/mysqlbinlog.html#option_mysqlbinlog_start-datetime</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/point-in-time-recovery-positions.html\">https://dev.mysql.com/doc/refman/8.0/en/point-in-time-recovery-positions.html</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/binary-log.html\">https://dev.mysql.com/doc/refman/8.0/en/binary-log.html</a></li>\n</ul>\n</blockquote>","tableOfContents":"<ul>\n<li><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\">들어가며</a></li>\n<li><a href=\"#%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%EB%A1%9C%EA%B7%B8\">바이너리 로그</a></li>\n<li><a href=\"#mysqlbinlog\">mysqlbinlog</a></li>\n<li><a href=\"#%EC%9D%B4%EC%A0%9C-%EC%A7%84%EC%A7%9C-%EB%B3%B5%EA%B5%AC%ED%95%B4%EB%B3%B4%EA%B8%B0\">이제 진짜 복구해보기</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n<li><a href=\"#reference\">Reference</a></li>\n</ul>","frontmatter":{"title":"[MySQL] 바이너리 로그로 데이터 복구하기","date":"2024년 4월 5일","description":"알아두면 유용한.. 하지만 쓸 일이 없었으면 하는","tags":["MySQL","바이너리 로그","복구"]}},"previous":{"fields":{"slug":"/네트워크/네트워크-책-스터디/07-https/"},"frontmatter":{"title":"7장. 웹을 안전하게 지켜주는 HTTPS"}},"next":{"fields":{"slug":"/네트워크/네트워크-책-스터디/09-advanced-http-protocol/"},"frontmatter":{"title":"9장. HTTP에 기능을 추가한 프로토콜"}}},"pageContext":{"id":"a9719807-4394-5222-88fb-9f57f75be775","previousPostId":"e352a4bd-6958-5fd3-a296-3e20931fd720","nextPostId":"2ce4d16c-5b0d-56d9-9850-4ca875f0b0ef"}},"staticQueryHashes":["1475414628","2841359383"],"slicesMap":{}}