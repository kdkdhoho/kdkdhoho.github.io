{"componentChunkName":"component---src-templates-post-jsx","path":"/zero-downtime-deployment/","result":{"data":{"site":{"siteMetadata":{"title":"log4dh"}},"markdownRemark":{"id":"c418073e-50be-5fe1-807d-478c9c47f640","excerpt":"무중단 배포란? 적용하는 이유는? 한 대의 서버로만 배포하는 모놀리식 구조의 서비스인 경우, 서비스를 새로운 버전으로 업데이트해야 하는 경우가 있습니다. 이때 새롭게 배포하게 되는데, 배포되는 시간동안 서비스는 잠깐 사용할 수 없게 됩니다. 이 시간을 Down Time 이라고 부릅니다. 이 Down Time을 제거하여 사용자에게 불편함을 주지 않기 위해 …","html":"<h2>무중단 배포란? 적용하는 이유는?</h2>\n<p>한 대의 서버로만 배포하는 모놀리식 구조의 서비스인 경우, 서비스를 새로운 버전으로 업데이트해야 하는 경우가 있습니다.</p>\n<p>이때 새롭게 배포하게 되는데, 배포되는 시간동안 서비스는 <strong>잠깐 사용할 수 없게 됩니다.</strong></p>\n<p>이 시간을 <em>Down Time</em> 이라고 부릅니다.</p>\n<p><strong>이 Down Time을 제거하여 사용자에게 불편함을 주지 않기 위해 적용하는 것</strong>이 무중단 배포입니다.</p>\n<h2>적용하는 방법</h2>\n<p>무중단 배포를 적용하는 방법에는 크게 3가지 방식이 있습니다.</p>\n<ol>\n<li>롤링 배포</li>\n<li>블루/그린 배포</li>\n<li>카나리 배포</li>\n</ol>\n<p>각 방식에 따른 장단점이 분명하기에, 상황에 맞는 배포 전략을 적절히 선택하는 것이 중요합니다.</p>\n<h3>롤링 배포</h3>\n<p>신 버전을 <strong>점진적으로 배포</strong>한다는 특징을 가진 배포 방식입니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/ad68c6c7ae30d230855af15c427aa1d2/248ed/Rolling-Deployment.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEElEQVR42lVSy27UQBDMX/ED/AlckbghjvkJvoADBw4oSAiQkCDiEB5CBGXJggSEjXfjXb/tmfa8i56xyaMPlmd6urq6qvcGSciLCjGM86jIQTpAaYPVZgsfAkLw2A4G1QiQMsjyHay1qaaSBgXfu5CO2PPNOVz2FdpY1E2LndDoGTCIAm75GkoOaFu+J4U2NtUE/+sQmgZ0/YCyH9EawPoZEMdPYJ4/SCyV1qiVxxAzF8cIB/dB5Tlic7U8gTx8h7A+BZ7eQfF7gU4QhBHorORJ/AxoiOdoUlHddFi1GqXig2eaMeenh+X+Q+T37sLEgyj5E6CURiFytG7HI9sZcI6oiWUNyQZoh8vQSmEQEuL9W2b5PTVmUTGOI0bWf1SSmxi+DzcBBRcRjenfE4G+fIL5eZqeeefQs0nGTp18cCAn4ZxFmCf4H5eAdVWhb5uJ1TbH+vYttB8+YkZAcbEBSYkoVdUVEK6D9hOBuAUhbUNgwDD7ffQI5vNj6FifryFeHkBV0zrBsXJv9tF9e4GqlRijEa6GCXoCvMlwPv54BX92BEGaGTS8IgoqTAwSrZNn0Pky5eu+YMCSX7ARcseNV8h3JcqyuBp5os60eTxioRtVQHm6ykWinPds3DD2vF7sLANKIZBtNlgsFsiy7Bogs7BGszHsHJsTC6+HZwOIZMpHLWmcmvVBYc2a/v1zlpz/B6y3TQI3T7peAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='롤링 배포' title='' src='/static/ad68c6c7ae30d230855af15c427aa1d2/ca1dc/Rolling-Deployment.png' srcset='/static/ad68c6c7ae30d230855af15c427aa1d2/e7570/Rolling-Deployment.png 170w,\n/static/ad68c6c7ae30d230855af15c427aa1d2/f46e7/Rolling-Deployment.png 340w,\n/static/ad68c6c7ae30d230855af15c427aa1d2/ca1dc/Rolling-Deployment.png 680w,\n/static/ad68c6c7ae30d230855af15c427aa1d2/02d09/Rolling-Deployment.png 1020w,\n/static/ad68c6c7ae30d230855af15c427aa1d2/248ed/Rolling-Deployment.png 1268w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>롤링 배포</figcaption>\n  </figure></p>\n<h4>장점</h4>\n<ul>\n<li>모두 완료되기 전, 기존 버전도 유지되기 때문에 신 버전에 문제가 생겼을 경우 롤백이 쉽습니다.</li>\n<li>추가적인 인스턴스가 필요하지 않아도 됩니다.</li>\n</ul>\n<h4>단점</h4>\n<ul>\n<li>무중단 배포가 진행되는 동안, 트래픽이 일부 인스턴스에 과도하게 몰릴 수 있습니다.</li>\n<li>기존 버전과 신 버전이 공존하는 시간이 존재하기에 호환성 문제가 발생할 수 있습니다.</li>\n</ul>\n<h3>블루/그린 배포</h3>\n<p>블루를 기존 버전, 그린을 신 버전으로 지칭합니다.</p>\n<p>신 버전의 새로운 인스턴스를 우선적으로 구성한 후에, 배포가 완료되면 트래픽을 한꺼번에 신 버전으로 라우팅하는 방식입니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/f3441e7f32be888af5b7b50b0c85eaa9/e0796/Blue-Green-Deployment.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVR42pWTzW7VMBCF7/siseSpkBB0xY4XYAMIhCo2pZfcNPcmTpz43/4YJym0G0pHsmLNGR+fOZ4cvA80bUvJmRomwhzWLUpNdOd+3Zey5W2ClCK/mhPe+xVzktOCZak55Biw07ACWs/cDIbGboTeLvhlWvfDOHGjPJ2r5AWjFTmlDRPen7PUi6YDx4/kNy/omlsWY9ekCVshX98Rr15xd1E450RdwYoKrIK3LzG3X7aLU2aJu0LGI3x/j7MGJSqa0XEWhfUc7TfKjw8YF+iVopG+hmpHWODTa47Xn/FyeW23NRBXhXtUD0MIXEzm7HbCB+Fj4mIzarVtQ6dp4nQ6YaShzt4TVrdLJsa4rkexYxtFwWUjlrh7BeSchLBl1AO+WGk5/1X4VKSSUOnMmPpH+anaNBzpU0ss4f8JayxJY/Oyi9/aNsYwzoqAk9yzFEZM1ut6GFmeth0adBlEYfw3YVVRhzfI8Dtv6U3HnKY/WB2lOrt3w4nONGTS04T1UF2V2Foxfv+j6kTM88ysNVpeu35r/W/MB1sM+WgWuAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='블루/그린 배포' title='' src='/static/f3441e7f32be888af5b7b50b0c85eaa9/ca1dc/Blue-Green-Deployment.png' srcset='/static/f3441e7f32be888af5b7b50b0c85eaa9/e7570/Blue-Green-Deployment.png 170w,\n/static/f3441e7f32be888af5b7b50b0c85eaa9/f46e7/Blue-Green-Deployment.png 340w,\n/static/f3441e7f32be888af5b7b50b0c85eaa9/ca1dc/Blue-Green-Deployment.png 680w,\n/static/f3441e7f32be888af5b7b50b0c85eaa9/02d09/Blue-Green-Deployment.png 1020w,\n/static/f3441e7f32be888af5b7b50b0c85eaa9/e0796/Blue-Green-Deployment.png 1263w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>블루/그린 배포</figcaption>\n  </figure></p>\n<h4>장점</h4>\n<ul>\n<li>신 버전을 동일한 환경의 새로운 인스턴스를 구성하여 미리 테스트할 수 있습니다.</li>\n<li>배포 도중이나 이후에 신 버전에 문제가 생겼을 경우, 기존 버전을 유지시킨다면 쉽게 복구할 수 있습니다.</li>\n<li>기존 버전과 공존하지 않기 때문에 호환성 문제가 발생하지 않습니다.</li>\n</ul>\n<h4>단점</h4>\n<ul>\n<li>배포를 위한 리소스가 두 배로 필요합니다.</li>\n</ul>\n<h3>카나리 배포</h3>\n<p>옛날 광부들이 유독 가스에 민감한 카나리아 새를 이용해 가스 누출 위험을 감지했던 것에서 유래한 것으로 잠재적 문제 상황을 미리 발견하기 위한 방식입니다.</p>\n<p>신 버전 배포 후 트래픽의 일부를 신 버전으로 라우팅 한 다음, 모니터링 및 피드백 과정을 거칠 수 있습니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/60d55bb41b63a6de8abec1fd2c421d02/e0796/Canary-Deployment.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVR42l1SuY7VMBR930tBxU8gCsQP0FEzQEWFGNEgBEyDhqkQM++9TFbv8e7DtZMBCUeOFOfe47Pcg/cBXT+g5Iy61ggY2qUUnO4HKG3auUsFwgO1ikuFbpjbecoF0pfWU9chxwCrePtQSuOWrejsBhjlgBw95nnC3cBw1HQhIRazIIsOZrU4ns44yoTR7oA4fUO+eIyxO0JTQWWyJmrK9Lp4BP71NWZpEVOCCRGpdn1/hfD2Ce6HCc45qOhgUtgBxQnl5j2cXcGFRCccJkeA9e/5CkmNGCeGfjmDpxEepE1PAPtFDB1ORESGBWtRO+C+SsnwIWAmevMDIDbp3nlop6Dyglg2JpnOA9Wb1ZCHHLZsXh9C8OBsRiQvM8n05JHLDQnTOMIYg0RyQ8wkebtICIG+7xFIrqd+Gw1d5DdAF4jRwlvKgtIblAOraVKnlALBexitcZ4lfpOq6q+3BkbJBiC1oEDOkJntkoefKJ9eYJl6AmbgbpdMFuDjU+ibS4xMwZBsEwvadFy/gf/wDBOTWAncFYtQ3A7YX6NcPgefR2IooSOHSrzGDHx5CXt31QAljYqIA5qDt5+Rf7yDMo56OM3nTOP0XygxRkpzxGR6or+0MFoo9Giaz1mOYJFSzg5/F5UYq8miCTqLf4CZ/FvJfGuJOoVTHjIm0DpO9V+dt1zyfp7brvV1l/2pgH8AvU1QOtE9NqcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='카나리 배포' title='' src='/static/60d55bb41b63a6de8abec1fd2c421d02/ca1dc/Canary-Deployment.png' srcset='/static/60d55bb41b63a6de8abec1fd2c421d02/e7570/Canary-Deployment.png 170w,\n/static/60d55bb41b63a6de8abec1fd2c421d02/f46e7/Canary-Deployment.png 340w,\n/static/60d55bb41b63a6de8abec1fd2c421d02/ca1dc/Canary-Deployment.png 680w,\n/static/60d55bb41b63a6de8abec1fd2c421d02/02d09/Canary-Deployment.png 1020w,\n/static/60d55bb41b63a6de8abec1fd2c421d02/e0796/Canary-Deployment.png 1263w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>카나리 배포</figcaption>\n  </figure></p>\n<h4>장점</h4>\n<ul>\n<li>신 버전 배포 이후 신 버전을 일부 사용자만이 경험할 수 있도록 조절할 수 있습니다.</li>\n<li>신 버전에 문제가 생겼을 경우 기존 버전으로 롤백이 쉽습니다.</li>\n</ul>\n<h4>단점</h4>\n<ul>\n<li>기존 버전과 신 버전이 공존하는 시간이 존재하기 때문에 호환성 문제가 발생할 수 있습니다.</li>\n</ul>\n<h3>Reference</h3>\n<blockquote>\n<ul>\n<li><a href=\"https://www.samsungsds.com/kr/insights/1256264_4627.html\">https://www.samsungsds.com/kr/insights/1256264_4627.html</a></li>\n<li><a href=\"https://hudi.blog/zero-downtime-deployment/\">https://hudi.blog/zero-downtime-deployment/</a></li>\n</ul>\n</blockquote>","frontmatter":{"title":"무중단 배포 이해하기","date":"October 20, 2023","update":null,"tags":["infra","zero-downtime-deployment"],"series":null},"fields":{"slug":"/zero-downtime-deployment/","readingTime":{"minutes":4.19}}},"seriesList":{"edges":[{"node":{"id":"a30ff988-ea74-5562-b241-90fbff73a3da","fields":{"slug":"/kissoft-retrospection/"},"frontmatter":{"title":"키스소프트 현장실습 회고"}}},{"node":{"id":"aedd8f5b-dd45-5a14-9b57-3a48cdc0b641","fields":{"slug":"/what-is-varargs/"},"frontmatter":{"title":"[Java] Varargs는 어떻게 사용하고, 사용했을 때 장점이 무엇일까?"}}},{"node":{"id":"d41198ca-d162-523b-84f8-128b247a19b4","fields":{"slug":"/apply-https/"},"frontmatter":{"title":"[셀럽잇] HTTPS 적용기"}}},{"node":{"id":"3b94cbd6-f64a-5d82-96a2-0761602c250b","fields":{"slug":"/dbcp/"},"frontmatter":{"title":"DBCP와 HikariCP 이해하기"}}},{"node":{"id":"c418073e-50be-5fe1-807d-478c9c47f640","fields":{"slug":"/zero-downtime-deployment/"},"frontmatter":{"title":"무중단 배포 이해하기"}}},{"node":{"id":"c5760ea9-e137-5edf-8244-3a93e25b067b","fields":{"slug":"/unit-test/"},"frontmatter":{"title":"단위 테스트 이해하기"}}},{"node":{"id":"8ae82b3f-5b72-555c-89fe-9939dcf8377c","fields":{"slug":"/using-junit-and-assertJ/"},"frontmatter":{"title":"JUnit과 AssertJ 활용법"}}},{"node":{"id":"91a7a622-00f8-5cca-b6c1-e4f7db7ee31e","fields":{"slug":"/about-tdd/"},"frontmatter":{"title":"TDD 이해하기"}}},{"node":{"id":"10e0dab4-d2e7-52df-8daa-31bfef1b08b6","fields":{"slug":"/static-with-memory-structure/"},"frontmatter":{"title":"static을 더 잘 사용하기"}}},{"node":{"id":"c773b0a0-9610-5605-bdb9-9089df57f52b","fields":{"slug":"/about-garbage-collection/"},"frontmatter":{"title":"JVM의 Garbage Collection과 동작 원리"}}},{"node":{"id":"0bf99b61-98a4-5c40-b8ce-05a918d212f7","fields":{"slug":"/garbage-collection-tuning/"},"frontmatter":{"title":"Garbage Collection 튜닝에 대해"}}},{"node":{"id":"61bd95c2-424a-54c8-96d9-bec4c8a4f58c","fields":{"slug":"/garbage-collection-algorithms/"},"frontmatter":{"title":"Garbage Collection 알고리즘"}}},{"node":{"id":"c87443bb-4e35-55e7-94d5-a5cb70d2dbc8","fields":{"slug":"/cautions-for-using-collections-in-Java/"},"frontmatter":{"title":"Java에서 컬렉션을 사용할 때 주의할 점"}}},{"node":{"id":"c2d7615d-6232-5fce-8794-f4c790106bb5","fields":{"slug":"/2023-retrospection/"},"frontmatter":{"title":"2023년 회고록"}}},{"node":{"id":"def28d41-907f-5432-8060-ed5429114882","fields":{"slug":"/compare-of-datetime-and-timestamp/"},"frontmatter":{"title":"[MySQL] DATETIME vs TIMESTAMP"}}},{"node":{"id":"9bf8ca89-e021-526b-a7b5-2cce0b1e366f","fields":{"slug":"/add-feat-and-issue-number-automatically/"},"frontmatter":{"title":"[git&github] IntelliJ에서 커밋 메시지 작성 시, 자동으로 커밋 타입과 이슈 번호 추가하기"}}},{"node":{"id":"01318426-7520-5a57-92ff-c917e1483247","fields":{"slug":"/difference-of-controller-and-restcontroller/"},"frontmatter":{"title":"[Spring] @Controller와 @RestController 비교하기"}}},{"node":{"id":"bc68fa05-ec4a-5e12-a9b8-4e58769887df","fields":{"slug":"/deploy-spring-boot-in-aws-ec2-manually/"},"frontmatter":{"title":"[Infra] AWS EC2에 Spring Boot 수작업으로 배포하기"}}},{"node":{"id":"122a1e9c-6fe5-5e7f-b797-a31f54d086b0","fields":{"slug":"/what-is-ami-architecture-of-ec2/"},"frontmatter":{"title":"CPU 아키텍처란?"}}},{"node":{"id":"c23a12ff-7b48-57ef-91ed-81f5386d680a","fields":{"slug":"/apply-issue-and-pr-template/"},"frontmatter":{"title":"[github] Github Repository에 Issue, PR Template 적용하기"}}},{"node":{"id":"b1dc584d-3c69-5ae8-82a8-09b015fa3d02","fields":{"slug":"/oauth-test/"},"frontmatter":{"title":"Spring Boot에서 Rest Assured로 인수 테스트할 때 OAuth 로그인 처리하기"}}},{"node":{"id":"9f43b8a7-b5ce-5766-b984-3ed0775d698f","fields":{"slug":"/ioc-container-and-di/"},"frontmatter":{"title":"[Spring] 스프링 컨테이너, 그리고 IoC/DI"}}},{"node":{"id":"e1b2a9fb-d6e3-5f65-9f50-d3a30c2518d1","fields":{"slug":"/what-is-jdbc/"},"frontmatter":{"title":"[Java] JDBC 마스터하기"}}},{"node":{"id":"81b7fb10-f532-5f48-a797-379c3bb99bee","fields":{"slug":"/understanding-transaction-and-concurrency-problem/"},"frontmatter":{"title":"[MySQL] 트랜잭션과 트랜잭션 격리 수준"}}},{"node":{"id":"5ecb4a12-dc98-589f-94e0-695fb2d84fab","fields":{"slug":"/restore-using-binarylog/"},"frontmatter":{"title":"[MySQL] 바이너리 로그로 데이터 복구하기"}}},{"node":{"id":"c375e6a2-7e6c-5607-a579-04d3ab5f3188","fields":{"slug":"/understanding-generic/"},"frontmatter":{"title":"[Java] 제네릭 이해하기"}}},{"node":{"id":"83ad74c1-0d46-5f86-92fc-998642e4367d","fields":{"slug":"/covariant-invariant-and-pecs/"},"frontmatter":{"title":"[Java] 배열의 공변, 제네릭의 불공변. 그리고 PECS"}}},{"node":{"id":"7b9b6854-62e7-5f25-afbf-d5459fa5d021","fields":{"slug":"/commands-of-docker/"},"frontmatter":{"title":"[Docker] 도커의 기본적인 명령어들"}}},{"node":{"id":"d77e8b24-f01d-5673-8c55-d93e2d110c4f","fields":{"slug":"/enhance-speed-ci-workflow/"},"frontmatter":{"title":"[Infra] Github Actions를 이용한 CI 작업 속도를 캐싱으로 개선하기"}}},{"node":{"id":"b4550a40-b215-5e9a-a6a7-8c27bfb63e25","fields":{"slug":"/continuous-deploy-using-github-actions-and-docker/"},"frontmatter":{"title":"[Infra] Github Actions와 Docker를 이용해 배포 자동화 구축하기"}}},{"node":{"id":"e38bb1ed-1a51-5947-a1d2-52aaae42ac97","fields":{"slug":"/build-monitoring-system/"},"frontmatter":{"title":"[Infra] Prometheus와 Grafana, 그리고 Docker를 이용해 모니터링 대시보드 구축하기"}}},{"node":{"id":"32c6a1e4-f349-5a2a-991c-1ea625582325","fields":{"slug":"/june-3rd/"},"frontmatter":{"title":"[회고] 06.10 ~ 06.16"}}}]},"previous":{"fields":{"slug":"/dbcp/"},"frontmatter":{"title":"DBCP와 HikariCP 이해하기"}},"next":{"fields":{"slug":"/zero-downtime-deployment-of-celuveat/"},"frontmatter":{"title":"[셀럽잇] 무중단 배포 적용기"}}},"pageContext":{"id":"c418073e-50be-5fe1-807d-478c9c47f640","series":null,"previousPostId":"3b94cbd6-f64a-5d82-96a2-0761602c250b","nextPostId":"c012b5ff-fef6-580b-b390-b16f9d809616"}},"staticQueryHashes":[],"slicesMap":{}}