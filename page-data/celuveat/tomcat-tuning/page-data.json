{"componentChunkName":"component---src-templates-blog-post-js","path":"/celuveat/tomcat-tuning/","result":{"data":{"site":{"siteMetadata":{"title":"김동호 블로그"}},"markdownRemark":{"id":"441d9ebc-c6c4-5aa6-b9b9-ecfecf3f5acf","excerpt":"사용자 유치 전, 서버 성능 개선을 위해 Tomcat 성능 최적화를 진행하려고 합니다. 그 과정에서 설정할 값들인 , , 에 대해 이해하려고 합니다. Max-Threads JVM 기반에서 동작하는 Tomcat은 HTTP…","html":"<p>사용자 유치 전, 서버 성능 개선을 위해 Tomcat 성능 최적화를 진행하려고 합니다.</p>\n<p>그 과정에서 설정할 값들인 <code class=\"language-text\">Max-Threads</code>, <code class=\"language-text\">Max-Connections</code>, <code class=\"language-text\">Accept-Count</code>에 대해 이해하려고 합니다.</p>\n<h2 id=\"max-threads\" style=\"position:relative;\"><a href=\"#max-threads\" aria-label=\"max threads permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Max-Threads</h2>\n<p>JVM 기반에서 동작하는 Tomcat은 HTTP 요청을 받으면, 각 요청을 하나의 쓰레드가 처리하도록 동작합니다.</p>\n<p>이 <code class=\"language-text\">Max-Threads</code> 설정은 Tomcat에서 최대 몇 개까지의 쓰레드를 동작시킬 것인지 설정하는 옵션입니다.</p>\n<p>즉, 동시에 최대 몇 개의 요청을 처리할 것인지에 대한 설정입니다.</p>\n<p>default 값은 200 입니다.</p>\n<h2 id=\"max-connections\" style=\"position:relative;\"><a href=\"#max-connections\" aria-label=\"max connections permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Max-Connections</h2>\n<p>HTTP 요청을 수락하고 처리할 수 있는 최대 Connection의 수에 대한 설정입니다.</p>\n<p>설정 수치에 도달하면, 추가 요청에 대해 Accept는 하지만 처리하진 않습니다.</p>\n<p>Accept된 Connection은 현재 처리 중인 Connection의 수가 <code class=\"language-text\">Max-Connections</code>보다 아래로 떨어질 때까지 Block 됩니다.</p>\n<p>Block 된 요청은 <code class=\"language-text\">Accept-Count</code> 수 만큼 존재할 수 있습니다.</p>\n<p>default 값은 8192 입니다.</p>\n<h2 id=\"accept-count\" style=\"position:relative;\"><a href=\"#accept-count\" aria-label=\"accept count permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Accept-Count</h2>\n<p><code class=\"language-text\">Max-Connections</code> 보다 더 많은 요청이 들어오게 되어 요청을 Block 하면, 운영체제는 Block 된 요청을 대기 큐에 대기시킵니다.</p>\n<p>이때, 대기 큐의 Size가 <code class=\"language-text\">Accept-Count</code> 입니다.</p>\n<p>위 크기보다도 더 많은 요청이 들어오게 된다면, 운영체제가 해당 요청을 거절하거나 Connection Time Out이 발생하게 됩니다.</p>\n<h2 id=\"그렇다면-어떤-식으로-조절할까\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%A0%87%EB%8B%A4%EB%A9%B4-%EC%96%B4%EB%96%A4-%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EC%A1%B0%EC%A0%88%ED%95%A0%EA%B9%8C\" aria-label=\"그렇다면 어떤 식으로 조절할까 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그렇다면 어떤 식으로 조절할까?</h2>\n<p>현재 vUser를 300명으로 했을 때를 가정하여 부하 테스트를 진행하고 있습니다.</p>\n<p>그 결과 아래와 같은 최적의 값이 도출되는 것을 확인할 수 있었습니다.</p>\n<ul>\n<li>Max-Threads: 300</li>\n<li>Max-Connection: 8192 (default)</li>\n<li>Accept-Count: 10 (default)</li>\n</ul>\n<blockquote>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.65 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tomcat.apache.org/tomcat-8.5-doc/config/http.html\">톰캣 공식문서</a></li>\n</ul>\n</blockquote>","tableOfContents":"<ul>\n<li><a href=\"#max-threads\">Max-Threads</a></li>\n<li><a href=\"#max-connections\">Max-Connections</a></li>\n<li><a href=\"#accept-count\">Accept-Count</a></li>\n<li><a href=\"#%EA%B7%B8%EB%A0%87%EB%8B%A4%EB%A9%B4-%EC%96%B4%EB%96%A4-%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EC%A1%B0%EC%A0%88%ED%95%A0%EA%B9%8C\">그렇다면 어떤 식으로 조절할까?</a></li>\n</ul>","frontmatter":{"title":"[셀럽잇] Tomcat 성능 최적화를 위해 Max-Threads, Max-Connections, Accept-Count 설정하기","date":"2023년 9월 9일","description":"[셀럽잇] Tomcat 성능 최적화를 위해 Max-Threads, Max-Connections, Accept-Count 설정하기","tags":["셀럽잇","tomcat"]}},"previous":{"fields":{"slug":"/celuveat/oauth-logout-and-withdraw/"},"frontmatter":{"title":"[셀럽잇] OAuth 2.0 로그아웃 구현"}},"next":{"fields":{"slug":"/데이터베이스/dbcp/"},"frontmatter":{"title":"DBCP와 HikariCP 이해하기"}}},"pageContext":{"id":"441d9ebc-c6c4-5aa6-b9b9-ecfecf3f5acf","previousPostId":"08824420-16ca-5fa4-a465-8433c660132d","nextPostId":"305f689f-4f73-5547-acfd-86fe3e636c6a"}},"staticQueryHashes":["2841359383","3414707483","3539066558"],"slicesMap":{}}