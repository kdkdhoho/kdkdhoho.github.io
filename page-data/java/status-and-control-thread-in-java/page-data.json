{"componentChunkName":"component---src-templates-blog-post-js","path":"/java/status-and-control-thread-in-java/","result":{"data":{"site":{"siteMetadata":{"title":"내가 재밌는 일을 하자 !"}},"markdownRemark":{"id":"74dffee4-b519-52e9-9ce1-5ba2088555df","excerpt":"들어가며 지난 글에는 Java에서 쓰레드를 구현하고 실행하는 방법, Main…","html":"<h2>들어가며</h2>\n<p>지난 글에는 Java에서 쓰레드를 구현하고 실행하는 방법, Main 쓰레드, 쓰레드의 우선순위, 쓰레드 그룹, 데몬 쓰레드에 대해 알아보았다.</p>\n<p>이번 글에서는 쓰레드를 다루고 사용함에 있어 중요한 <strong>쓰레드의 상태</strong>와 <strong>쓰레드의 행동을 제어하는 메서드</strong>들에 대해 알아보겠다.</p>\n<h2>쓰레드의 실행제어</h2>\n<p>사실상 쓰레드를 사용함에 있어 핵심이 되는 부분이라고 생각한다.<br>\n쓰레드를 생성하고 사용하는 것은 어렵지 않다. 하지만 개발자가 의도한대로 동작하는 것은 어렵다.<br>\n개발자가 의도한대로 동작한다는 의미는, 동기화(synchronization)와 스케줄링(scheduling)을 한다는 말인데 스케줄링을 효율적으로 수행하면서 여러 쓰레드가 동시성 문제를 일으키지 않도록 동기화를 하는 것은 중요하면서 쉽지 않다.</p>\n<p>스케줄링을 잘하기 위해선 <strong>쓰레드의 상태</strong>와 <strong>관련 메서드</strong>를 잘 알아야 한다.</p>\n<h2>쓰레드 상태</h2>\n<p>우선 쓰레드의 상태에 대해 알아보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Thread</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n   \n      <span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">State</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token constant\">NEW</span><span class=\"token punctuation\">,</span>\n        <span class=\"token constant\">RUNNABLE</span><span class=\"token punctuation\">,</span>\n        <span class=\"token constant\">BLOCKED</span><span class=\"token punctuation\">,</span>\n        <span class=\"token constant\">WAITING</span><span class=\"token punctuation\">,</span>\n        <span class=\"token constant\">TIMED_WAITING</span><span class=\"token punctuation\">,</span>\n        <span class=\"token constant\">TERMINATED</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>쓰레드의 상태에는 총 6가지가 있다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">상태</th>\n<th align=\"center\">설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">NEW</td>\n<td align=\"center\">쓰레드가 생성되고 아직 <code class=\"language-text\">start()</code>가 호출되지 않은 상태</td>\n</tr>\n<tr>\n<td align=\"center\">RUNNABLE</td>\n<td align=\"center\">실행 가능하거나 실행 중인 상태</td>\n</tr>\n<tr>\n<td align=\"center\">BLOCKED</td>\n<td align=\"center\">락을 획득하기 위해 대기 중인 상태</td>\n</tr>\n<tr>\n<td align=\"center\">WAITING</td>\n<td align=\"center\">무기한으로 다른 쓰레드를 대기 중인 상태</td>\n</tr>\n<tr>\n<td align=\"center\">TIMED_WAITING</td>\n<td align=\"center\">지정된 시간동안 다른 쓰레드를 대기 중인 상태</td>\n</tr>\n<tr>\n<td align=\"center\">TERMINATED</td>\n<td align=\"center\">쓰레드의 작업이 종료된 상태</td>\n</tr>\n</tbody>\n</table>\n<h2>상태 관련 메서드</h2>\n<p>다음으로 상태 관련 메서드에 대해 알아보자.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">메서드</th>\n<th align=\"center\">설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">static void sleep(long millis)<br/>static void sleep(long millis, int nanos)</td>\n<td align=\"center\">쓰레드를 지정한 시간동안 일시정지(WAITING, TIMED_WAITING, BLOCKED)시킨다.<br/>지정한 시간이 지나면, 다시 RUNNABLE 상태가 된다.</td>\n</tr>\n<tr>\n<td align=\"center\">void join()<br/>void join(long millis)<br/>void join(long millis, int nanos)</td>\n<td align=\"center\">특정 쓰레드를 지정한 시간동안 실행한다.<br/>지정된 시간이 지나거나 작업이 종료되면 <code class=\"language-text\">join()</code>을 호출한 쓰레드로 다시 돌아와 실행을 계속한다.<br/>시간을 지정하지 않으면 작업이 종료될 때까지 대기한다.</td>\n</tr>\n<tr>\n<td align=\"center\">void interrupt()</td>\n<td align=\"center\"><code class=\"language-text\">sleep()</code>이나 <code class=\"language-text\">join()</code>에 의해 WAITING 상태가 된 쓰레드를 깨워 RUNNABLE 상태로 만든다.<br/>해당 쓰레드는 InterruptedException을 발생함으로써 일시정지상태를 벗어나게 된다.</td>\n</tr>\n<tr>\n<td align=\"center\">static void yield()</td>\n<td align=\"center\">실행 중, 자신에게 주어진 실행시간을 다른 쓰레드에게 양보하고 자신은 RUNNABLE 상태가 된다.</td>\n</tr>\n<tr>\n<td align=\"center\">(deprecated) void stop()</td>\n<td align=\"center\">쓰레드를 즉시 종료시킨다.</td>\n</tr>\n<tr>\n<td align=\"center\">(deprecated) void suspend()</td>\n<td align=\"center\">쓰레드를 일시정지시킨다.<br/><code class=\"language-text\">resume()</code>을 호출하면 다시 RUNNABLE 상태가 된다.</td>\n</tr>\n<tr>\n<td align=\"center\">(deprecated) resume()</td>\n<td align=\"center\"><code class=\"language-text\">suspend()</code>에 의해 일시정지상태에 있는 쓰레드를 RUNNABLE 상태로 만든다.</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>참고) stop(), suspend(), resume()은 쓰레드를 교착상태로 만들기 쉽기 때문에 deprecate 됐다.</p>\n</blockquote>\n<h3>Thread의 LifeCycle</h3>\n<p>쓰레드의 라이프사이클을 그려보았다.<br>\n항상 쓰레드가 번호 순서대로 동작한다는 보장은 없지만, 모든 경우를 한 번 씩 거친다는 가정하에 순서를 매겨보았다.<br>\n사진을 클릭하면 깔끔하게 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e9369a35abd8542649a9de1857bd2d01/a2510/thread-status-in-jvm.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 168.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAiABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH38iiVidwU5jqAD//EABkQAQEBAQEBAAAAAAAAAAAAAAARASESIP/aAAgBAQABBQJXp2qiONuM2u/H/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAFxAAAwEAAAAAAAAAAAAAAAAAECAxQf/aAAgBAQAGPwIRKuJ//8QAGxAAAwADAQEAAAAAAAAAAAAAAAERITFBEGH/2gAIAQEAAT8hbSHE+ljJmsCieYmxI9NF8imm6y/AyODK0Y98Sef/2gAMAwEAAgADAAAAECDHAPPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxBf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxBf/8QAHhABAQACAgIDAAAAAAAAAAAAAREAMSFBUWEQcdH/2gAIAQEAAT8QUBd4RW6hMppvnf5nJCOpGmKCw494FVHpxUVEq+DjWDBUHIvTgxsenKSsDvdzdBNcYFIFbEjiCRLgNAPo+P/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"thread status in jvm\"\n        title=\"\"\n        src=\"/static/e9369a35abd8542649a9de1857bd2d01/828fb/thread-status-in-jvm.jpg\"\n        srcset=\"/static/e9369a35abd8542649a9de1857bd2d01/ff44c/thread-status-in-jvm.jpg 158w,\n/static/e9369a35abd8542649a9de1857bd2d01/a6688/thread-status-in-jvm.jpg 315w,\n/static/e9369a35abd8542649a9de1857bd2d01/828fb/thread-status-in-jvm.jpg 630w,\n/static/e9369a35abd8542649a9de1857bd2d01/0ede0/thread-status-in-jvm.jpg 945w,\n/static/e9369a35abd8542649a9de1857bd2d01/a2510/thread-status-in-jvm.jpg 1000w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>sleep(long millis) - 일정 시간동안 대기한다.</h2>\n<p><code class=\"language-text\">static void sleep(long millis)</code> 메서드는 쓰레드를 일정 시간동안 일시정지 상태로 만든다.<br>\n일지정지된 쓰레드는 주어진 시간이 모두 지나거나(time-out) 또는 <code class=\"language-text\">interrupt()</code>가 호출되면 <code class=\"language-text\">InterruptedExcepion</code>이 발생되고 실행대기 상태가 된다.</p>\n<p>주어진 시간이 모두 지났을 때에는 <code class=\"language-text\">InterruptedExcepion</code>이 발생하지 않고 <code class=\"language-text\">Runnable</code> 상태가 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Start\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MyThread1</span> myThread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Init State ==> \"</span> <span class=\"token operator\">+</span> myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyThread1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Before Sleep ==> \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 5초간 sleep</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] After Sleep ==> \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Interrupted ==> \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span> <span class=\"token class-name\">Console</span> <span class=\"token operator\">==</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">07</span><span class=\"token operator\">:</span><span class=\"token number\">02.812505</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">Start</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">07</span><span class=\"token operator\">:</span><span class=\"token number\">02.818183</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">Init</span> <span class=\"token class-name\">State</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token constant\">NEW</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">07</span><span class=\"token operator\">:</span><span class=\"token number\">02.825393</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">Before</span> <span class=\"token class-name\">Sleep</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token constant\">RUNNABLE</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">07</span><span class=\"token operator\">:</span><span class=\"token number\">07.829930</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">After</span> <span class=\"token class-name\">Sleep</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token constant\">RUNNABLE</span></code></pre></div>\n<ol>\n<li>위 코드를 실행하면 곧바로 \"Init State ==> NEW\"와 \"Before Sleep ==> RUNNABLE\"이 출력되고 5초 뒤에 \"After Sleep ==> RUNNABLE\" 이 출력된다.<br></li>\n<li><code class=\"language-text\">myThread1</code>이 생성되어 <em>NEW</em> 상태가 되고 <code class=\"language-text\">start()</code> 메서드 호출로 <em>RUNNABLE</em> 상태로 바뀐다.<br></li>\n<li>그리고 본인의 차례가 되면 <code class=\"language-text\">run()</code> 메서드가 호출되어 작업을 시작한다.<br></li>\n<li><code class=\"language-text\">run()</code> 안에서 <code class=\"language-text\">sleep()</code>을 호출하기 전 상태는 <em>RUNNABLE</em> 이고, <code class=\"language-text\">sleep()</code>이 호출되어 쓰레드는 동작을 멈추게 된다.</li>\n<li>5초가 지나면 RUNNABLE 상태로 바뀐다. 따라서 다음 코드를 수행할 수 있게 된다.<br>결과적으로 \"After Sleep ==> RUNNABLE\" 이 출력된다.</li>\n</ol>\n<br>\n<p>그럼 <code class=\"language-text\">MyThread</code>를 실행하고 3초 뒤에 <code class=\"language-text\">interrupt()</code>를 호출해보면 어떻게 될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Start\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MyThread1</span> myThread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Init State ==> \"</span> <span class=\"token operator\">+</span> myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyThread1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Before Sleep ==> \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 5초간 sleep</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] After Sleep ==> \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"] Interrupted ==> \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span> <span class=\"token class-name\">Console</span> <span class=\"token operator\">==</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">06</span><span class=\"token operator\">:</span><span class=\"token number\">30.126652</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">Start</span> \n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">06</span><span class=\"token operator\">:</span><span class=\"token number\">30.136039</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">Init</span> <span class=\"token class-name\">State</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token constant\">NEW</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">06</span><span class=\"token operator\">:</span><span class=\"token number\">30.143565</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">Before</span> <span class=\"token class-name\">Sleep</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token constant\">RUNNABLE</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2024</span><span class=\"token operator\">-</span><span class=\"token number\">07</span><span class=\"token operator\">-</span><span class=\"token number\">03</span><span class=\"token constant\">T19</span><span class=\"token operator\">:</span><span class=\"token number\">06</span><span class=\"token operator\">:</span><span class=\"token number\">33.145258</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">Interrupted</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token constant\">RUNNABLE</span></code></pre></div>\n<p>\"Before Sleep ==> RUNNABLE\" 까지는 위와 동일하다.<br>\n하지만 3초 뒤에 <code class=\"language-text\">myThread1.interrupt()</code>을 호출하니 \"Interrupted ==> RUNNABLE\"가 출력되었다.<br>\n<code class=\"language-text\">InterruptedException</code>이 발생하는 것을 확인할 수 있다.</p>\n<br>\n<p><code class=\"language-text\">sleep()</code>을 사용할 때 한 가지 주의할 점이 있다.<br>\n아래 예시 코드를 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">MyThread1</span> myThread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MyThread2</span> myThread2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        myThread2<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// myThread1에게 2초간 sleep 시킨다.</span>\n        myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[Th-main] 종료 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyThread1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[Th-1] 종료 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyThread2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[Th-2] 종료 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span> <span class=\"token class-name\">Console</span> <span class=\"token operator\">==</span>\n<span class=\"token number\">111111222222222222222222222222222221122211111111111222222221111111111111111111111111</span>\n<span class=\"token number\">122222222222222222222222222222222221222222111221111111122222222222222222222222222222</span>\n<span class=\"token number\">222211111111111111111111111111111111111111111111111111111111111111222222222222211111</span>\n<span class=\"token number\">111111112222222222222222222222222211111111111222222222221122222222222222222222222222</span>\n<span class=\"token number\">222222221111111111111111111111111111111111122222222222222222112222222221111111111111</span>\n<span class=\"token number\">111111111111111111111111222222222222222222222222222222222211111121222222222211122222</span>\n<span class=\"token number\">2222221122222222222222222221</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Th</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> 종료 <span class=\"token number\">111111111111111111111111111111111111111111111</span>\n<span class=\"token number\">11111111111111111111111</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Th</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> 종료 <span class=\"token punctuation\">[</span><span class=\"token class-name\">Th</span><span class=\"token operator\">-</span>main<span class=\"token punctuation\">]</span> 종료 </code></pre></div>\n<p>위 코드를 살펴보면, <code class=\"language-text\">myThread1</code>과 <code class=\"language-text\">myThread2</code>를 실행하고, <code class=\"language-text\">myThread1.sleep(2 * 1000)</code>을 호출하여 <code class=\"language-text\">Thread1</code>에게 2초간 대기 상태에 빠지도록 했다.<br>\n하지만 여러 번 반복 실행해도 매번 <strong>[Th-main]이 맨 나중에 끝난다.</strong><br>\n정작 [Th-1]은 제일 먼저 끝나는 경우도 발생한다.<br>\n왜 이런 현상이 발생할까?</p>\n<p>이유는 바로 <strong><code class=\"language-text\">sleep()</code> 메서드는 현재 실행 중인 쓰레드에 대해 동작</strong>하기 때문이다.<br>\n즉, 아래 두 코드가 동일한 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">myThread1<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이러한 이유로 <code class=\"language-text\">sleep()</code> 메서드는 static으로 선언되어 있으며, 참조변수를 이용해서 <code class=\"language-text\">sleep()</code>을 호출하기 보단 <strong>가급적 <code class=\"language-text\">Thread.sleep()</code>을 통해 호출하는 것이 권장</strong>된다.</p>\n<p><code class=\"language-text\">MyThread1</code>에 <code class=\"language-text\">sleep</code>을 걸고 싶으면 <code class=\"language-text\">MyThread1</code>에서 <code class=\"language-text\">sleep()</code>을 호출해야 한다.</p>\n<h2>interrupt()와 interrupted() - 쓰레드의 작업을 취소한다.</h2>\n<p><strong><code class=\"language-text\">interrupt()</code>는 쓰레드에게 작업을 멈추라고 요청</strong>한다.<br>\n하지만 요청만 할 뿐, 강제로 멈추게 할 수는 없다.<br>\n그저 <code class=\"language-text\">Thread</code>의 인스턴스 변수인 <code class=\"language-text\">boolean interrupted</code> 값을 바꿀 뿐이다.</p>\n<p><code class=\"language-text\">boolean interrupted</code> 값을 확인하는 방법으로는 <code class=\"language-text\">boolean isInterrupted()</code>와 <code class=\"language-text\">static boolean interrupted()</code>가 있다.\n둘의 차이로, <code class=\"language-text\">isInterrupted()</code>의 경우 단순히 <code class=\"language-text\">boolean interrupted</code> 값을 반환하지만,\n<code class=\"language-text\">Thread.interrupted()</code>는 만약 <code class=\"language-text\">boolean interrupted</code> 값이 <code class=\"language-text\">true</code> 일 경우, 현재의 값을 반환하면서 값을 <code class=\"language-text\">false</code>로 설정한다.<br>\n그리고 <strong><code class=\"language-text\">Thread.interrupted()</code>는 메서드를 호출하는 현재 쓰레드를 대상으로 동작</strong>한다.</p>\n<p>쓰레드가 <code class=\"language-text\">sleep()</code>, <code class=\"language-text\">wait()</code>, <code class=\"language-text\">join()</code> 에 의해 일시정지 상태에 있을 때, 해당 쓰레드에 <code class=\"language-text\">interrupt()</code>를 호출하면 <code class=\"language-text\">InterruptedException</code>이 발생하고 쓰레드는\nRUNNABLE 상태로 바뀐다. 그리고 동시에 <code class=\"language-text\">interrupted</code> 상태는 <code class=\"language-text\">false</code>로 초기화된다.</p>\n<p>아래 코드로 이해해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>swing<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">MyThread</span> myThread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        myThread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">String</span> input <span class=\"token operator\">=</span> <span class=\"token class-name\">JOptionPane</span><span class=\"token punctuation\">.</span><span class=\"token function\">showInputDialog</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"아무 값이나 입력하세요.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"입력값: \"</span> <span class=\"token operator\">+</span> input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        myThread<span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isInterrupted: \"</span> <span class=\"token operator\">+</span> myThread<span class=\"token punctuation\">.</span><span class=\"token function\">isInterrupted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyThread</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isInterrupted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"InterruptedException 발생!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"카운트 종료\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span> <span class=\"token class-name\">Console</span> <span class=\"token operator\">==</span>\n<span class=\"token number\">10</span>\n<span class=\"token number\">9</span>\n<span class=\"token number\">8</span>\n<span class=\"token number\">7</span>\n입력값<span class=\"token operator\">:</span> abcd\n<span class=\"token class-name\">InterruptedException</span> 발생<span class=\"token operator\">!</span>\n<span class=\"token number\">6</span>\nisInterrupted<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token number\">5</span>\n<span class=\"token number\">4</span>\n<span class=\"token number\">3</span>\n<span class=\"token number\">2</span>\n<span class=\"token number\">1</span>\n카운트 종료</code></pre></div>\n<ol>\n<li><code class=\"language-text\">MyThread</code>는 i를 출력하고 값을 1 감소한다.<br></li>\n<li>그리고 <code class=\"language-text\">Thread.sleep(1000)</code> 으로 1초간 <code class=\"language-text\">TIMED_WAITING</code> 상태가 된다.<br></li>\n<li>사용자의 입력이 주어지기 전까지는 <code class=\"language-text\">interrupt()</code> 가 발생되지 않기에 1초가 지나면 <code class=\"language-text\">InterruptedException</code>는 발생하지 않고 자동으로 <code class=\"language-text\">RUNNABLE</code> 상태로 변경된다.</li>\n<li>만약 이때, 사용자의 입력이 주어지면 <code class=\"language-text\">interrupt()</code>가 호출되어 <em>\"isInterrupted: true\"</em> 가 출력된다.</li>\n<li>하지만 while문은 종료되지 않는다.</li>\n<li>이유는, <code class=\"language-text\">Thread.sleep(1000)</code> 으로 <code class=\"language-text\">TIMED_WAITING</code> 상태인 와중에, <code class=\"language-text\">interrupt()</code>가 호출되었기 때문에 **<code class=\"language-text\">InterruptedException</code>가 발생하면서</li>\n</ol>\n<p>동시에 <code class=\"language-text\">interrupted</code> 상태는 <code class=\"language-text\">false</code>로 초기화**되기 때문이다.\n따라서 <code class=\"language-text\">break</code>로 해당 while문을 탈출하거나, <strong>catch문 안에 <code class=\"language-text\">interrupt()</code>를 호출하여 쓰레드 본인의 <code class=\"language-text\">interrupted</code> 상태를 <code class=\"language-text\">true</code>로 바꿔줘야 한다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>yield() - 다른 쓰레드에게 양보한다.</h2>\n<p><code class=\"language-text\">yield()</code>는 자신의 실행 시간을 다음 차례의 쓰레드에게 양보하고, 자신은 RUNNABLE 상태로 돌아간다.<br>\n<strong><code class=\"language-text\">yield()</code>를 적절히 사용하면 프로그램의 응답성을 높이고 효율적인 멀티 쓰레딩 프로그램을 작성</strong>할 수 있다.<br>\n실제로 <code class=\"language-text\">yield()</code>를 사용해서 효율을 높인 예시 코드를 살펴보자.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">MyThread</span> thread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MyThread</span> thread2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MyThread</span> thread3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"***\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread2<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread3<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            thread1<span class=\"token punctuation\">.</span><span class=\"token function\">suspend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            thread2<span class=\"token punctuation\">.</span><span class=\"token function\">suspend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            thread1<span class=\"token punctuation\">.</span><span class=\"token function\">resume</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            thread1<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            thread2<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            thread3<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyThread</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Thread</span> thread<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> stopped <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> suspended <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyThread</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>thread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> thread<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stopped<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// stopped 될 때까지 무한정 실행</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>suspended<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// suspend 상태가 아니면</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// name 출력</span>\n\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1초 대기</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" - interruped !!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// suspend 상태이면</span>\n                <span class=\"token comment\">// yield() 호출</span>\n                <span class=\"token comment\">// 만약, yield()를 호출하지 않으면 무한정 while 문을 반복한다.</span>\n                <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">yield</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" - stopped\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">suspend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        suspended <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>thread<span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>thread<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" - interrupt() by suspend()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        stopped <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>thread<span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>thread<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" - interrupt() by stop()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">resume</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        suspended <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>thread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">suspend()</code>와 <code class=\"language-text\">stop()</code>, <code class=\"language-text\">resume()</code>은 교착상태를 유발하기에 deprecated 되었지만, <code class=\"language-text\">yield()</code>를 잘 이해하기 위해 사용했다.<br></p>\n<p>위 코드에서 중점적으로 봐야할 것은 Main 메서드의 로직보다는 <code class=\"language-text\">MyThread</code>의 로직이다.<br></p>\n<p><code class=\"language-text\">MyThread</code>는 <em>stopped</em> 가 되기 전까지는 name을 출력하고 1초간 대기하는 작업을 무한히 수행한다.<br>\n하지만 이때, <em>suspended</em> 상태에 따라 행동이 달라진다.<br>\n만약, <code class=\"language-text\">suspend()</code>가 호출되어 잠시 일시정지 상태가 되었을 때, 출력을 하지 않는다.<br>\n더이상 while문을 돌 필요가 없게 된 것이다.<br>\n따라서 <code class=\"language-text\">suspended</code>가 <code class=\"language-text\">false</code>가 될 때까지 다른 쓰레드에게 작업을 양보하는 것이 효율적일 것이다.</p>\n<p>실제로 위 코드에서 <code class=\"language-text\">yield()</code> 메서드를 호출하는 부분을 주석처리해보면, 프로그램이 비효율적으로 동작하는 것을 확인할 수 있다.</p>\n<h2>join() - 다른 쓰레드의 작업을 기다린다.</h2>\n<p><code class=\"language-text\">join()</code> 메서드를 호출하는 쓰레드 자신이, 하던 작업을 멈추고 특정 쓰레드에게 지정된 시간동안 작업을 수행하도록 본인은 WAITING 상태로 대기할 때 사용한다.<br>\n시간을 지정하지 않으면, 특정 쓰레드의 작업이 모두 끝날 때까지 대기한다.</p>\n<p><code class=\"language-text\">join()</code>도 <code class=\"language-text\">sleep()</code> 처럼 <code class=\"language-text\">interrupt()</code>로 WAITING 상태에서 RUNNABLE 상태로 된다.<br>\n둘의 차이로, <strong><code class=\"language-text\">join()</code> 메서드는 대상이 현재 쓰레드가 아닌 다른 특정 쓰레드에 대해서 동작한다</strong>는 점이다.<br>\n이때문에 static 메서드가 아니다.</p>\n<p>이번에도 예시 코드를 살펴보자.</p>\n<p>아래 코드는 300번 동안 각자의 문자열을 출력하는 <code class=\"language-text\">Thread1</code>과 <code class=\"language-text\">Thread2</code>가 있을 때<br>\nmain 쓰레드가 <code class=\"language-text\">Thread1</code>과 <code class=\"language-text\">Thread2</code>의 작업이 끝날 때까지 대기하기 위해 <code class=\"language-text\">join()</code> 메서드를 호출하는 코드이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread1</span> thread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Thread2</span> thread2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread2<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">long</span> startTime <span class=\"token operator\">=</span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentTimeMillis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            thread1<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// main 쓰레드가 thread1의 작업이 끝날 때까지 기다린다.</span>\n            thread2<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// main 쓰레드가 thread2의 작업이 끝날 때까지 기다린다.</span>\n            <span class=\"token comment\">// thread1과 thread2에 join() 했기 때문에, main 쓰레드는 바로 종료되지 않는다.</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">long</span> endTime <span class=\"token operator\">=</span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentTimeMillis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"소요시간: \"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>endTime <span class=\"token operator\">-</span> startTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Thread1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Thread2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"|\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span> <span class=\"token class-name\">Consele</span> <span class=\"token operator\">==</span>\n소요시간<span class=\"token operator\">:</span> <span class=\"token number\">8</span></code></pre></div>\n<p>위 코드를 실행하면 실행 시간이 매번 0 이상의 값이 나올 것이다.<br>\n만약 <code class=\"language-text\">join()</code> 관련 코드를 모두 주석처리 한 다음 실행해보면, 항상 0이 출력되는 것을 확인할 수 있다.</p>\n<p>이번에는 <code class=\"language-text\">join()</code> 메서드를 사용하는 다른 예시로, 가비지 콜렉터를 데몬 쓰레드로 만들어본 코드를 통해 <code class=\"language-text\">sleep()</code>, <code class=\"language-text\">interrupt()</code>, <code class=\"language-text\">join()</code> 을 사용하는 법에 대해 이해해보자.<br>\n자세한 설명은 주석을 참고하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">GarbageCollector</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">MAX_MEMORY</span> <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> usedMemory <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">GarbageCollector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setDaemon</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 10초 주기로 실행한다.</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Awaken by interrupt()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token function\">gc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 로직을 수행한다.</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Garbage Collected. Free Memory : \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">freeMemory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 결과를 출력한다.</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">gc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        usedMemory <span class=\"token operator\">-=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>usedMemory <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            usedMemory <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">totalMemory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">MAX_MEMORY</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">freeMemory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">MAX_MEMORY</span> <span class=\"token operator\">-</span> usedMemory<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">GarbageCollector</span> gc <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GarbageCollector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        gc<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">int</span> requiredMemory <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            requiredMemory <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 필요한 메모리가 사용할 수 있는 양보다 크거나, 전체 메모리의 60% 이상을 사용했을 경우</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gc<span class=\"token punctuation\">.</span><span class=\"token function\">freeMemory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> requiredMemory <span class=\"token operator\">||</span> gc<span class=\"token punctuation\">.</span><span class=\"token function\">freeMemory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> gc<span class=\"token punctuation\">.</span><span class=\"token function\">totalMemory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                gc<span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// sleep 상태인 gc를 깨운다.</span>\n                gc<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0.1초 동안 gc가 작업을 수행할 때까지 main 쓰레드는 잠시 대기한다.</span>\n            <span class=\"token punctuation\">}</span>\n\n            gc<span class=\"token punctuation\">.</span>usedMemory <span class=\"token operator\">+=</span> requiredMemory<span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"usedMemory: \"</span> <span class=\"token operator\">+</span> gc<span class=\"token punctuation\">.</span>usedMemory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>마치며</h2>\n<p>지금까지 <strong>쓰레드의 상태</strong>와 <strong>쓰레드의 행동을 제어하는 메서드</strong>들에 대해 알아보았다.<br>\n쓰레드를 다루기 위해서 필수적인 지식이므로 직접 코드를 작성하고 실행시켜가며 이해하는 것이 중요해보인다.</p>\n<p>다음으로는 여러 쓰레드를 동시에 실행시켰을 때, <strong>동기화하는 법</strong>에 대해 알아보겠다.</p>","frontmatter":{"title":"Java Thread 2 - Java Thread의 상태와 행동을 제어하는 방법","date":"July 05, 2024","description":"쓰레드 상태와 상태 관련 메서드 (sleep, interrupt, yield, join)"}},"previous":{"fields":{"slug":"/java/thread-in-jvm/"},"frontmatter":{"title":"Java Thread 1 - Java의 Thread에 대해 알아보자"}},"next":{"fields":{"slug":"/java/synchronize-threads/"},"frontmatter":{"title":"Java Thread 3 - Thread 동기화하기"}}},"pageContext":{"id":"74dffee4-b519-52e9-9ce1-5ba2088555df","previousPostId":"f02a9301-38d1-500d-8ffe-94081fe920d7","nextPostId":"53701fa2-c265-57cd-99e1-38f5b860a986"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}