{"componentChunkName":"component---src-templates-post-jsx","path":"/log-and-disk/","result":{"data":{"site":{"siteMetadata":{"title":"log4dh"}},"markdownRemark":{"id":"e0484580-3f9a-597b-bdb4-386532933e65","excerpt":"TL;DR 7월 AWS 비용이 지난 달보다 7$가 추가되었다. 원인은 서버 CPU 사용량의 급격하게 증가함에 따라 추가 비용이 발생했던 것이다. 따라서 CPU 사용량이 급격히 추가 비용이 발생하지 않도록 설정을 바꿔줬다.  CPU 사용량이 급격히 늘어난 이유는 로그와 디스크 용량 때문이었다. 디스크 용량을 줄이니 귀신같이 해결되었다. 재발 방지를 위해 로…","html":"<h2>TL;DR</h2>\n<ul>\n<li>7월 AWS 비용이 지난 달보다 7$가 추가되었다.</li>\n<li>원인은 서버 CPU 사용량의 급격하게 증가함에 따라 추가 비용이 발생했던 것이다.</li>\n<li>따라서 CPU 사용량이 급격히 추가 비용이 발생하지 않도록 설정을 바꿔줬다. </li>\n<li>CPU 사용량이 급격히 늘어난 이유는 로그와 디스크 용량 때문이었다.</li>\n<li>디스크 용량을 줄이니 귀신같이 해결되었다.</li>\n<li>재발 방지를 위해 로그 정책을 설정해주었다.</li>\n</ul>\n<h2>1. 문제 상황</h2>\n<h3>지난 달에 비해 7$ 증가</h3>\n<p><strong>7월 AWS 비용이 갑자기 지난 달에 비해 7$가 추가</strong>됐다.<br>\n청구서를 자세히 살펴보니 아래 사진처럼 \"<strong>Amazon Elastic Compute Cloud T4GCPUCredits</strong>\" 이라는 항목으로 6$가 추가됐다.<br>\n나머지 1$는 6월에 비해 하루가 더 많아서 발생한 것으로 판단한다.<br>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/88a4021f5627692e982a6f6fdcbc937d/a3ebb/img.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 6.470588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARElEQVR42jWJQQrAMAgE+/8HWkN61uZUAw3RXLZE6GEYZvcQURARuBSczOnHDLEWpjs8It3aDVHFO0Z+e//Zbb2j1gsfy7VLeewiwdcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='7월 청구서' title='' src='/static/88a4021f5627692e982a6f6fdcbc937d/ca1dc/img.png' srcset='/static/88a4021f5627692e982a6f6fdcbc937d/e7570/img.png 170w,\n/static/88a4021f5627692e982a6f6fdcbc937d/f46e7/img.png 340w,\n/static/88a4021f5627692e982a6f6fdcbc937d/ca1dc/img.png 680w,\n/static/88a4021f5627692e982a6f6fdcbc937d/02d09/img.png 1020w,\n/static/88a4021f5627692e982a6f6fdcbc937d/9d567/img.png 1360w,\n/static/88a4021f5627692e982a6f6fdcbc937d/a3ebb/img.png 2454w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>7월 청구서</figcaption>\n  </figure>\n(참고로 150시간은 약 6일이다.)</p>\n<h3>Amazon Elastic Compute Cloud T4GCPUCredits란?</h3>\n<p>GPT에 물어보니 아래와 같이 설명한다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/65a7e7ee6078a26029ec7da806343615/d4fa6/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 86.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVR42oWU6Y7CMAyE+yAFylHK2Yv7aOn7v5RXn1cThWql/TE4McnEmXGazOdzA4vFIiDLMmuaxrqus77vHYxjvN9vezwedr/f7Xg82uFwsKIoLGEzhERhNptZXdeBiM1jQFRVla+DsCzLX0J+VquVT2Ks12uH5nmeB7CeqDWAObdL9vu9bbdbu16vdrvdPJ7PZ7tcLh6VP51OnqMyInnl+P/1ejlPMp1O/QQWkkQ7kbZt63nA1ck/n89AQJ713IDCqNw1VIVxZWxCGw6M9Y2B9ujNmslk4rlEDkPy+XzcOUiJkFIBwlMtTmIEYxnCGEMYuyk6hZJFBgmQXmxC9LFxm83Gb0cEfmW1DCegDwSILcGRQjmicshBEVRHtcw5NBCSgJCNVMQmopyV00A9SHW73S5U+1UhV4RQ2kEI4jkxbhN1BhH9IQ2Ey+UyuMc4fopjyMjxs2Uc2kZvFk3SNHWj1BKK/yG0DUCvYRj82mpi9aN0jCVhLkkYEzEptA09pgX6okBExSzkfzqBeQw5DHhxXy5TEYQYpH4kj5MQEiHXXJ8tHfhFSJIr6dHzZ/wVQue/Ghvoq0Tb/ACy4gaGVR6KWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Amazon Elastic Compute Cloud T4GCPUCredits에 대한 GPT 설명' title='' src='/static/65a7e7ee6078a26029ec7da806343615/ca1dc/img_1.png' srcset='/static/65a7e7ee6078a26029ec7da806343615/e7570/img_1.png 170w,\n/static/65a7e7ee6078a26029ec7da806343615/f46e7/img_1.png 340w,\n/static/65a7e7ee6078a26029ec7da806343615/ca1dc/img_1.png 680w,\n/static/65a7e7ee6078a26029ec7da806343615/02d09/img_1.png 1020w,\n/static/65a7e7ee6078a26029ec7da806343615/9d567/img_1.png 1360w,\n/static/65a7e7ee6078a26029ec7da806343615/d4fa6/img_1.png 1598w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Amazon Elastic Compute Cloud T4GCPUCredits에 대한 GPT 설명</figcaption>\n  </figure></p>\n<p>해당 정보를 바탕으로 관련 공식 문서 발견했다. (<a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances-unlimited-mode.html?icmpid=docs_ec2_console\">문서1</a>, <a href=\"https://aws.amazon.com/ko/ec2/pricing/on-demand/#T2.2FT3.2FT4g_Unlimited_Mode_Pricing\">문서2</a>)<br>\n문서에서 아래와 같이 설명한다.<br></p>\n<blockquote>\n<p>T4g, T3a and T3 instances launch as unlimited by default (unless you <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances-how-to.html#burstable-performance-instance-set-default-credit-specification-for-account\">change the default</a>). If the average CPU usage over a 24-hour period exceeds the baseline, you incur charges for surplus credits. If you launch Spot Instances as unlimited and plan to use them immediately and for a short duration, with no idle time for accruing CPU credits, you incur charges for surplus credits. We recommend that you launch your Spot Instances in <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances-standard-mode.html\">standard</a> mode to avoid paying higher costs.\n<br>\n<br>\nT4g, T3a 및 T3 인스턴스는 기본적으로 무제한으로 시작됩니다(기본값을 변경하지 않는 한). 24시간 동안의 평균 CPU 사용량이 기준선을 초과하면 초과 크레딧에 대한 요금이 부과됩니다. 스팟 인스턴스를 무제한으로 시작하고 CPU 크레딧이 적립되는 유휴 시간 없이 단기간 동안 즉시 사용할 계획인 경우 잉여 크레딧에 대한 요금이 부과됩니다. 더 높은 비용을 지불하지 않으려면 스팟 인스턴스를 표준 모드로 시작하는 것이 좋습니다.</p>\n</blockquote>\n<blockquote>\n<p>T4g 인스턴스를 무제한 모드로 사용할 경우 CPU 크레딧은 Linux, RHEL 및 SLES에 대해 <strong>vCPU-시간당 0.04 USD가 부과</strong>됩니다.</p>\n</blockquote>\n<p><strong>현재 사용 중인 인스턴스는 t4g.micro</strong> 로서, 위 내용에 해당한다.<br>\n청구서에서도 '0.04$ per vCPU Hours' 라고 했으니 정확하다.<br>\n찾아보니 <strong>실제로 크레딧 사양이 unlimited</strong>였고 <strong>무제한 모드 설정을 끌 수 있는 것으로 파악</strong>했다.<br>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 388px; '>\n      <a class='gatsby-resp-image-link' href='/static/e6d584148f3a2f54d1a8d7003f16258d/5bbd5/img_2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 264.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA1CAYAAABBecueAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGVElEQVR42q1XWXMTRxDe30sqCaniLaTIIwTCkYorhADhDlDkABtijLHwIWMLH5Isy7pl3fe92kPS6kt3yyvLBoxNvFVdM5qZ/qa7py8pmqaj2+2g3++j1+vBsqw91Ot2Zb27M/Iaz5mHqdPZS0q73ZZD624P3B4vEskkNnw+rK25EQ5HUK83UK5UUa3VkMsXkM5koWka2rqBtmbAND8AyN+DBw9x4+YtvJ5x4LfrN/Hz2FU8fTYOj9eLUCSKdc8GvD4/5pxvBfi1J4v7jggKVRV9qzsEVtp0G6tSKBaRzeZRlDEnlCfGarUGvrTRaKLZaslv0zRQaejIVlQYBGRZPcFgUlh8RlaJieeqqqLVUnfmbfndbLYErCV7LTSaTRqbaKu0TvN6oyFUq9eh6GQLZmI7JVJpsRkz5gpFYSyVK7LH82KpTEwNsSePvMdkX8QPrOiGIRLxAbZTOpOTA4FgBMlUBhubW4jGthEIhWU/lc7Q6EOE1iLROPyBEDJknkAwLDYWCdlGBbq9SLflduzGN7MkeZK0QhLmCyVhZA3yxRJJWxI1C6WSSD5YKw9emW3Y75nkcx3oui72s2078LmBDxqGCRbAIK1YPT7D50eJAHV58kfzccxuZEHI0IiJfTMciSGeSIrvbSdTAmLblC/odMz3Hbtj6jL58poLY8+3xCdZAv7W1t14/uIl5heceDk1jSQ5/dslF6ldo4st0cjqdfeQkivTa9XbiOfrSBZ5rpKztoRqqoFqa5eydDacyCGVrwpPvtISKtbUISmhbAOVdg/bZQ3ZuoFSq4PiCFX0Hqq6hbrZR6PbBx1Fs9OnPRN1o4c6zQsj55V0RQONOHHVhcsTQVG1aVigJbg3g5iZfwvHwhIcTqZlvHLMY8W7idlFF8Ynp7HmC0CjS9rdASnbJYoKC3i2ksHsVgkmA5oW9D4QTmbgDUbhclOy8AWx7g9idWMLwXgKsXQe63RhaDstUqskPZMSy5NfNQzUtS5q7Q4yVYrRmk6jhoraIbUsIVazSWI3SHU2QYXEUQmoQuLZPEyK7WelMqeohqjMLsNfiZw2lU6jQM4dDkcRi8VlXpYAIAnXPeLoNg/nVIX9ySS3KVerEiGjgJy6ZhxvyGWmMDn5Es+eTWDy5RTm5514t7KCJ3/+RVkpK2cZjD+FnVp8zyQnJUl5Y5T4syNGGEeYRyWzaQjIUcCgzLIfcP8lvNrbMRX/HgUVlRnIDqlRlf1bASwsLGJufgFzcwsSMQ7HLJliA87Ft7LnIJOEwuHhxQqrwwB1ysictkYBC4UCUpQjw9EotrcTVG9SMuZyOcpQlEPLZUSoPHA2t/kE8Dg/pSGZlqrYB4jLgk3ttraXtMEoeyM8CifIcqVybKRUqbBwPWgeE0kZtaRrsITs55e1fT52EA1fmVO6/aPT6Uoa5wRrkisx8W97ZE3aO2mf1/gc25Hn7MdcThSNNvmbmXmD8YkXOPHFVzh77gJu3b6Lb0+fwZWfxvDL1Ws4/d0Z3L5zD+cvXMTJb07R3vc498OP+PrkKdy8dVu6jfMXLu1KmKbyyD62tLQsQe8l511ediEQCAq9W1lFmnwySOVyidZX19bh92/BQ/0QxzyPfG4IeJhv1F4f9cNdG1rvt3L72js7bg+iI0l4qEixAUczhj231y3r/fVPAh67hPnCoDvl3iYWT6BWa0gGCoai0pVJGaDMks3lKQ/2Pg2YIrAoAcXig06LQblJ4u5qZdVNnVgabq9PAO30diAgezwXpSrVljrF90FMn1B5ECmcNMfHn+PR4yfSZ5tSDvDRuD2EHw5i2dhpQPcH/ZEf5TC3HwmQbcgdKOc0nRpLbn25TnPh4gfjImab50BAO9ts+gN49fqN9MlZsie/LL90MBSRtZU1j7jPoSW0i/z+hxjE8+HNMZTQ6Vwktyl/0J6f9Sj8p8XcKan9Uep/5qN8IPv9v1eOF014Ehq8CRX+TIfIhC+lw5vUoRr9Q18xtOHEYgwX7ztx8c4Mrk9s4s5UFGOPl3DpoYv6btuWR5DwXczElL+Dab+GSa8KR6hLcwMzvhZUE0eX8N/lBM7+PoMrfzjx6z9uXL4/hwv3qNtyhY700kPAaVcMdyd9ePhqE3/Tv6pH01u48XQVa4Hc0QBtlXt0nhoH6hh2R5uO8sr/AUI7xEUBw6mfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='실제 설정되어 있는 크레딧 사양' title='' src='/static/e6d584148f3a2f54d1a8d7003f16258d/5bbd5/img_2.png' srcset='/static/e6d584148f3a2f54d1a8d7003f16258d/e7570/img_2.png 170w,\n/static/e6d584148f3a2f54d1a8d7003f16258d/f46e7/img_2.png 340w,\n/static/e6d584148f3a2f54d1a8d7003f16258d/5bbd5/img_2.png 388w' sizes='(max-width: 388px) 100vw, 388px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>실제 설정되어 있는 크레딧 사양</figcaption>\n  </figure>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/f3a339bfbff71c9db516024bc30a1eeb/047c3/img_3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVR42o2SaW7bMBCFdctep1fpQXqCAq3T1nYTy4ntaLNWSlxFUX4dkk77K0AIfHgzI4p8QzIZBobNwwO2uz2+/9ggPT7DOYdlWd7Fubv+yx2U0uj6HokxBhPn4FxACAEpJQTlUoqAEJyQ4VuA5k3TRPN5UF/jHsqV1kh8kKZHvJzOOKQpsrxAeo4cTgWOpMPQo+06dF3Upmlwvdao6wY9uWraFi1hzIxEk0M/kTEWdvNFZVfIeQ2qiY8Oay0Sv4h3lhdlbJdyRSqpVaUkRtrIH4f/5pWNI0Zq1eNbnSYej4xiby5hXCGrWipoTHImzF1ncEXIiDb+Ahy5WALOrVjoMuziQt3ns3fYjhKv1RU9OSm7EVU/omhZUE89TKgZuSGHt3XG6kzAx7f1TWPdGLoUa+nm2CPqcodruUeVb9FUf9DWT8gvP0NeZr9RU60s9sQOZb5DdvkVtMi2OL1swLoDZjPSs9EjrM7oh0fw8QIt84jK6RxfQ6xIDeX/KUL9LVaqomOooWktcjjDWUWPVBMqYu+8F99zO4sIO0M3TzBiQOLWjz+Lt3G7RZ24hBYM7OtnPH/5hDn/hr+evEshBqlmIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='크레딧 사양 변경 가능' title='' src='/static/f3a339bfbff71c9db516024bc30a1eeb/ca1dc/img_3.png' srcset='/static/f3a339bfbff71c9db516024bc30a1eeb/e7570/img_3.png 170w,\n/static/f3a339bfbff71c9db516024bc30a1eeb/f46e7/img_3.png 340w,\n/static/f3a339bfbff71c9db516024bc30a1eeb/ca1dc/img_3.png 680w,\n/static/f3a339bfbff71c9db516024bc30a1eeb/02d09/img_3.png 1020w,\n/static/f3a339bfbff71c9db516024bc30a1eeb/047c3/img_3.png 1208w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>크레딧 사양 변경 가능</figcaption>\n  </figure></p>\n<p>일단 세 인스턴스 모두 꺼놓았다.</p>\n<h2>2. 원인 파악</h2>\n<p>이제 CPU 사용량이 급격히 치솟은 이유를 파악해보자.</p>\n<h3>AWS 모니터링으로 CPU 사용량 파악</h3>\n<p>위에서부터 AWS가 제공하는 Prod, Dev, DB 인스턴스의 모니터링 결과이다.<br>\n모두 한 달 간의 결과를 보았다.<br>\n눈여겨 볼 점은 <strong>CPU 사용률</strong>이다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/164406e6de8b763712e6a50e97b22b09/df801/img_4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 39.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVR42m1Ri27DIBDL/3/jpmlbq0UtCYRXeCRxfdeuUqdFugAGfLYZTj8XvL1/4PPrG6fzGbO1+Psdx6H1CgJrKcg5o7WOUipCiBjsEjG5SHB/XvolkFrXVS+llJA597nChhWLjyyPZfHwIcCYCTEmDJ6guRr03pWgtfY4YBBiROVaCKd5xjiOSlJqQ2SDmdjlcuVoqbCwecEgCkIq4gA7CXPteqm2/mIzsEnh3rbv6PuBnaNgtW06x+P+IMyjmWHdQkWZuVSknGBmB0c7MWUlF5WOZxybJWLiSCKQyOSMp93eN1oWe5NR+dvWNWDJRdZSGjgtumXBldFY65Ss1qqR+MAMJUvvNYZBOq8iW16tbmpHVKfS1cbGtezLuUoFh2JA5+9OGJ4l66HqI3BDXy2qmsLus/N3nFXaHXM+kDipEonmP8IboOtspX8DRsQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Prod 인스턴스 모니터링' title='' src='/static/164406e6de8b763712e6a50e97b22b09/ca1dc/img_4.png' srcset='/static/164406e6de8b763712e6a50e97b22b09/e7570/img_4.png 170w,\n/static/164406e6de8b763712e6a50e97b22b09/f46e7/img_4.png 340w,\n/static/164406e6de8b763712e6a50e97b22b09/ca1dc/img_4.png 680w,\n/static/164406e6de8b763712e6a50e97b22b09/02d09/img_4.png 1020w,\n/static/164406e6de8b763712e6a50e97b22b09/9d567/img_4.png 1360w,\n/static/164406e6de8b763712e6a50e97b22b09/df801/img_4.png 2838w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Prod 인스턴스 모니터링</figcaption>\n  </figure>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/c478e249940ea892f86e84ed8155ef97/ac512/img_5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 40.588235294117645%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVR42k1Ri27EIAzr/3/jpj2k227X4w2FAsVz6G26ShEhDY7tLN83hZfXN7x/fOJyuUBpjWMcGGPMkO85f/5KKUhpQ6115j4ELNZH3I1n8ZCn/81/IDkXbNvGh2meLmaYkOF8gHUOxjp45ut6RwgRS4wR6n5H3fcJ1HudDUppTvRorRE0Q5P59foDS4BaGxLBjTG4rSs0T2EpAxf54Tk17x1uq0g8hXop9cHy5C3Tez9mvreDtgyEGFAlP8aDTMci2q+rxhe9XLVDTHn6sSozw5LtlnfGWVPG4qYcctlRqEoscxwmp9SWQDYix1nLSZ1xTIbWmhmDd5ns6JdSip7ZeRewQLvEFumXEMaTYW19SkmlofYxN2cCt5YbVpcRaIUsRywQdY09nYME0PkT0EkwX8RM7cjS+ilF/NxZExmnFEqmFKnJptN2blvukXcBfY5fytNr2x2NAFIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Dev 인스턴스 모니터링' title='' src='/static/c478e249940ea892f86e84ed8155ef97/ca1dc/img_5.png' srcset='/static/c478e249940ea892f86e84ed8155ef97/e7570/img_5.png 170w,\n/static/c478e249940ea892f86e84ed8155ef97/f46e7/img_5.png 340w,\n/static/c478e249940ea892f86e84ed8155ef97/ca1dc/img_5.png 680w,\n/static/c478e249940ea892f86e84ed8155ef97/02d09/img_5.png 1020w,\n/static/c478e249940ea892f86e84ed8155ef97/9d567/img_5.png 1360w,\n/static/c478e249940ea892f86e84ed8155ef97/ac512/img_5.png 2834w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Dev 인스턴스 모니터링</figcaption>\n  </figure>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/74c2bfeedad01893ec8f24d3bbba6506/5ba40/img_6.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTklEQVR42l2SiW7EIAxE8/9f2VbdEwgEEo5AMh17W6laJItgxvE8J5NxHp9f37hcb7jd73Buxnme+L/k+J6Tte8dtTbuO3rvSOuKyfqIu5mR8+vivbDWilKK7nKfa0fcKratwIegBmJa8TQW3gdMOW8wxqBRLEs7UWApWGJEbY3FmxZeSSFEK5sv1Hjv8Xg8Ya3VplvOmEqhA9o+6GwcJzpjpfXOBuM4NC+mBSdTJwR/DCsbjTFoYqim83lqbYdfEmaGI37KVfGWRFchwfqEXJp2/7g51Zo5obBOXEmdaCy1G81NgjM78s8zu3UNceicU5Ted51dJL7hWdDFhFCJw7BEHU1gyCyJnJE45NYP7LTeGDJDKRLkMZgfpxbLvYzlNZ5DczEljfS7T/IRLiYQI+JhA8Ka9QP5mIi3YlaU1x9QiJ2JmbnLWUiW3xf9xQ9Y4GvzLYE87AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='DB 인스턴스 모니터링' title='' src='/static/74c2bfeedad01893ec8f24d3bbba6506/ca1dc/img_6.png' srcset='/static/74c2bfeedad01893ec8f24d3bbba6506/e7570/img_6.png 170w,\n/static/74c2bfeedad01893ec8f24d3bbba6506/f46e7/img_6.png 340w,\n/static/74c2bfeedad01893ec8f24d3bbba6506/ca1dc/img_6.png 680w,\n/static/74c2bfeedad01893ec8f24d3bbba6506/02d09/img_6.png 1020w,\n/static/74c2bfeedad01893ec8f24d3bbba6506/9d567/img_6.png 1360w,\n/static/74c2bfeedad01893ec8f24d3bbba6506/5ba40/img_6.png 2820w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>DB 인스턴스 모니터링</figcaption>\n  </figure></p>\n<p>Dev, DB 인스턴스는 CPU 사용량이 최대 2.1%이다.<br>\n반면 <strong>Prod는 92%</strong> 가 찍힌다. 심지어 7/27 부터 지금까지 지속되다시피 한다.<br>\n실제로 <strong>CPU 사용률과 CPU 크레딧 사용량 모니터링 결과가 거의 일치</strong>한다.</p>\n<p>CPU 사용률이 올라감에 따라 CPU 크레딧 사용량이 증가해서 추가 비용이 증가한 것이 틀림없어 보인다.</p>\n<h2>24/08/03 11:22 기준 Prod 인스턴스 상태</h2>\n<p>일단 Prod 인스턴스에 접속해서 현재 상태를 파악해보자.</p>\n<p>CPU는 6.56% 사용중이다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/191354a7f806d9c722e42d593dc8b568/b04fb/img_7.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 15.294117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoUlEQVR42jVNSQ7DMBDKb9psyubdbmxnj/L/99Cxqx4QMKCh8PFGWB6MbAaXEd1gMXGPtjOoW4VXyfCuOHmNqpHZJ/5nZS1I/+4JhdIb7OeEUAvcfIKJCKkXKLNB250GHLre5k4arOiRUCuMO/LIxHzupqcNZYVxO0J8qCjRCwfON3CxQsoD4xRg7AVrb/TDTLcdWp+ZjbkJV/Y6aR5ghccXHLZi2jGPGX4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='24/08/03 11:22 기준 CPU 사용량' title='' src='/static/191354a7f806d9c722e42d593dc8b568/ca1dc/img_7.png' srcset='/static/191354a7f806d9c722e42d593dc8b568/e7570/img_7.png 170w,\n/static/191354a7f806d9c722e42d593dc8b568/f46e7/img_7.png 340w,\n/static/191354a7f806d9c722e42d593dc8b568/ca1dc/img_7.png 680w,\n/static/191354a7f806d9c722e42d593dc8b568/02d09/img_7.png 1020w,\n/static/191354a7f806d9c722e42d593dc8b568/9d567/img_7.png 1360w,\n/static/191354a7f806d9c722e42d593dc8b568/b04fb/img_7.png 1398w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>24/08/03 11:22 기준 CPU 사용량</figcaption>\n  </figure></p>\n<p>메모리는 전체 3GB 중, 약 8MB 정도 사용 중이다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/1c5835ceb1307df5cf20f6f4512b30a5/1d227/img_8.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 17.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVR42l1PWw6CQBDjKoasvFmBFXm5guILMcZE/PP+x6g7k6iJH8003Wm3Y+XFFkmmofLWzDVkUjP3wxVcfwkvyHn+c4Lj/XTHUwwrUxsWIlkxKCiICoRx8Q0g7WOinTAu+T1e1Mw/fpk0sGyRYu5mSE3w4/lisy0WuIwTdHvGzJYoqh7D+IBwUtBFh9MdZd0b3uFynVA1B+PX2B9vsOhXahHJEt1u5EDS8lXHp1PI0nDdDrw3d9W3uXAy3idQKddXeAMS8X/qmu8F4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='24/08/03 11:22 기준 메모리 사용량' title='' src='/static/1c5835ceb1307df5cf20f6f4512b30a5/ca1dc/img_8.png' srcset='/static/1c5835ceb1307df5cf20f6f4512b30a5/e7570/img_8.png 170w,\n/static/1c5835ceb1307df5cf20f6f4512b30a5/f46e7/img_8.png 340w,\n/static/1c5835ceb1307df5cf20f6f4512b30a5/ca1dc/img_8.png 680w,\n/static/1c5835ceb1307df5cf20f6f4512b30a5/02d09/img_8.png 1020w,\n/static/1c5835ceb1307df5cf20f6f4512b30a5/1d227/img_8.png 1164w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>24/08/03 11:22 기준 메모리 사용량</figcaption>\n  </figure></p>\n<p>뭔가 이상해서 다시 AWS 모니터링해봤더니 실시간으로 내려가는 중이다 ..?\n11:10 기점으로 내려가기 시작했다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/5ac70506526cf9a0a4e727a1279d8fef/c7714/img_9.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 34.705882352941174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxklEQVR42rVSWw7CIBDk/iepl+gN1CMYNcYY+0GqwvLqug+oVX/8cZIJu5MyC0NNSgnLNCnLi7l8a8xpUi57RluNh4AQM3pI6EPSmlYXtBet6oEIVeP64ekwpcxDmIYFnYBv+GhnhJQxZt2TaW+qdcNs+Cv+YFiqIeVMK/f6BnpL45xHay0CAH2QJZPGZZ8lq0L5RSEjRsoTogwA0iKd3uz2B+z7HofhKgZLE/kDqnEjB388nbHrVrjebNGOI16uA97uTh7lCWEGJsFEYHsKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='갑자기 내려가는 CPU 사용량' title='' src='/static/5ac70506526cf9a0a4e727a1279d8fef/ca1dc/img_9.png' srcset='/static/5ac70506526cf9a0a4e727a1279d8fef/e7570/img_9.png 170w,\n/static/5ac70506526cf9a0a4e727a1279d8fef/f46e7/img_9.png 340w,\n/static/5ac70506526cf9a0a4e727a1279d8fef/ca1dc/img_9.png 680w,\n/static/5ac70506526cf9a0a4e727a1279d8fef/02d09/img_9.png 1020w,\n/static/5ac70506526cf9a0a4e727a1279d8fef/9d567/img_9.png 1360w,\n/static/5ac70506526cf9a0a4e727a1279d8fef/c7714/img_9.png 3018w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>갑자기 내려가는 CPU 사용량</figcaption>\n  </figure></p>\n<p>내려가니 다행인데 CPU 사용률이 급격하게 올라가는 이유는 무엇일까..?</p>\n<p>.<br>\n.<br>\n.</p>\n<p>아무튼 중요한 건 CPU 사용률이 급격하게 증가한 이유다.<br>\n다시 CPU 사용률을 자세히 보면, '7/7~7/9' 사이와 '7/29~8/3' 사이에 사용률이 튄다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/8c89771eba662f109e79ef6fb434b378/fec90/img_10.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 30.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVR42p2R2woCMQxE+//fpoJPIuiDWEVW3Yv2ml7GdIuIKCw6MJCU9HRChTIeRRt5wVaexzqkjDjhEDMyzza9wXy1x4y9a24QnuII6TWhUxWeMa3nTHt3WB8GyKvGkS0oVKBjsHYBvyrEhEF7OOYoGxhIDMn5b2Dk1QuIGGx9rAlLfEvlBRqXyfnTKaWv57GA+G5JWkKJbi/RLxdoTw16ZaCtf7NxhPJxyrixr/WrN7bWxjpYR3gAvhzWngXHF9AAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='CPU 사용량' title='' src='/static/8c89771eba662f109e79ef6fb434b378/ca1dc/img_10.png' srcset='/static/8c89771eba662f109e79ef6fb434b378/e7570/img_10.png 170w,\n/static/8c89771eba662f109e79ef6fb434b378/f46e7/img_10.png 340w,\n/static/8c89771eba662f109e79ef6fb434b378/ca1dc/img_10.png 680w,\n/static/8c89771eba662f109e79ef6fb434b378/02d09/img_10.png 1020w,\n/static/8c89771eba662f109e79ef6fb434b378/9d567/img_10.png 1360w,\n/static/8c89771eba662f109e79ef6fb434b378/fec90/img_10.png 3014w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>CPU 사용량</figcaption>\n  </figure></p>\n<p>참고로 아까 150 시간이 부과되었고 150시간은 약 6일이라고 했다.<br>\n7월 7,8,9,29,30,31 -> 6일로 맞아 떨어진다..!</p>\n<p>7월 8일, 7월 29일은 정기 회의가 진행된 날이다.<br>\n회의 때마다 서버에 트래픽이 몰리는 경우가 있다.<br>\n그렇다면 서버에 과도한 요청에 따라 발생하거나 어디선가 병목현상이 발생해서 CPU 사용률이 올라가는 것일까?</p>\n<p>아래는 7월 29일이 포함되는 이번 한 주(7/27~8/3)의 네트워크 I/O 비율이다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/7946b832327c8e40c4f3abdae707499f/f6d08/img_11.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 18.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVR42jVQ7Y7DIAzr+z/kaevW7kc/IUACB3gJuotkBWHi2EzLsuL1eqP3BqtSMjwREjOWdR0wPqU0+JwzWDK2bYPNPp4zjvNEV671jimEgNY6ghQELqBUEPWcS4FzbojU2sYb/A1Z3fcNUXG7/+cNKhhVoOIixu4Zp/aLZLgg7+FjxrITnHYudSw0bRopBPJbdXlFqR2ifaLI+Jk/OPYDgTyyMKK6tmiG/fK4fYA3cYUZYBF1pSKawhKKfo9z6lgEX7QoNceFnxAKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='7/27 ~ 8/3의 네트워크 IO 비율' title='' src='/static/7946b832327c8e40c4f3abdae707499f/ca1dc/img_11.png' srcset='/static/7946b832327c8e40c4f3abdae707499f/e7570/img_11.png 170w,\n/static/7946b832327c8e40c4f3abdae707499f/f46e7/img_11.png 340w,\n/static/7946b832327c8e40c4f3abdae707499f/ca1dc/img_11.png 680w,\n/static/7946b832327c8e40c4f3abdae707499f/02d09/img_11.png 1020w,\n/static/7946b832327c8e40c4f3abdae707499f/9d567/img_11.png 1360w,\n/static/7946b832327c8e40c4f3abdae707499f/f6d08/img_11.png 2030w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>7/27 ~ 8/3의 네트워크 IO 비율</figcaption>\n  </figure></p>\n<p>7월 29일 기준으로 CPU 사용률은 90% 이상을 유지하지만 네트워크 I/O 비율은 큰 변동이 없다.<br>\n네트워크 입력이 중간중간 수치가 올라가지만, 결과에 영향을 주는 것 같지는 않다.</p>\n<p>스프링의 문제인가 싶어서 그라파나를 살펴봤다.<br>\n그런데 정작 Process CPU Usage는 Max 값이 0.0717 이었다.<br>\nSystem CPU Usage는 AWS의 모니터링 결과와 일치했다.<br>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/b4e4ac71cfcd8a4970fbded64c9f1b52/55862/img_12.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLklEQVR42kVQ107DQBD0XyS24369+c5OUUBCAYQAIfH/fzOsncLDanfHvp2SDVxD24iqHbAta+S75lHbol4rLxsUC1ZesU1e374RRlWULbaEdYNCtvx0fdA+qqw7cGshnIX0Fio4dEJABCKfHfRE+Ghg9g7+FKCTg917qGiRVc2irMFmYbwrKCq4KeH94wef3794fftCnM44X15gjg7TZYY9eMhkEJ4TVLLQdDw8RWS7qkfPOBgXaNpu7UxwhKjoyAwfI/VpnV30MKMjMlIZDO3USan2NJNKaclySQdNOEGZgJpyZMIQgVrngSvsyP7iomcSJcXBuFmzkmam7Cf03NHbRHtCx8hyzxmm/Rl+PGBMx/+wb/ZzCvw+L/lu8orIGGyY0fYSUo9UgUjZuv8B0/WtOdlsPDAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='그라파나의 CPU Usage 지표' title='' src='/static/b4e4ac71cfcd8a4970fbded64c9f1b52/ca1dc/img_12.png' srcset='/static/b4e4ac71cfcd8a4970fbded64c9f1b52/e7570/img_12.png 170w,\n/static/b4e4ac71cfcd8a4970fbded64c9f1b52/f46e7/img_12.png 340w,\n/static/b4e4ac71cfcd8a4970fbded64c9f1b52/ca1dc/img_12.png 680w,\n/static/b4e4ac71cfcd8a4970fbded64c9f1b52/02d09/img_12.png 1020w,\n/static/b4e4ac71cfcd8a4970fbded64c9f1b52/9d567/img_12.png 1360w,\n/static/b4e4ac71cfcd8a4970fbded64c9f1b52/55862/img_12.png 1648w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>그라파나의 CPU Usage 지표</figcaption>\n  </figure></p>\n<p>결국 <strong>인스턴스 자체의 문제</strong>인 것으로 좁힐 수 있다.<br>\n곧바로 AWS에서 제공하는 시스템 로그를 파악해봤지만 일자도 없고 무슨 소린지 잘 모르겠다 🤷‍♂️<br>\n그래서 인스턴스 내에 <code class=\"language-text\">/var/log/syslog</code>를 읽어보니 아래와 같았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2024-07-31T00:07:08.262339+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: file '/var/log/syslog'[8] write error - see https://www.rsyslog.com/solving-rsyslog-write-errors/ for help OS error: No space left on device [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T00:07:08.262418+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: action 'action-3-builtin:omfile' (module 'builtin:omfile') message lost, could not be processed. Check for additional error messages before this one. [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T00:07:08.262512+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: file '/var/log/syslog'[8] write error - see https://www.rsyslog.com/solving-rsyslog-write-errors/ for help OS error: No space left on device [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T00:07:08.262581+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: action 'action-3-builtin:omfile' (module 'builtin:omfile') message lost, could not be processed. Check for additional error messages before this one. [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T00:07:08.262689+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: file '/var/log/syslog'[8] write error - see https://www.rsyslog.com/solving-rsyslog-write-errors/ for help OS error: No space left on device [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T00:07:08.262758+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: action 'action-3-builtin:omfile' (module 'builtin:omfile') message lost, could not be processed. Check for additional error messages before this one. [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T00:07:08.268322+00:00 ip-172-31-38-137 systemd[1]: sysstat-summary.service: Deactivated successfully.\n2024-07-31T00:07:08.275229+00:00 ip-172-31-38-137 systemd[1]: Finished sysstat-summary.service - Generate a daily summary of process accounting.\n2024-07-31T00:10:08.240256+00:00 ip-172-31-38-137 systemd[1]: Starting sysstat-collect.service - system activity accounting tool...\n2024-07-31T00:07:03.053696+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:10:08.245703+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 20546 similar message(s))\n2024-07-31T00:10:08.249710+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:10:08.260427+00:00 ip-172-31-38-137 systemd[1]: sysstat-collect.service: Deactivated successfully.\n2024-07-31T00:10:08.271450+00:00 ip-172-31-38-137 systemd[1]: Finished sysstat-collect.service - system activity accounting tool.\n2024-07-31T00:10:08.263698+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:15:01.933716+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:15:01.936707+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:15:01.949349+00:00 ip-172-31-38-137 CRON[415611]: (root) CMD (command -v debian-sa1 > /dev/null &amp;&amp; debian-sa1 1 1)\n2024-07-31T00:15:01.952692+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:17:01.939703+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:17:01.943731+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:17:01.957020+00:00 ip-172-31-38-137 CRON[415616]: (root) CMD (cd / &amp;&amp; run-parts --report /etc/cron.hourly)\n2024-07-31T00:20:08.239392+00:00 ip-172-31-38-137 systemd[1]: Starting sysstat-collect.service - system activity accounting tool...\n2024-07-31T00:17:01.960755+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:20:08.242699+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:20:08.247700+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:20:08.260189+00:00 ip-172-31-38-137 systemd[1]: sysstat-collect.service: Deactivated successfully.\n2024-07-31T00:20:08.271838+00:00 ip-172-31-38-137 systemd[1]: Finished sysstat-collect.service - system activity accounting tool.\n2024-07-31T00:20:08.263697+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:25:01.949718+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:25:01.953694+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:25:01.966387+00:00 ip-172-31-38-137 CRON[415631]: (root) CMD (command -v debian-sa1 > /dev/null &amp;&amp; debian-sa1 1 1)\n2024-07-31T00:29:12.947214+00:00 ip-172-31-38-137 dockerd[72833]: time=\"2024-07-31T00:29:12.946688543Z\" level=error msg=\"Error writing log message\" driver=json-file error=\"error writing log entry: write /var/lib/docker/containers/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057-json.log: no space left on device\" message=\n2024-07-31T00:25:01.969689+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:29:12.947685+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:29:12.947692+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:29:17.942629+00:00 ip-172-31-38-137 dockerd[72833]: time=\"2024-07-31T00:29:17.941983283Z\" level=error msg=\"Error writing log message\" driver=json-file error=\"error writing log entry: write /var/lib/docker/containers/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057-json.log: no space left on device\" message=\n2024-07-31T00:29:17.942934+00:00 ip-172-31-38-137 dockerd[72833]: time=\"2024-07-31T00:29:17.942062224Z\" level=error msg=\"Error writin2024-07-31T01:24:12.302137+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: action 'action-3-builtin:omfile' (module 'builtin:omfile') message lost, could not be processed. Check for additional error messages before this one. [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T01:24:12.302176+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: file '/var/log/syslog'[8] write error - see https://www.rsyslog.com/solving-rsyslog-write-errors/ for help OS error: No space left on device [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T01:24:12.302207+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: action 'action-3-builtin:omfile' (module 'builtin:omfile') message lost, could not be processed. Check for additional error messages before this one. [v8.2312.0 try https://www.rsyslog.com/e/2027 ]</code></pre></div>\n<p>위 로그를 분해해보면 다음과 같다.<br>\n<strong>7/31일 00:07+00:00부터 00:29+00:00 까지</strong> 아래 로그가 기록된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2024-07-31T00:07:08.268322+00:00 ip-172-31-38-137 systemd[1]: sysstat-summary.service: Deactivated successfully.\n2024-07-31T00:07:08.275229+00:00 ip-172-31-38-137 systemd[1]: Finished sysstat-summary.service - Generate a daily summary of process accounting.\n2024-07-31T00:10:08.240256+00:00 ip-172-31-38-137 systemd[1]: Starting sysstat-collect.service - system activity accounting tool...\n2024-07-31T00:07:03.053696+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:10:08.245703+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 20546 similar message(s))\n2024-07-31T00:10:08.249710+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:10:08.260427+00:00 ip-172-31-38-137 systemd[1]: sysstat-collect.service: Deactivated successfully.\n2024-07-31T00:10:08.271450+00:00 ip-172-31-38-137 systemd[1]: Finished sysstat-collect.service - system activity accounting tool.\n2024-07-31T00:10:08.263698+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:15:01.933716+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:15:01.936707+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:15:01.949349+00:00 ip-172-31-38-137 CRON[415611]: (root) CMD (command -v debian-sa1 > /dev/null &amp;&amp; debian-sa1 1 1)\n2024-07-31T00:15:01.952692+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:17:01.939703+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:17:01.943731+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:17:01.957020+00:00 ip-172-31-38-137 CRON[415616]: (root) CMD (cd / &amp;&amp; run-parts --report /etc/cron.hourly)\n2024-07-31T00:20:08.239392+00:00 ip-172-31-38-137 systemd[1]: Starting sysstat-collect.service - system activity accounting tool...\n2024-07-31T00:17:01.960755+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:20:08.242699+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:20:08.247700+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:20:08.260189+00:00 ip-172-31-38-137 systemd[1]: sysstat-collect.service: Deactivated successfully.\n2024-07-31T00:20:08.271838+00:00 ip-172-31-38-137 systemd[1]: Finished sysstat-collect.service - system activity accounting tool.\n2024-07-31T00:20:08.263697+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:25:01.949718+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:25:01.953694+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:25:01.966387+00:00 ip-172-31-38-137 CRON[415631]: (root) CMD (command -v debian-sa1 > /dev/null &amp;&amp; debian-sa1 1 1)\n2024-07-31T00:29:12.947214+00:00 ip-172-31-38-137 dockerd[72833]: time=\"2024-07-31T00:29:12.946688543Z\" level=error msg=\"Error writing log message\" driver=json-file error=\"error writing log entry: write /var/lib/docker/containers/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057-json.log: no space left on device\" message=\n2024-07-31T00:25:01.969689+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:29:12.947685+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device (Dropped 3 similar message(s))\n2024-07-31T00:29:12.947692+00:00 ip-172-31-38-137 kernel: systemd-journald[164997]: Failed to open system journal: No space left on device\n2024-07-31T00:29:17.942629+00:00 ip-172-31-38-137 dockerd[72833]: time=\"2024-07-31T00:29:17.941983283Z\" level=error msg=\"Error writing log message\" driver=json-file error=\"error writing log entry: write /var/lib/docker/containers/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057/2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057-json.log: no space left on device\" message=\n2024-07-31T00:29:17.942934+00:00 ip-172-31-38-137 dockerd[72833]: time=\"2024-07-31T00:29:17.942062224Z\" level=error msg=\"Error writin2024-07-31T01:24:12.302137+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: action 'action-3-builtin:omfile' (module 'builtin:omfile') message lost, could not be processed. Check for additional error messages before this one. [v8.2312.0 try https://www.rsyslog.com/e/2027 ]</code></pre></div>\n<p>그리고 위 로그의 전후로 아래 로그가 상당히 많이 기록되어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2024-07-31T00:07:08.262339+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: file '/var/log/syslog'[8] write error - see https://www.rsyslog.com/solving-rsyslog-write-errors/ for help OS error: No space left on device [v8.2312.0 try https://www.rsyslog.com/e/2027 ]\n2024-07-31T00:07:08.262418+00:00 ip-172-31-38-137 rsyslogd[165030]: rsyslogd: action 'action-3-builtin:omfile' (module 'builtin:omfile') message lost, could not be processed. Check for additional error messages before this one. [v8.2312.0 try https://www.rsyslog.com/e/2027 ]</code></pre></div>\n<p>아니 이게 웬걸? <strong>실제 모니터링 결과에서도 7/31 00:00~00:30 까지 CPU 사용량이 급격히 줄어든다</strong>.<br>\n그리고 <strong>그 전후로 CPU 사용량이 90% 이상을 꾸준히 기록</strong>된다.<br>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/56383a7d7bd2158f4366909f0f6bdc23/5c9dd/img_13.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 110.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUUlEQVR42q2Ua4vTQBSG8zvXfuifEAT/iSCoiOAXEVSk6ioVVqht6MXd7XZ7sSZtkzZpumnu19czk6atuNYsdOAwJ2cmzznvyWQEFBxpwT3CzHCxMD0sbjxMdRsrO8DMcCBpNqZLG/rah2a6WLsBTDeEQmumE/B9+trD/MblpqwcLGmv8LhygaefujhtSnj+uYsXX67wQRzjbW2El1+vUWmMyUZ4932EivgLTz5ekv8Tb2j92WkXj96f49VZH6+/DciGEFg2x494yV4QIQhjpGnKLYoTPk+0NSyqkPlxsosblg/LC7kfRgnGizWE7GXwYEKbWR9ynxkbDOhukrK1fM7ey7oXRjFkzWLAA03erE11i1d/aLCqZfoGwsGvtgd0iwLzft1mSZJkQJLsUK92Uv80pHuSD1eYlThjFfpHkbwBLhkwPB5QuQuwSA8Vkux4wX97KBXtoWLYdPiPKFld3gFYSDL10C4gufCxUQtKnuSS01v+v212DrS2B/tfIyY17LoT9uXllsdiLjnlf4rl+n9J3n9mFbK7UlAUBZqmUSBGFEUIwxCqqkLXdfhBgMlkgovLLlrtNubzOXzfh+d5sG0bkiTBMAweY2bbBBwOh+h02pBlCQqBZFlGr9fDYDDgUJY9IDCDsGS5AjbvYjEBsySCsVxCVnU02z8gNhqo1+uo1WpokN9sNmFZFuJN9QzMACxmmiafHccB3a3QVjaHElDHUJ7j/oOHuHdygnK5vLVSqYRqtQqmIq+63++Tog5EUUSr1cZ17wqqtsL5YIow8PEbUrughZN/3tMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='CPU 사용량이 줄어든 상황' title='' src='/static/56383a7d7bd2158f4366909f0f6bdc23/ca1dc/img_13.png' srcset='/static/56383a7d7bd2158f4366909f0f6bdc23/e7570/img_13.png 170w,\n/static/56383a7d7bd2158f4366909f0f6bdc23/f46e7/img_13.png 340w,\n/static/56383a7d7bd2158f4366909f0f6bdc23/ca1dc/img_13.png 680w,\n/static/56383a7d7bd2158f4366909f0f6bdc23/5c9dd/img_13.png 836w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>CPU 사용량이 줄어든 상황</figcaption>\n  </figure></p>\n<p>위 로그가 정답이 될 것 같다 ❗️<br>\n로그를 잘 읽어보니 <strong>로그를 기록하는 데 필요한 디스크 용량이 부족</strong>하다고 한다.</p>\n<p><code class=\"language-text\">df -h</code>로 확인해보니 실제로 가득차있다. 😱😱\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/7075f0ddf1b20ad5e5147acd7a55fd29/6d612/img_14.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 37.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABXUlEQVR42mVR2XKCQBDkWxLvGxSRS0QBURDwxkRNrEr+/xM6M5NKHpKHrqmd3enp7lUMc47ZPIFu+FCHU+jjGcYTH92+RWdX+vXmCLXG8BfVuia13tLR+APFtEMhHBFRb2DLMFch1FwMdQ/aaCo9XqDR0iGdB6qDVsf4T2gR4fF8R769gMmfKn1ZkBUl/EWKeL3DPNxgudridv9EEOVYBBmcaYx2byIkzfZYIIRBmOF6+0ClpomVSk2F5yd4pd6AFPL97nAV4iQ9CpbxlmKZ47mq0sxPDN9V8fw1ypcHXC8mW5ZsYWWn8g2sPlwW2B9viOKCsEWyOSLNT1gle3izNSldwnYiTGcryVvhxoEGGOXlgTQ7ieXz5V2GmKCgOFakkO0Wuwuy/IyJFUimfdVGu2ui0zOpGlAMcyH58AU/YJusNIgyUW05IWw3EgL+fVYSkWp2xm/4Mzkq/kzO8AsZ1/B6beJNpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='실제로 디스크 용량이 가득 차 있었다' title='' src='/static/7075f0ddf1b20ad5e5147acd7a55fd29/ca1dc/img_14.png' srcset='/static/7075f0ddf1b20ad5e5147acd7a55fd29/e7570/img_14.png 170w,\n/static/7075f0ddf1b20ad5e5147acd7a55fd29/f46e7/img_14.png 340w,\n/static/7075f0ddf1b20ad5e5147acd7a55fd29/ca1dc/img_14.png 680w,\n/static/7075f0ddf1b20ad5e5147acd7a55fd29/6d612/img_14.png 936w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>실제로 디스크 용량이 가득 차 있었다</figcaption>\n  </figure></p>\n<p>도커의 로그도 관련되어 있어 보이니 Docker Container의 용량도 확인해보자.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/919470361b3cd1840c3921ea2d9a3031/33740/img_15.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 19.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA50lEQVR42j2ObU/CQBCE+4swxsQiIXIi0JYivbaUvlDA00iRFG2hgvHPj3sr8cOT2d2ZZNbwRhHcfoDR/RQPd84fbZv1seNedMwI08KwO0H3ZgCz1UP7SjBmS/Deue7DeM23eBrOoNIC4SSDZ0WMtOeMT+hCnZF2/O/pRzjjxKzzac6lhk8H3fpR1NhvalTvDardF5r9GcfyhHrX4Ehz+VbjUJ5RqJKyB/K/Of+5bcircKp+EIwTGLbw0Lu1kAZrxN6SycJnLKMXJHKFxUxBZRv+IJbk002T+Cuk/ho55UI3xSJUcITEL4UFnjjNHcu6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='도커 컨테이너의 용량' title='' src='/static/919470361b3cd1840c3921ea2d9a3031/ca1dc/img_15.png' srcset='/static/919470361b3cd1840c3921ea2d9a3031/e7570/img_15.png 170w,\n/static/919470361b3cd1840c3921ea2d9a3031/f46e7/img_15.png 340w,\n/static/919470361b3cd1840c3921ea2d9a3031/ca1dc/img_15.png 680w,\n/static/919470361b3cd1840c3921ea2d9a3031/02d09/img_15.png 1020w,\n/static/919470361b3cd1840c3921ea2d9a3031/33740/img_15.png 1054w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>도커 컨테이너의 용량</figcaption>\n  </figure>\n'2dfe~~' 는 스프링 애플리케이션을 실행 중인 컨테이너이다.<br>\n여기서 1GB 가까이 차지하고 있었다!<br></p>\n<p>컨테이너 내부에 로그 파일은 <em>{ContainerId}-json.log</em> 와 같은 이름으로 되어 있다.<br>\n따라서 <code class=\"language-text\">sudo truncate -s 0 2dfe8bd85c1922553dbcc6ab2e11ccc79a1c457eef02f1b93f790e1ff0045057-json.log</code> 명령어로 로그의 내용을 모두 지워주고 디스크를 확인해보니 확연히 줄었다!<br>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/1c3a0697bc4013e15a4fd9319945a626/65dc2/img_16.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 37.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVR42lVR107DQBD0xwAppjpu57i3NOw4BjuxE1oCEg8UUSTEA98+7B1PPKxmz+eZ252RdDOE60+g6j7OBo5A0Su2OA80T5wV1RU9R1X3YNkJTCuCwSIwKyYMwbUk2x0jGRVgw5QEPHRlnUge9S40g34iAkdVD2AQUWd/3xTVh3zMIB+ZovoCGSQnLNHuvnG5eUec3UNzahTNK6qrT+TVE+EHbh9/UK7f0G6/MF8+o1i9IMkfYIUt2L9qIIVxhmWzxX5XRbdv4KCr0cQlFhcbmiJAEGWoV3ew3SlGk0tMZhXidIFTxcVe54/T4byehp5sQvKDGar6Ggbt3z/USVBBlGTI5kvhjR9MSXwNbs1ossB0dkGiJZJ0LnxkQ14xbCclC0jQI0Kz3mLV3qHd7DDLKkGslteYLxrqS3EXp7m4q1c3OM9r8Ziq+Tg5G+L41CK0xUCSSQanFMrRCaM1HGEwTzdKcniUPk/Poy00I6BUYzjeGOm4AB8kSQvIhwb2OwptNkCnp+IXmoz3fEs8OuoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='디스크 용량이 줄어든 모습' title='' src='/static/1c3a0697bc4013e15a4fd9319945a626/ca1dc/img_16.png' srcset='/static/1c3a0697bc4013e15a4fd9319945a626/e7570/img_16.png 170w,\n/static/1c3a0697bc4013e15a4fd9319945a626/f46e7/img_16.png 340w,\n/static/1c3a0697bc4013e15a4fd9319945a626/ca1dc/img_16.png 680w,\n/static/1c3a0697bc4013e15a4fd9319945a626/65dc2/img_16.png 954w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>디스크 용량이 줄어든 모습</figcaption>\n  </figure></p>\n<p>디스크를 어느정도 정리하고 보니 10%를 유지하던 CPU 사용량도 줄었다!<br>\n사진을 잘못찍어 잘 안보이겠지만 2.58% 까지 줄어듦을 확인할 수 있다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/dd78b61450ae1e319aeda6bdb0a4a58c/14b40/img_17.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 42.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIElEQVR42q1S207DMAzt//8YlRAPaEyTBkNMwBhjXZM2zT052MkAdfBIpaPUPvHxJW7GcUQvBEIIM3iGr6e1DkpN0NpATRoTg/8J4zgRV31aazQpJfzn13jvkXKeOTPZL0eF+50oeNhJbAjb9wGbN0m2wON+wPpVYLk9YfXcY/HU4SgNGm4vXwimlDFoatN4HISGmBwGQjcYSOWKT5I92YAPElHWF1sqiybG+KtsrjjEmsSFOpJISayvd437KSLEdD5zKaCJIXKP3Oifgl+Bc8FYQphL38JnQZ4hE4WkoEiP5CkJI+cEfjTm2ObKOLGmVuePmUulQtEMDa1Ee32Du9UavVTk1BiIsM7X9aGEl3DE8SrdLpa4alucelmwP3T4BFBJcFimhvReAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='디스크가 줄어듦에 따라 감소한 CPU 사용량' title='' src='/static/dd78b61450ae1e319aeda6bdb0a4a58c/ca1dc/img_17.png' srcset='/static/dd78b61450ae1e319aeda6bdb0a4a58c/e7570/img_17.png 170w,\n/static/dd78b61450ae1e319aeda6bdb0a4a58c/f46e7/img_17.png 340w,\n/static/dd78b61450ae1e319aeda6bdb0a4a58c/ca1dc/img_17.png 680w,\n/static/dd78b61450ae1e319aeda6bdb0a4a58c/02d09/img_17.png 1020w,\n/static/dd78b61450ae1e319aeda6bdb0a4a58c/9d567/img_17.png 1360w,\n/static/dd78b61450ae1e319aeda6bdb0a4a58c/14b40/img_17.png 3066w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>디스크가 줄어듦에 따라 감소한 CPU 사용량</figcaption>\n  </figure></p>\n<p><strong>결국 로그로 인해 디스크 용량 부족으로 발생한 문제임이 확실해졌다.</strong></p>\n<p>하지만 삭제했다고 끝이 아니다.<br>\n앞으로도 로그는 계속해서 남을 것이다.</p>\n<p>도커의 로그 드라이버를 설정해주어 최대 용량을 제한해두자.<br>\n<code class=\"language-text\">sudo vi /etc/docker/daemon.json</code>을 입력해서 Docker 로깅 드라이버 설정을 아래와 같이 해주었다.<br>\n최대 용량은 500MB, 최대 파일 사이즈는 5로 설정해두었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"log-driver\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"json-file\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"log-opts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"max-size\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"500m\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"max-file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이번엔 서버 시스템의 로그 설정을 해주자.<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>\nLinux에는 주기적으로 로그를 삭제 및 정리하는 기능의 Logrotate 기능이 있다.<br>\n해당 기능을 설정해주자.</p>\n<p><code class=\"language-text\">sudo vim /etc/logrotate.conf</code> 명령어를 입력하고 아래 값을 입력 &#x26; 저장해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># see \"man logrotate\" for details\n\n# global options do not affect preceding include directives\n\n# rotate log files weekly\n# 주마다 로그 파일을 교체한다\nweekly\n\n# use the adm group by default, since this is the owning group\n# of /var/log/.\nsu root adm\n\n# keep 4 weeks worth of backlogs\n# 로그 파일의 개수가 4개 이상이면 가장 오래된 로그 파일을 삭제한다.\nrotate 4\n\n# create new (empty) log files after rotating old ones\n# 오래된 로그를 정리하고 새로운 로그 파일을 만들지 여부\ncreate\n\n# use date as a suffix of the rotated file\n# 로그 파일 정리 후 로그 파일 뒤에 날짜를 추가한다.\ndateext\n\n# uncomment this if you want your log files compressed\n# 로그 파일을 로테이트 후 압축 파일로 생성한다.\ncompress\n\n# packages drop log rotation information into this directory\ninclude /etc/logrotate.d\n\n# system-specific logs may also be configured here.\nsize 500M # 로그 파일 사이즈가 500M가 넘으면 로테이트를 실행한다.</code></pre></div>\n<h2>마무리</h2>\n<p>정리하는 김에 다른 불필요한 파일이나 폴더를 삭제해주었다.<br>\nCPU 사용량도 더 줄어듦을 볼 수 있다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/c3d86683c41a5b34ac36d47a832792b8/f09c0/img_18.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 35.29411764705882%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABeUlEQVR42mVRyVbCQBDMvyg7QkjYQjYCZAWSGCBA2BTF9zyIJ58e/PeyZ3hy4VCvZ6Z7uqq6BUUdwbR8SLIOUVIhtwyOykMHYkNFq91HrtBALi/iLifiPn8BeyuU5BsIej/AOMzg+At0ei7y5S66qgdF86FbU5iDEAZBMyewvTndI1ijGD0jQE0yUa5pqNT1K4Sht8bu7RfB7B2me0BLTxGtzshefuCEJ8TsfPxGtDxj9fRF90+E6QdsyimD7AaCaQVIZhtuJ1eQKTbA3uLHNRo0BqPvI5lvoOoO+oMxbIcUDic0FpPXF8tNstpEvijzKFiDCdLlgYovRdW6gpEdIU4yaLqLoR1yQkbi+QkmYYrxdAHbjaEZLidSNYcTS00DAmPc7l6xyp6x3Z8wpQ8jasLOrNE0SpFtjvCCBMF4juXqCYvFnjdQVJsWqaFUadMSuzwKTJVKSpjcf+nVmsKL212Ls7Y7FrfP0KStM1U9yjProqRf7RbLLfwBnxX1/+fltqoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='디스크 정리 최종본' title='' src='/static/c3d86683c41a5b34ac36d47a832792b8/ca1dc/img_18.png' srcset='/static/c3d86683c41a5b34ac36d47a832792b8/e7570/img_18.png 170w,\n/static/c3d86683c41a5b34ac36d47a832792b8/f46e7/img_18.png 340w,\n/static/c3d86683c41a5b34ac36d47a832792b8/ca1dc/img_18.png 680w,\n/static/c3d86683c41a5b34ac36d47a832792b8/f09c0/img_18.png 940w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>디스크 정리 최종본</figcaption>\n  </figure>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/32ba366033bfffde3c5fd2502c082830/db1d4/img_19.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 41.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVR42q1SyxLCIAzk//+s9ubosV/go1KBFgKspNKWWnU8mJkdNjvJ8ghCSom2vYGIPmIYBqi7gunTqntobWZ0SVdKJ65hTA8RQsA/Q1hrYZ0H+QgKGX6Bn7Vl4xi3RjGLwns/FoxARsRGcxRmI8v8xWxl+EuEfNKQGtmc87eG/Ial8C3YiK/OlfwcU9/6hGmKU8JruUHJY+KO0luTH3M2DrmPtedNIwSPvap2aJoGPKDpq3BByZ1zy1dK3DrC/nBEXde4XFuczhfITuEBSe12zAjUKAIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='CPU 사용량 감소 최종본' title='' src='/static/32ba366033bfffde3c5fd2502c082830/ca1dc/img_19.png' srcset='/static/32ba366033bfffde3c5fd2502c082830/e7570/img_19.png 170w,\n/static/32ba366033bfffde3c5fd2502c082830/f46e7/img_19.png 340w,\n/static/32ba366033bfffde3c5fd2502c082830/ca1dc/img_19.png 680w,\n/static/32ba366033bfffde3c5fd2502c082830/02d09/img_19.png 1020w,\n/static/32ba366033bfffde3c5fd2502c082830/9d567/img_19.png 1360w,\n/static/32ba366033bfffde3c5fd2502c082830/db1d4/img_19.png 3056w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>CPU 사용량 감소 최종본</figcaption>\n  </figure></p>\n<p>원치 않은 추가 비용이 발생함에 따라 크레딧 사양을 unlimited에서 standard로 수정했다.<br>\n이에 따라 CPU 사용량이 급격히 늘어남에 따라 추가 비용이 발생하지는 않을 것으로 보인다.<br></p>\n<p>돈을 조금 더 썼지만 소중한 경험을 할 수 있었다.<br>\n<strong>시스템을 운영할 때 로그를 잘 남기는 것이 매우 중요</strong>하다는 것과 <strong>로그를 잘 저장하는 것이 중요</strong>하다는 것이다.<br>\n또한 모니터링 대시보드를 붙였음에도 잘 사용하고 있지 못하는 것 같다.<br>\n<strong>특정 메트릭에 임계치를 설정해놓고 값을 초과하면 알람을 발생하도록</strong> 해봐야겠다.</p>\n<hr>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-****1\">\n<p><a href=\"http://www.chlux.co.kr/bbs/board.php?bo_table=board02&#x26;wr_id=91&#x26;sca=OS&#x26;page=6\">[Linux] Logrotate 설명 및 설정 방법</a></p>\n<a href=\"#fnref-****1\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"EC2 CPU 사용량이 급격히 늘어난 문제 해결","date":"August 03, 2024","update":null,"tags":["infra","ec2"],"series":null},"fields":{"slug":"/log-and-disk/","readingTime":{"minutes":19.665}}},"seriesList":{"edges":[{"node":{"id":"a30ff988-ea74-5562-b241-90fbff73a3da","fields":{"slug":"/kissoft-retrospection/"},"frontmatter":{"title":"키스소프트 현장실습 회고"}}},{"node":{"id":"aedd8f5b-dd45-5a14-9b57-3a48cdc0b641","fields":{"slug":"/what-is-varargs/"},"frontmatter":{"title":"[Java] Varargs는 어떻게 사용하고, 사용했을 때 장점이 무엇일까?"}}},{"node":{"id":"d41198ca-d162-523b-84f8-128b247a19b4","fields":{"slug":"/apply-https/"},"frontmatter":{"title":"[셀럽잇] HTTPS 적용기"}}},{"node":{"id":"3b94cbd6-f64a-5d82-96a2-0761602c250b","fields":{"slug":"/dbcp/"},"frontmatter":{"title":"DBCP와 HikariCP 이해하기"}}},{"node":{"id":"c418073e-50be-5fe1-807d-478c9c47f640","fields":{"slug":"/zero-downtime-deployment/"},"frontmatter":{"title":"무중단 배포 이해하기"}}},{"node":{"id":"c5760ea9-e137-5edf-8244-3a93e25b067b","fields":{"slug":"/unit-test/"},"frontmatter":{"title":"단위 테스트 이해하기"}}},{"node":{"id":"8ae82b3f-5b72-555c-89fe-9939dcf8377c","fields":{"slug":"/using-junit-and-assertJ/"},"frontmatter":{"title":"JUnit과 AssertJ 활용법"}}},{"node":{"id":"91a7a622-00f8-5cca-b6c1-e4f7db7ee31e","fields":{"slug":"/about-tdd/"},"frontmatter":{"title":"TDD 이해하기"}}},{"node":{"id":"10e0dab4-d2e7-52df-8daa-31bfef1b08b6","fields":{"slug":"/static-with-memory-structure/"},"frontmatter":{"title":"static을 더 잘 사용하기"}}},{"node":{"id":"c773b0a0-9610-5605-bdb9-9089df57f52b","fields":{"slug":"/about-garbage-collection/"},"frontmatter":{"title":"JVM의 Garbage Collection과 동작 원리"}}},{"node":{"id":"0bf99b61-98a4-5c40-b8ce-05a918d212f7","fields":{"slug":"/garbage-collection-tuning/"},"frontmatter":{"title":"Garbage Collection 튜닝에 대해"}}},{"node":{"id":"61bd95c2-424a-54c8-96d9-bec4c8a4f58c","fields":{"slug":"/garbage-collection-algorithms/"},"frontmatter":{"title":"Garbage Collection 알고리즘"}}},{"node":{"id":"c87443bb-4e35-55e7-94d5-a5cb70d2dbc8","fields":{"slug":"/cautions-for-using-collections-in-Java/"},"frontmatter":{"title":"Java에서 컬렉션을 사용할 때 주의할 점"}}},{"node":{"id":"c2d7615d-6232-5fce-8794-f4c790106bb5","fields":{"slug":"/2023-retrospection/"},"frontmatter":{"title":"2023년 회고록"}}},{"node":{"id":"def28d41-907f-5432-8060-ed5429114882","fields":{"slug":"/compare-of-datetime-and-timestamp/"},"frontmatter":{"title":"[MySQL] DATETIME vs TIMESTAMP"}}},{"node":{"id":"9bf8ca89-e021-526b-a7b5-2cce0b1e366f","fields":{"slug":"/add-feat-and-issue-number-automatically/"},"frontmatter":{"title":"[git&github] IntelliJ에서 커밋 메시지 작성 시, 자동으로 커밋 타입과 이슈 번호 추가하기"}}},{"node":{"id":"01318426-7520-5a57-92ff-c917e1483247","fields":{"slug":"/difference-of-controller-and-restcontroller/"},"frontmatter":{"title":"[Spring] @Controller와 @RestController 비교하기"}}},{"node":{"id":"bc68fa05-ec4a-5e12-a9b8-4e58769887df","fields":{"slug":"/deploy-spring-boot-in-aws-ec2-manually/"},"frontmatter":{"title":"[Infra] AWS EC2에 Spring Boot 수작업으로 배포하기"}}},{"node":{"id":"122a1e9c-6fe5-5e7f-b797-a31f54d086b0","fields":{"slug":"/what-is-ami-architecture-of-ec2/"},"frontmatter":{"title":"CPU 아키텍처란?"}}},{"node":{"id":"c23a12ff-7b48-57ef-91ed-81f5386d680a","fields":{"slug":"/apply-issue-and-pr-template/"},"frontmatter":{"title":"[github] Github Repository에 Issue, PR Template 적용하기"}}},{"node":{"id":"b1dc584d-3c69-5ae8-82a8-09b015fa3d02","fields":{"slug":"/oauth-test/"},"frontmatter":{"title":"Spring Boot에서 Rest Assured로 인수 테스트할 때 OAuth 로그인 처리하기"}}},{"node":{"id":"9f43b8a7-b5ce-5766-b984-3ed0775d698f","fields":{"slug":"/ioc-container-and-di/"},"frontmatter":{"title":"[Spring] 스프링 컨테이너, 그리고 IoC/DI"}}},{"node":{"id":"e1b2a9fb-d6e3-5f65-9f50-d3a30c2518d1","fields":{"slug":"/what-is-jdbc/"},"frontmatter":{"title":"[Java] JDBC 파헤쳐보기"}}},{"node":{"id":"81b7fb10-f532-5f48-a797-379c3bb99bee","fields":{"slug":"/understanding-transaction-and-concurrency-problem/"},"frontmatter":{"title":"[MySQL] 트랜잭션과 트랜잭션 격리 수준"}}},{"node":{"id":"adfb7cc4-25f1-5b31-8060-e40d763b0afe","fields":{"slug":"/sovle-concurrency-problem/"},"frontmatter":{"title":"[ListyWave] 리스트 수정 시, 동시성 이슈 발생 확인 및 해결기"}}},{"node":{"id":"5ecb4a12-dc98-589f-94e0-695fb2d84fab","fields":{"slug":"/restore-using-binarylog/"},"frontmatter":{"title":"[MySQL] 바이너리 로그로 데이터 복구하기"}}},{"node":{"id":"c375e6a2-7e6c-5607-a579-04d3ab5f3188","fields":{"slug":"/understanding-generic/"},"frontmatter":{"title":"[Java] 제네릭 이해하기"}}},{"node":{"id":"83ad74c1-0d46-5f86-92fc-998642e4367d","fields":{"slug":"/covariant-invariant-and-pecs/"},"frontmatter":{"title":"[Java] 배열의 공변, 제네릭의 불공변. 그리고 PECS"}}},{"node":{"id":"7b9b6854-62e7-5f25-afbf-d5459fa5d021","fields":{"slug":"/commands-of-docker/"},"frontmatter":{"title":"[Docker] 도커의 기본적인 명령어들"}}},{"node":{"id":"d77e8b24-f01d-5673-8c55-d93e2d110c4f","fields":{"slug":"/enhance-speed-ci-workflow/"},"frontmatter":{"title":"[Infra] Github Actions를 이용한 CI 작업 속도를 캐싱으로 개선하기"}}},{"node":{"id":"b4550a40-b215-5e9a-a6a7-8c27bfb63e25","fields":{"slug":"/continuous-deploy-using-github-actions-and-docker/"},"frontmatter":{"title":"[Infra] Github Actions와 Docker를 이용해 배포 자동화 구축하기"}}},{"node":{"id":"e38bb1ed-1a51-5947-a1d2-52aaae42ac97","fields":{"slug":"/build-monitoring-system/"},"frontmatter":{"title":"[Infra] Prometheus와 Grafana, 그리고 Docker를 이용해 모니터링 대시보드 구축하기"}}},{"node":{"id":"961e4fc3-1d57-55a3-99fd-9e1233cef1dd","fields":{"slug":"/june-3rd/"},"frontmatter":{"title":"[회고] 06.10 ~ 06.16"}}},{"node":{"id":"fcade266-d38c-5c36-a3b7-87d56d9be862","fields":{"slug":"/june-4th-and-5th/"},"frontmatter":{"title":"[회고] 06.17 ~ 06.30"}}},{"node":{"id":"7b64a367-9192-557d-b45d-0e3bc68d44d3","fields":{"slug":"/thread-in-jvm/"},"frontmatter":{"title":"Java Thread 1 - Java의 Thread에 대해 알아보자"}}},{"node":{"id":"9e5a98c2-ba89-5b36-8e72-0028211a2c5b","fields":{"slug":"/status-and-control-thread-in-java/"},"frontmatter":{"title":"Java Thread 2 - Java Thread의 상태와 행동을 제어하는 방법"}}},{"node":{"id":"45a781cf-0e04-559c-a853-d1609dab1bd4","fields":{"slug":"/synchronize-threads/"},"frontmatter":{"title":"Java Thread 3 - Thread 동기화하기"}}},{"node":{"id":"236f7305-5647-51fe-800e-61577d25cd0c","fields":{"slug":"/july-1st/"},"frontmatter":{"title":"[회고] 07.01 ~ 07.07"}}},{"node":{"id":"abad5436-5cba-50a3-8fda-72440c646a78","fields":{"slug":"/solid/"},"frontmatter":{"title":"객체지향 설계 원칙: SOLID"}}},{"node":{"id":"f113bb3f-df7e-589a-b3c1-378c812ac8da","fields":{"slug":"/insert-dummy-data-to-db/"},"frontmatter":{"title":"[Spring] 스프링 애플리케이션 동작과 동시에 DB에 더미 데이터 삽입하기"}}},{"node":{"id":"7890e82c-9f9c-52ed-9724-2efc1ddf8aef","fields":{"slug":"/procedure-function-package/"},"frontmatter":{"title":"[DB] 프로시저, 함수, 패키지에 대해"}}},{"node":{"id":"ac276a35-d955-59ae-9f71-28ad65030c42","fields":{"slug":"/july-2nd-3rd-4th/"},"frontmatter":{"title":"[회고] 07.08 ~ 07.23"}}},{"node":{"id":"4a801b76-317f-5129-a330-84fc989993c8","fields":{"slug":"/inner-class/"},"frontmatter":{"title":"[Java] inner 클래스와 종류에 대해"}}},{"node":{"id":"549069af-32e1-578d-a8c0-7524f6305a7d","fields":{"slug":"/execute-and-executeUpdate-of-jdbc/"},"frontmatter":{"title":"[JDBC] execute(String)과 execute(). executeUpdate(String)와 executeUpdate()의 차이"}}},{"node":{"id":"e0484580-3f9a-597b-bdb4-386532933e65","fields":{"slug":"/log-and-disk/"},"frontmatter":{"title":"EC2 CPU 사용량이 급격히 늘어난 문제 해결"}}},{"node":{"id":"3b97179a-f8a3-521b-a603-cfa1453ea898","fields":{"slug":"/august-1st/"},"frontmatter":{"title":"[회고] 07.29 ~ 08.04"}}},{"node":{"id":"5e74fe27-5b86-593d-bade-e5c49c12e0fc","fields":{"slug":"/august-2st/"},"frontmatter":{"title":"[회고] 08.05 ~ 08.11"}}},{"node":{"id":"82a59d7d-5e43-514c-90b4-af486ef16006","fields":{"slug":"/difference-sqrtN-and-logN/"},"frontmatter":{"title":"O(sqrt(N))과 O(log2(N))의 차이"}}},{"node":{"id":"e3cbab1b-4b2b-5107-8b23-51731a167d08","fields":{"slug":"/counting_the_number_of_values_lower_or_equal_to_constantly_increasing_sequence/"},"frontmatter":{"title":"일정하게 증가하는 수열에서 특정 값보다 같거나 작은 값의 개수를 세는 법"}}}]},"previous":{"fields":{"slug":"/execute-and-executeUpdate-of-jdbc/"},"frontmatter":{"title":"[JDBC] execute(String)과 execute(). executeUpdate(String)와 executeUpdate()의 차이"}},"next":{"fields":{"slug":"/august-1st/"},"frontmatter":{"title":"[회고] 07.29 ~ 08.04"}}},"pageContext":{"id":"e0484580-3f9a-597b-bdb4-386532933e65","series":null,"previousPostId":"549069af-32e1-578d-a8c0-7524f6305a7d","nextPostId":"3b97179a-f8a3-521b-a603-cfa1453ea898"}},"staticQueryHashes":[],"slicesMap":{}}