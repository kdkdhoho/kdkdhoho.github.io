{"componentChunkName":"component---src-templates-post-jsx","path":"/unit-test/","result":{"data":{"site":{"siteMetadata":{"title":"log4dh"}},"markdownRemark":{"id":"15ca77a9-4e26-59d5-8c4a-94f6fbae3a07","excerpt":"단위 테스트란? 애플리케이션에서 동작하는 기능 또는 메서드를 실행시키는 독립적인 단위의 테스트이다. 이때 기능이라는 말이 포함되어있다. 즉, 단위 테스트라고 해서 무조건 메서드만 테스트하는 건 아니다. 왜 단위 테스트를 하나? 잘 작성한 단위 테스트는 개발자가 작성한 단위(기능 또는 메서드)를 매우 빠르게 검증할 수 있다. 단위 테스트를 하지 않았을 때의…","html":"<h2>단위 테스트란?</h2>\n<p>애플리케이션에서 동작하는 <strong>기능 또는 메서드를 실행</strong>시키는 <strong>독립적인 단위의 테스트</strong>이다.</p>\n<p>이때 기능이라는 말이 포함되어있다. 즉, 단위 테스트라고 해서 무조건 메서드만 테스트하는 건 아니다.</p>\n<h2>왜 단위 테스트를 하나?</h2>\n<p>잘 작성한 단위 테스트는 <strong>개발자가 작성한 단위(기능 또는 메서드)를 매우 빠르게 검증</strong>할 수 있다.</p>\n<h3>단위 테스트를 하지 않았을 때의 문제점</h3>\n<ol>\n<li>테스트 코드를 프로덕션 코드에 작성해야한다.<br>\n이는 배포하는 jar 파일의 크기에 영향을 줄 것이고 배포 시간에도 영향을 줄 것이다.</li>\n<li>기능을 개발할 때마다 직접 실행시켜 동작을 확인해야한다.<br>\n이는 작성한 기능에 대해 검증받는 시간의 주기가 길어질 것이다.<br>\n즉, 버그를 낳을 확률이 증가한다.</li>\n</ol>\n<p>이 외에도 문제점이 다양하게 있겠지만, 이만하면 단위 테스트를 할 가치가 충분히 있어보인다.</p>\n<h2>JUnit</h2>\n<p>이렇게 좋은 단위테스트를 어떻게 할까?<br>\n바로 <a href=\"https://junit.org/junit5/\">JUnit</a> 프레임워크를 사용한다.</p>\n<blockquote>\n<p>우테코 5기 최고 미남 <a href=\"https://youtu.be/yKEwNVbAFC0?feature=shared\">제리의 프레임워크 vs 라이브러리 vs API 테코톡</a>을 보면 프레임워크에 대해 알 수 있다.</p>\n</blockquote>\n<p>JUnit 홈페이지에 있는 소개글에 의하면 \"JVM 기반이며 Java 8 이상에 초점을 맞춰 다양한 스타일의 테스트를 지원한다\"고 한다.</p>\n<p>자세한 사용법은 <a href=\"https://junit.org/junit5/docs/current/user-guide/\">User Guide</a>를 참고하자.</p>\n<h2>특징</h2>\n<h3>1. 메서드 실행 순서</h3>\n<p><a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-execution-order\">공식 문서</a>에 의하면 테스트 실행 순서를 이렇게 설명한다.</p>\n<p>\"<em>기본적으로, 테스트 클래스와 메서드는 결정론적이지만 의도적으로 명확하지 않은 순서로 정렬이 된다.</em>\"</p>\n<p>무슨 소리일까? 🤔</p>\n<p>결정론적 알고리즘에 대해 검색해보니 아래와 같이 설명한다.</p>\n<p>\"<em>예측한 그대로 동작하는 알고리즘이다. <strong>어떤 특정한 입력이 들어오면 언제나 똑같은 과정을 거쳐서 언제나 똑같은 결과를 내놓는다</strong>.\"</em></p>\n<p>즉, 순서에 대한 보장은 할 수 없지만 입력과 출력은 매번 동일한 것이 보장된다. 라고 이해하면 될 것 같다.</p>\n<blockquote>\n<p>왜 이렇게 구현했을까 고민했을 땐, 테스트 순서로부터 독립성을 보장하기 위함이지 않을까한다.<br>\n좋은 단위 테스트는 독립적이어야한다. 테스트 순서에도 영향을 받아서는 안된다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TestOrderTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">AtomicInteger</span> number <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AtomicInteger</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test C - \"</span> <span class=\"token operator\">+</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">getAndIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token class-name\">B</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test B - \"</span> <span class=\"token operator\">+</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">getAndIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token class-name\">A</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test A - \"</span> <span class=\"token operator\">+</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">getAndIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token class-name\">E</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test E - \"</span> <span class=\"token operator\">+</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">getAndIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test D - \"</span> <span class=\"token operator\">+</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">getAndIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>실제 위 예제 코드로 순서를 바꿔도 보고 그룹 단위로 변경해가며 실행하면 위에서 설명하는 특징을 실제로 보이는 것을 확인할 수 있다.</p>\n<blockquote>\n<p>만약 클래스에 작성한 테스트 코드의 순서대로 동작하고 싶다면 <code class=\"language-text\">@TestInstance(value = TestInstance.Lifecycle.PER_CLASS)</code>를 추가하자<br>\n혹은 <code class=\"language-text\">@TestMethodOrder(OrderAnnotation.class)</code>를 클래스 레벨에 추가하고, 각 메서드에 <code class=\"language-text\">@Order(int value)</code>로 조절하자</p>\n</blockquote>\n<blockquote>\n<p>클래스 간의 테스팅 순서도 조절할 수 있다고 한다. 이는 필요할 때 알아보자.</p>\n</blockquote>\n<h3>2. AssertJ 활용</h3>\n<p><a href=\"http://joel-costigliola.github.io/assertj/assertj-core-quick-start.html\">AssertJ</a>는 \"<em>능수능란한 검증문 자바 라이브러리</em>\" 라고 설명한다.</p>\n<p>단순히 말해서 유용한 Assertion문을 선언할 수 있도록 도와주는 라이브러리라고 생각하자.</p>\n<p>AssertJ는 메서드 체이닝 가능한 assert문을 지원하는 라이브러리이다.<br>\n이를 이용해서 더욱 가독성 좋은 단위 테스트를 작성할 수 있다.<br>\n아래 코드로 비교해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span>jupiter<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token static\">assertEquals</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>assertj<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token static\">assertThat</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">assertJTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// junit 메서드 사용</span>\n    <span class=\"token function\">assertEquals</span><span class=\"token punctuation\">(</span>expected<span class=\"token punctuation\">,</span> actual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// assertJ 메서드 사용</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>actual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>expected<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>자세한 사용법은 <a href=\"http://javadoc.io/doc/org.assertj/assertj-core\">Java Doc</a> 참고</p>\n</blockquote>\n<p>추가적인 장점으로는 실패 메시지가 자세하다는 점과 다양한 검증 메서드를 지원한다고 한다.<br>\n심지어 <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions-third-party\">JUnit 공식 사이트</a>에서도 써드파티 Assertion 라이브러리로 AssertJ를 권장한다.</p>\n<h2>Junit vs AssertJ</h2>\n<p>Junit은 프레임워크고 AssertJ는 라이브러리이다.</p>\n<p>AssertJ를 이용해 단위 테스트 코드를 작성하고, JUnit에게 <code class=\"language-text\">@Test</code>와 같은 어노테이션으로 메서드를 위임하여 실행시킨다. </p>","frontmatter":{"title":"단위 테스트","date":"November 27, 2023","update":"November 27, 2023","tags":["unit test"],"series":null},"fields":{"slug":"/unit-test/","readingTime":{"minutes":6.16}}},"seriesList":{"edges":[{"node":{"id":"15ca77a9-4e26-59d5-8c4a-94f6fbae3a07","fields":{"slug":"/unit-test/"},"frontmatter":{"title":"단위 테스트"}}}]},"previous":null,"next":null},"pageContext":{"id":"15ca77a9-4e26-59d5-8c4a-94f6fbae3a07","series":null,"previousPostId":null,"nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}