{"componentChunkName":"component---src-templates-post-jsx","path":"/07-https/","result":{"data":{"site":{"siteMetadata":{"title":"log4dh"}},"markdownRemark":{"id":"84076d04-c12f-5e3f-889d-67a2bc4a604f","excerpt":"들어가며 이 글은 그림으로 배우는 Http & Network Basic을 읽고 학습한 내용을 정리한 글입니다. 이번 장에서는 HTTPS에 대해 알아보겠습니다. HTTPS 등장 배경 지금까지 살펴본 HTTP 프로토콜은 클라이언트 혹은 서버가 단순히 문자열 데이터를 통해 요청하고 응답하는 구조였습니다. 하지만 클라이언트와 서버가 통신을 할 때 중간에 많은 호…","html":"<h2>들어가며</h2>\n<p>이 글은 <a href=\"https://m.yes24.com/Goods/Detail/15894097\">그림으로 배우는 Http &#x26; Network Basic</a>을 읽고 학습한 내용을 정리한 글입니다.</p>\n<p>이번 장에서는 HTTPS에 대해 알아보겠습니다.</p>\n<h2>HTTPS 등장 배경</h2>\n<p>지금까지 살펴본 HTTP 프로토콜은 클라이언트 혹은 서버가 단순히 문자열 데이터를 통해 요청하고 응답하는 구조였습니다.</p>\n<p>하지만 클라이언트와 서버가 통신을 할 때 중간에 많은 호스트를 거치게 되는데, 이때 전송되는 패킷들을 수집하여 HTTP 메시지를 도청할 수 있게 됩니다.<br>\n송신한 HTTP 메시지가 내가 원하는 호스트에게 잘 갔는지? 혹은 수신한 HTTP 메시지가 중간에 조작됐는지는 서버나 클라이언트 측에선 알 방법이 전혀 없습니다.<br></p>\n<p>따라서 이러한 문제를 해결하기 위해 HTTPS가 탄생하게 됐습니다.</p>\n<h2>HTTPS</h2>\n<p>HTTPS는 HTTP 프로토콜에 SSL/TLS 프로토콜을 적용한 프로토콜입니다.<br>\n단순 HTTP 프로토콜은 HTTP -> TCP -> IP 프로토콜 계층 순서로 통신하는 반면<br>\nHTTPS 프로토콜은 HTTP -> SSL/TLS -> TCP -> IP 순서로 통신하는 구조입니다.</p>\n<p>HTTPS 프로토콜을 통해 통신을 하면, <u>통신을 암호화하고</u> <u>통신 상대를 신뢰할 수 있게 되고</u> <u>HTTP 메시지가 중간에 조작되지 않음을 보장</u>할 수 있습니다.</p>\n<h2>SSL/TLS</h2>\n<p>그렇다면 SSL/TLS는 무엇일까요?</p>\n<blockquote>\n<p>SSL은 구버전 TLS는 신버전입니다.<br>\n하지만 일반적으로 SSL이라고 지칭합니다. </p>\n</blockquote>\n<p>SSL/TLS는 데이터를 암호화하는 통신 프로토콜입니다.<br></p>\n<p>통신을 암호화할 때는 <u>대칭키 방식 암호화</u>와 <u>비대칭키 방식 암호화</u>를 모두 적용합니다.</p>\n<h3>대칭키 방식 암호화</h3>\n<p>평문(PlainText)을 암호화 혹은 복호화할 때 <u>공통되는 키 하나로만 수행</u>하는 방식의 암호화입니다.<br>\n이 공통되는 키를 <em>대칭키</em> 라고 부릅니다.<br>\n서버나 클라이언트에서 암호화할 때 대칭키를 통해 암호화하고 암호화한 데이터와 대칭키를 함께 상대에게 전송하고, 수신한 대칭키를 이용해 복호화하는 과정을 수행하게 됩니다.</p>\n<p>하지만 중간에 공통키가 유출되면 제 3자도 복호화할 수 있게 되는 문제가 있습니다.</p>\n<h3>비대칭키 방식 암호화</h3>\n<p>비대칭키 방식 암호화는 공개키와 개인키를 통해 수행됩니다.</p>\n<p>대칭키 방식 암호화처럼 암호화할 땐 공개키로 수행을 합니다. 하지만 <u>복호화는 개인키로만 가능</u>한 구조입니다.<br>\n공개키가 아무리 유출되더라도 개인키만 유출되지 않으면 암호화한 데이터를 지킬 수 있습니다.<br>\n따라서 대칭키 방식 암호화의 문제를 해결할 수 있습니다.</p>\n<h2>SSL/TLS 통신 과정</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/3b4cd3c5d044f9d0e0227af3897308ed/4a2a8/img.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 69.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACv0lEQVR42m1Sx3bcSAzk/3/Krg/rX5DlcFhLmqjRWMPQzMOcOnHkcpG23x68B7wOAAqFAhxjZ2hjYecbhnHC/cdPOByeIb/zfdO4dhVEGsOvYjxlJ7htjMPxGZ8+f4HSZs1bMH6bs14ION/e0HY93v/zHnd3HzBVFapQoK1rlLzXTYNRTpiUxN39Pf76+91KYMn7A1Dbn1U0q4kkRdV0MG0HXdWo8wKRL1BdC8zK4Ma4a1EijOI/2P0CvOGcdmjlDZssxb/iBa4I0PUTky0ZNriySM8CVmmYxYzBMAyY/w9QmRn1qNmKRUdNcrZdtz0027HThJZsyjRDTkbLfWbMoGZUnWRHb1CUS2q7nitgWaSIoxdUWYRLeUWQC7h5hnKSGK1EXGS4hP5qIgmRtAMS30N0OSMrW9RZjC71WSz9CZhdIxxfH+AS1C8qhHGIgIwqqTBZhaTI4UUBXoW3AubDhIh+n7KUzUgtXZy8Df8CWMrnJGmCw+4rXPfM9ZkhKfw4KQxk15oRokjg52RhJtSqR89zkakbJSwn7AsX28NXBOzAUgJnpNhiv0fDqoYij9RuGEcopSC5JjnbF2FAJgIpiy9rI+nrliHdbqiZlxyO6MtqzXfUqFB7Al3dw76BuyYxUL9ZaprhulQo0iss35qxdhkAB9P2nPISX3Uo3IBEFAwZO23SIAsa+DTJTzn2GLplRSRMV0NSbMm2TVvC1FcY+iWn3zU1Y0gmqJCELUTUwmgNR4oDVHRC5l/Q+CdM/h42foaJTzBiB+M9wvpPMKs9wkRH+p4xhiekgYsmeIEOD9Biv/45w+UBvb+Dez7i2+Me4mGDkSA62DJox+D9GqzD33cWEVsMLOwtOQ97pNsdVPC0/jmNdyTlC76FWxwJFDCxfaXT2/6yDQZ38999Ofnu/AMZXvDKIudgw3XbQcZn/ADA4Rs6eYIziQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='출처: https://brunch.co.kr/@growthminder/79' title='' src='/static/3b4cd3c5d044f9d0e0227af3897308ed/ca1dc/img.png' srcset='/static/3b4cd3c5d044f9d0e0227af3897308ed/e7570/img.png 170w,\n/static/3b4cd3c5d044f9d0e0227af3897308ed/f46e7/img.png 340w,\n/static/3b4cd3c5d044f9d0e0227af3897308ed/ca1dc/img.png 680w,\n/static/3b4cd3c5d044f9d0e0227af3897308ed/4a2a8/img.png 912w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>출처: https://brunch.co.kr/@growthminder/79</figcaption>\n  </figure></p>\n<p>위 사진은 SSL 핸드셰이크 과정입니다.</p>\n<p>아까 위에서 SSL 프로토콜을 이용하면 통신을 암호화할 수 있고, 상대를 신뢰할 수 있고, 메시지가 중간에 조작되지 않았음을 보장할 수 있다고 했습니다.<br>\n또, <u>대칭키 방식과 비대칭키 방식을 모두 사용</u>한다고 했습니다.</p>\n<p>이를 좀 더 자세히 알아보겠습니다.</p>\n<h3>통신 암호화</h3>\n<p>SSL 프로토콜은 어떤 방식으로 대칭키 방식과 비대칭키 방식을 모두 사용하고 있을까요?<br>\n동작 순서는 다음과 같습니다.</p>\n<ol>\n<li>클라이언트가 서버로 통신 요청을 보냅니다.</li>\n<li>서버는 클라이언트에게 공개키를 전달합니다.</li>\n<li>클라이언트는 자신의 대칭키를 공개키를 통해 암호화하여 서버로 전송합니다.</li>\n<li>수신한 데이터를 서버가 가지는 개인키를 통해 복호화하여 대칭키를 획득합니다.</li>\n<li>이후로는 대칭키를 통해 암호화하여 전송함으로써 빠른 통신을 수행합니다.</li>\n</ol>\n<p>두 방식을 함께 적용하는 이유는, 매번 안전한 비대칭키 방식 암호화를 사용하면 될 것 같지만 사실 대칭키 방식보다 속도가 느리기 때문에 각각의 장점만을 살리는 방식을 채택했기 때문입니다.</p>\n<h3>상대를 신뢰하는 방법</h3>\n<p>만약 위 1번 과정에서 클라이언트가 보낸 통신 요청이 공격자에 의해 조작되어 신뢰할 수 없는 사이트의 공캐기가 오게 되는 경우는 어떻게 막을 수 있을까요?<br>\n바로 <u>인증 기관</u>과 그 기관이 발행하는 <u>공개키 인증서</u>를 통해 확인할 수 있습니다.<br>\n바로 이 공개키 인증서를 통해 클라이언트가 수신한 공개키가 어떤 사이트로부터 받은 공개키인지 식별할 수 있게 되는 것입니다.</p>\n<p>공개키 증명서는 다음과 같은 순서로 발급하게 됩니다. </p>\n<ol>\n<li>발급받으려는 서버는 인증 기관에게 서버 정보와 서버 공개키를 전송합니다.</li>\n<li>인증 기관은 받은 데이터를 먼저 검증을 한 뒤, 검증에 성공하면 인증 기관의 개인키로 서명합니다.</li>\n<li>그 결과 만들어진 공개키 인증서는 서버로 전송됩니다.</li>\n</ol>\n<p>그리고 이 공개키 인증서를 받은 클라이언트는 미리 브라우저에 내장해놓은 인증 기관의 공개키를 통해 인증서가 정말 인증 기관이 인증한 것인지 식별할 수 있게 됩니다.</p>\n<h3>조작이 되지 않았음을 보장하는 법</h3>\n<p>클라이언트는 암호화에 사용할 대칭키인 <em>Pre Master Secret</em> 을 만듭니다.<br>\n여기에 <em>MAC Key</em> 와 <em>Session Key</em> 가 포함됩니다.</p>\n<p>클라이언트가 서버의 공개키를 통해 Pre Master Secret을 암호화하여 서버로 전송하면 서버는 비밀키를 통해 Pre Master Secret을 획득하게 됩니다.<br>\n그리고 이전에 주고 받았던 random 값을 통해 <em>Master Secret</em>을 생성하게 되고, 이를 통해 Session 키와 MAC 키를 생성합니다.<br>\n이제부터는 이 대칭키를 사용하자고 상호 간의 확인을 합니다.</p>\n<p>이후 클라이언트는 패킷을 보낼 떄 MAC Key와 Session Key를 통해 암호화를 하고, 데이터를 수신한 서버는 우선 대칭키로 복호화를 한다.<br>\n그 결과로 만들어진 Mac Key와 Session Key를 이전에 서버에 저장해놓은 MAC Key와 Session Key를 비교하여 데이터가 중간에 조작되진 않았는지 검증하는 구조이다.</p>\n<h3>Reference</h3>\n<blockquote>\n<ul>\n<li><a href=\"https://m.yes24.com/Goods/Detail/15894097\">그림으로 배우는 Http &#x26; Network Basic</a></li>\n<li><a href=\"https://youtu.be/wPdH7lJ8jf0?feature=shared\">테코톡 - 다니의 HTTPS</a></li>\n<li><a href=\"https://youtu.be/KpyzbEFYE_E?feature=shared\">테코톡 - 헤나의 HTTPS</a></li>\n<li><a href=\"https://brunch.co.kr/@growthminder/79\">HTTPS 원리 이해하기</a></li>\n</ul>\n</blockquote>","frontmatter":{"title":"7장. 웹을 안전하게 지켜주는 HTTPS","date":"March 28, 2024","update":null,"tags":["Network"],"series":"그림으로 배우는 Http & Network Basic"},"fields":{"slug":"/07-https/","readingTime":{"minutes":9.415}}},"seriesList":{"edges":[{"node":{"id":"a4d71417-67f6-5df5-a92a-fe77cee2c152","fields":{"slug":"/01-comprehension-about-web-and-network-basic/"},"frontmatter":{"title":"1장. 웹과 네트워크의 기본에 대해 알아보자"}}},{"node":{"id":"b30f24d3-925d-5fec-8b29-6f6226b97cd6","fields":{"slug":"/02-http-protocol/"},"frontmatter":{"title":"2장. 간단한 프로토콜 HTTP"}}},{"node":{"id":"807f22e3-dcd4-554f-908e-19ffa9b29d8c","fields":{"slug":"/03-http-detail/"},"frontmatter":{"title":"3장. HTTP 정보는 HTTP 메시지에 있다"}}},{"node":{"id":"bd0818e6-a370-5bc9-96d5-ad7d10929267","fields":{"slug":"/04-http-status-code/"},"frontmatter":{"title":"4장. 결과를 전달하는 HTTP 상태 코드"}}},{"node":{"id":"e210085d-c6e8-5cce-81f0-c7773af272fa","fields":{"slug":"/05-web-server/"},"frontmatter":{"title":"5장. HTTP와 연계하는 웹서버"}}},{"node":{"id":"5b14ad06-606e-5537-be91-65ab1aa467e5","fields":{"slug":"/06-http-header/"},"frontmatter":{"title":"6장. HTTP 헤더"}}},{"node":{"id":"84076d04-c12f-5e3f-889d-67a2bc4a604f","fields":{"slug":"/07-https/"},"frontmatter":{"title":"7장. 웹을 안전하게 지켜주는 HTTPS"}}},{"node":{"id":"91bb0215-8f87-5c05-b5e3-8c8b4e05a365","fields":{"slug":"/08-authentication-of-http/"},"frontmatter":{"title":"8장. 누가 액세스하고 있는지를 확인하는 인증"}}},{"node":{"id":"bcfa9a22-0d4a-5d68-a21f-2dc441452620","fields":{"slug":"/09-advanced-http-protocol/"},"frontmatter":{"title":"9장. HTTP에 기능을 추가한 프로토콜"}}}]},"previous":{"fields":{"slug":"/understanding-transaction-and-concurrency-problem/"},"frontmatter":{"title":"[MySQL] 트랜잭션과 트랜잭션 격리 수준"}},"next":{"fields":{"slug":"/restore-using-binarylog/"},"frontmatter":{"title":"[MySQL] 바이너리 로그로 데이터 복구하기"}}},"pageContext":{"id":"84076d04-c12f-5e3f-889d-67a2bc4a604f","series":"그림으로 배우는 Http & Network Basic","previousPostId":"81b7fb10-f532-5f48-a797-379c3bb99bee","nextPostId":"5ecb4a12-dc98-589f-94e0-695fb2d84fab"}},"staticQueryHashes":[],"slicesMap":{}}