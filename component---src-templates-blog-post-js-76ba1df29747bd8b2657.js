"use strict";(self.webpackChunkgatsby_starter_blog=self.webpackChunkgatsby_starter_blog||[]).push([[751],{4420:function(e,t,n){n.r(t),n.d(t,{Head:function(){return i},default:function(){return d}});var o=n(6540),l=n(4794),r=n(4967),c=n(9967),a=n(7528);var s=e=>{let{tableOfContents:t}=e;const{0:n,1:l}=(0,o.useState)(""),{0:r,1:c}=(0,o.useState)([]),a=(0,o.useRef)(null),s=(0,o.useCallback)(e=>{if(!e)return[];const t=document.createElement("div");t.innerHTML=e;const n=t.querySelectorAll('a[href^="#"]');return Array.from(n).map(e=>{const t=e.getAttribute("href");if(!t)return null;const n=t.substring(1);try{const e=decodeURIComponent(n);return console.log(`ID 변환: ${n} -> ${e}`),{encoded:n,decoded:e}}catch(o){return console.warn(`URL 디코딩 실패: ${n}`,o),{encoded:n,decoded:n}}}).filter(Boolean)},[]);(0,o.useEffect)(()=>{if(!t)return;const e=setTimeout(()=>{console.log("=== TOC Debug Start ==="),console.log("TableOfContents HTML:",t);const e=s(t);console.log("TOC에서 추출된 ID 객체들:",e);const n=document.querySelectorAll("h1, h2, h3, h4, h5, h6");console.log("페이지의 모든 헤딩들:"),n.forEach((e,t)=>{console.log(`${t+1}. ID: "${e.id}", Text: "${e.textContent.trim()}", Tag: ${e.tagName}`)});const o=[];e.forEach(e=>{let t=document.getElementById(e.encoded);t||(t=document.getElementById(e.decoded)),t?(console.log(`ID "${e.encoded}" 또는 "${e.decoded}"에 해당하는 요소 찾음:`,t.tagName,t.textContent.trim()),t.matches("h1, h2, h3, h4, h5, h6")?o.push(t):console.warn(`ID "${e.encoded}"는 헤딩 요소가 아닙니다:`,t.tagName)):console.warn(`ID "${e.encoded}" 또는 "${e.decoded}"에 해당하는 요소를 찾을 수 없습니다`)});const r=Array.from(n).filter(e=>e.id);console.log("ID가 있는 모든 헤딩들:",r.map(e=>({id:e.id,text:e.textContent.trim()}))),r.forEach(e=>{o.includes(e)||(console.log(`TOC에 없지만 실제 존재하는 헤딩 추가: ${e.id} - "${e.textContent.trim()}"`),o.push(e))}),o.sort((e,t)=>{const n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return n.top-o.top}),console.log("최종 감지된 헤딩들:",o.map(e=>({id:e.id,text:e.textContent.trim()}))),console.log("=== TOC Debug End ==="),c(o),o.length>0&&l(o[0].id)},500);return()=>clearTimeout(e)},[t,s]),(0,o.useEffect)(()=>{if(0===r.length)return;const e=()=>{const e=window.pageYOffset;let t="",o=null,c=1/0;if(r.forEach(e=>{const t=e.getBoundingClientRect().top;if(t<=200&&t>=-100){const n=Math.abs(t-100);n<c&&(c=n,o=e)}}),!o)for(let n=r.length-1;n>=0;n--){const t=r[n];if(t.getBoundingClientRect().top+e<=e+150){o=t;break}}!o&&r[0]&&(o=r[0]),o&&(t=o.id),t!==n&&(console.log(`Active ID 변경: ${n} -> ${t}`),l(t))};let t=!1;const o=()=>{t||(requestAnimationFrame(()=>{e(),t=!1}),t=!0)};return window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),e(),()=>{window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}},[r,n]);const i=(0,o.useCallback)(e=>{if("A"!==e.target.tagName)return;e.preventDefault();const t=e.target.getAttribute("href");if(!t||!t.startsWith("#"))return;const n=t.substring(1);console.log(`TOC 링크 클릭: ${n}`);let o=document.getElementById(n);if(!o)try{const e=decodeURIComponent(n);console.log(`디코딩된 ID로 재시도: ${e}`),o=document.getElementById(e)}catch(e){console.warn(`URL 디코딩 실패: ${n}`,e)}if(o){const e=o.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:e,behavior:"smooth"}),l(o.id)}else console.warn(`클릭한 링크의 대상 요소를 찾을 수 없음: ${n}`)},[]),d=o.useMemo(()=>{if(!t)return t;let e=t;if(e=e.replace(/\s*class="[^"]*active[^"]*"/g,""),e=e.replace(/\s*class=""/g,""),n){let t=!1;try{const o=encodeURIComponent(n),l=new RegExp(`(<a[^>]*href="#${o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}"[^>]*)(>)`,"g");e.match(l)&&(e=e.replace(l,'$1 class="active"$2'),console.log(`Active 클래스 적용 (인코딩): ${o}`),t=!0)}catch(o){console.warn(`URL 인코딩 실패: ${n}`,o)}if(!t){const t=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(`(<a[^>]*href="#${t}"[^>]*)(>)`,"g");e=e.replace(o,'$1 class="active"$2'),console.log(`Active 클래스 적용 (원본): ${n}`)}}return e},[t,n]);return t?o.createElement("aside",{className:"toc-container",ref:a},o.createElement("h3",{className:"toc-title"},"목차"),o.createElement("div",{className:"toc-content",onClick:i,dangerouslySetInnerHTML:{__html:d}})):null};const i=e=>{let{data:{markdownRemark:t}}=e;return o.createElement(a.A,{title:t.frontmatter.title,description:t.frontmatter.description||t.excerpt})};var d=e=>{var t;let{data:{previous:n,next:a,site:i,markdownRemark:d},location:m}=e;const u=(null===(t=i.siteMetadata)||void 0===t?void 0:t.title)||"Title";return o.useEffect(()=>{const e=document.createElement("div");e.className="scroll-progress",document.body.appendChild(e);const t=()=>{const t=window.pageYOffset/(document.body.scrollHeight-window.innerHeight)*100;e.style.width=t+"%"};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t),document.body.contains(e)&&document.body.removeChild(e)}},[]),o.createElement(c.A,{location:m,title:u},o.createElement("div",{className:"blog-post-layout"},o.createElement("div",{className:"blog-post-container"},o.createElement("article",{className:"blog-post",itemScope:!0,itemType:"http://schema.org/Article"},o.createElement("header",null,o.createElement("h1",null,d.frontmatter.title),o.createElement("p",{className:"post-date"},d.frontmatter.date),o.createElement("p",null,d.frontmatter.tags&&d.frontmatter.tags.length>0&&o.createElement("div",{className:"tags-container"},d.frontmatter.tags.map(e=>o.createElement("span",{key:e,className:"tag"},"#",e))))),o.createElement("section",{dangerouslySetInnerHTML:{__html:d.html},itemProp:"articleBody"}),o.createElement("hr",null),o.createElement("footer",null,o.createElement(r.A,null)))),d.tableOfContents&&o.createElement(s,{tableOfContents:d.tableOfContents})),o.createElement("nav",{className:"blog-post-nav"},o.createElement("ul",null,o.createElement("li",null,n&&o.createElement(l.Link,{to:n.fields.slug,rel:"이전 글"},n.frontmatter.title)),o.createElement("li",null,a&&o.createElement(l.Link,{to:a.fields.slug,rel:"다음 글"},a.frontmatter.title)))))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-76ba1df29747bd8b2657.js.map