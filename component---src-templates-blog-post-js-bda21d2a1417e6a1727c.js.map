{"version":3,"file":"component---src-templates-blog-post-js-bda21d2a1417e6a1727c.js","mappings":"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","sources":["webpack://gatsby-starter-blog/./src/components/toc.module.css","webpack://gatsby-starter-blog/./src/components/toc.js","webpack://gatsby-starter-blog/./src/templates/blog-post.js","webpack://gatsby-starter-blog/./src/templates/blog-post.module.css"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport var active = \"toc-module--active--399c5\";\nexport var mobileCloseButton = \"toc-module--mobileCloseButton--e0810\";\nexport var mobileOpen = \"toc-module--mobileOpen--ceec0\";\nexport var mobileTocBackdrop = \"toc-module--mobileTocBackdrop--a19ba\";\nexport var mobileTocButton = \"toc-module--mobileTocButton--56883\";\nexport var mobileVisible = \"toc-module--mobileVisible--a82c0\";\nexport var tocContainer = \"toc-module--tocContainer--ffa0b\";\nexport var tocContent = \"toc-module--tocContent--d6318\";\nexport var tocHeader = \"toc-module--tocHeader--b1f84\";\nexport var tocProgress = \"toc-module--tocProgress--b5e48\";\nexport var tocProgressFill = \"toc-module--tocProgressFill--48e0b\";\nexport var tocTitle = \"toc-module--tocTitle--0befc\";","import React, { useCallback, useEffect, useMemo, useState } from \"react\"\nimport * as styles from \"./toc.module.css\"\n\nconst TableOfContents = ({ tableOfContents }) => {\n  const [activeId, setActiveId] = useState(\"\")\n  const [headings, setHeadings] = useState([])\n  const [isMobileTocOpen, setIsMobileTocOpen] = useState(false)\n\n  const extractTocIds = useCallback(tocHtml => {\n    if (!tocHtml) return []\n\n    const tempDiv = document.createElement(\"div\")\n    tempDiv.innerHTML = tocHtml\n    const links = tempDiv.querySelectorAll('a[href^=\"#\"]')\n\n    return Array.from(links)\n      .map(link => {\n        const href = link.getAttribute(\"href\")\n        if (!href) return null\n        const encodedId = href.substring(1)\n\n        try {\n          return { encoded: encodedId, decoded: decodeURIComponent(encodedId) }\n        } catch {\n          return { encoded: encodedId, decoded: encodedId }\n        }\n      })\n      .filter(Boolean)\n  }, [])\n\n  useEffect(() => {\n    if (!tableOfContents) return\n\n    const findHeadings = () => {\n      const tocIdObjects = extractTocIds(tableOfContents)\n      const contentHeadings = Array.from(\n        document.querySelectorAll(\".blog-post-content h1, .blog-post-content h2, .blog-post-content h3, .blog-post-content h4, .blog-post-content h5, .blog-post-content h6\")\n      ).filter(h => h.id)\n\n      const fromToc = tocIdObjects\n        .map(({ encoded, decoded }) => {\n          const element = document.getElementById(encoded) || document.getElementById(decoded)\n          return element && element.matches(\"h1, h2, h3, h4, h5, h6\") ? element : null\n        })\n        .filter(Boolean)\n\n      const mergedHeadings = Array.from(new Set([...fromToc, ...contentHeadings])).sort(\n        (a, b) => a.offsetTop - b.offsetTop\n      )\n\n      setHeadings(mergedHeadings)\n      if (mergedHeadings.length > 0) {\n        setActiveId(mergedHeadings[0].id)\n      }\n    }\n\n    const timer = setTimeout(findHeadings, 250)\n    return () => clearTimeout(timer)\n  }, [extractTocIds, tableOfContents])\n\n  useEffect(() => {\n    if (headings.length === 0) return\n\n    const handleScroll = () => {\n      const scrollY = window.pageYOffset\n      let current = headings[0]\n\n      for (let i = 0; i < headings.length; i += 1) {\n        const heading = headings[i]\n        const offsetTop = heading.getBoundingClientRect().top + scrollY\n        if (offsetTop <= scrollY + 140) {\n          current = heading\n        } else {\n          break\n        }\n      }\n\n      if (current?.id) {\n        setActiveId(prev => (current.id !== prev ? current.id : prev))\n      }\n    }\n\n    let ticking = false\n    const onScroll = () => {\n      if (ticking) return\n      ticking = true\n      requestAnimationFrame(() => {\n        handleScroll()\n        ticking = false\n      })\n    }\n\n    window.addEventListener(\"scroll\", onScroll, { passive: true })\n    window.addEventListener(\"resize\", onScroll, { passive: true })\n    handleScroll()\n\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll)\n      window.removeEventListener(\"resize\", onScroll)\n    }\n  }, [headings])\n\n  const handleTocClick = useCallback(e => {\n    const anchor = e.target instanceof Element ? e.target.closest(\"a\") : null\n    if (!anchor) return\n\n    e.preventDefault()\n    const href = anchor.getAttribute(\"href\")\n    if (!href || !href.startsWith(\"#\")) return\n\n    const encodedId = href.substring(1)\n    let targetElement = document.getElementById(encodedId)\n\n    if (!targetElement) {\n      try {\n        targetElement = document.getElementById(decodeURIComponent(encodedId))\n      } catch {\n        targetElement = null\n      }\n    }\n\n    if (!targetElement) return\n\n    const offsetTop = targetElement.getBoundingClientRect().top + window.pageYOffset - 96\n    window.scrollTo({ top: offsetTop, behavior: \"smooth\" })\n    setActiveId(targetElement.id)\n    setIsMobileTocOpen(false)\n  }, [])\n\n  useEffect(() => {\n    if (!isMobileTocOpen) return undefined\n\n    const previousOverflow = document.body.style.overflow\n    document.body.style.overflow = \"hidden\"\n\n    const handleEscape = event => {\n      if (event.key === \"Escape\") {\n        setIsMobileTocOpen(false)\n      }\n    }\n\n    document.addEventListener(\"keydown\", handleEscape)\n\n    return () => {\n      document.body.style.overflow = previousOverflow\n      document.removeEventListener(\"keydown\", handleEscape)\n    }\n  }, [isMobileTocOpen])\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(\"(max-width: 42rem)\")\n\n    const handleViewportChange = event => {\n      if (!event.matches) {\n        setIsMobileTocOpen(false)\n      }\n    }\n\n    if (mediaQuery.addEventListener) {\n      mediaQuery.addEventListener(\"change\", handleViewportChange)\n      return () => mediaQuery.removeEventListener(\"change\", handleViewportChange)\n    }\n\n    mediaQuery.addListener(handleViewportChange)\n    return () => mediaQuery.removeListener(handleViewportChange)\n  }, [])\n\n  const processedTableOfContents = useMemo(() => {\n    if (!tableOfContents) return tableOfContents\n    let processed = tableOfContents\n    processed = processed.replace(/\\s*class=\"[^\"]*active[^\"]*\"/g, \"\")\n    processed = processed.replace(/\\s*class=\"\"/g, \"\")\n\n    if (!activeId) return processed\n\n    try {\n      const encodedActiveId = encodeURIComponent(activeId).replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")\n      const encodedRegex = new RegExp(`(<a[^>]*href=\"#${encodedActiveId}\"[^>]*)(>)`, \"g\")\n      if (encodedRegex.test(processed)) {\n        return processed.replace(encodedRegex, `$1 class=\"${styles.active}\"$2`)\n      }\n    } catch {}\n\n    const escapedId = activeId.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")\n    const rawRegex = new RegExp(`(<a[^>]*href=\"#${escapedId}\"[^>]*)(>)`, \"g\")\n    return processed.replace(rawRegex, `$1 class=\"${styles.active}\"$2`)\n  }, [activeId, tableOfContents])\n\n  const progress = useMemo(() => {\n    if (headings.length === 0) return 0\n    const currentIndex = headings.findIndex(heading => heading.id === activeId)\n    const safeIndex = currentIndex < 0 ? 0 : currentIndex\n    return ((safeIndex + 1) / headings.length) * 100\n  }, [activeId, headings])\n\n  if (!tableOfContents?.trim()) return null\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        className={styles.mobileTocButton}\n        onClick={() => setIsMobileTocOpen(true)}\n        aria-haspopup=\"dialog\"\n        aria-expanded={isMobileTocOpen}\n        aria-controls=\"mobile-toc-sheet\"\n      >\n        목차\n      </button>\n\n      <button\n        type=\"button\"\n        className={`${styles.mobileTocBackdrop} ${isMobileTocOpen ? styles.mobileVisible : \"\"}`}\n        aria-label=\"목차 닫기\"\n        onClick={() => setIsMobileTocOpen(false)}\n      />\n\n      <aside\n        id=\"mobile-toc-sheet\"\n        className={`${styles.tocContainer} ${isMobileTocOpen ? styles.mobileOpen : \"\"}`}\n      >\n        <div className={styles.tocHeader}>\n          <h3 className={styles.tocTitle}>목차</h3>\n          <button\n            type=\"button\"\n            className={styles.mobileCloseButton}\n            onClick={() => setIsMobileTocOpen(false)}\n            aria-label=\"목차 닫기\"\n          >\n            닫기\n          </button>\n        </div>\n        <div className={styles.tocProgress} aria-hidden=\"true\">\n          <span className={styles.tocProgressFill} style={{ width: `${progress}%` }} />\n        </div>\n        <div\n          className={styles.tocContent}\n          onClick={handleTocClick}\n          dangerouslySetInnerHTML={{ __html: processedTableOfContents }}\n        />\n      </aside>\n    </>\n  )\n}\n\nexport default TableOfContents\n","import * as React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport Seo from \"../components/seo\"\nimport TableOfContents from \"../components/toc\"\nimport * as styles from \"./blog-post.module.css\"\nimport { getFirstImageFromHtml } from \"../utils/post-utils\"\n\nconst withNewTabLinks = html => {\n  if (!html) return html\n\n  return html.replace(/<a\\s+([^>]*href=(?:\"[^\"]*\"|'[^']*')[^>]*)>/gi, (match, attrs) => {\n    let nextAttrs = attrs\n\n    if (!/\\btarget\\s*=/i.test(nextAttrs)) {\n      nextAttrs = `${nextAttrs} target=\"_blank\"`\n    } else {\n      nextAttrs = nextAttrs.replace(/\\btarget\\s*=\\s*(['\"])[^'\"]*\\1/i, 'target=\"_blank\"')\n    }\n\n    if (!/\\brel\\s*=/i.test(nextAttrs)) {\n      nextAttrs = `${nextAttrs} rel=\"noopener noreferrer\"`\n    } else {\n      nextAttrs = nextAttrs.replace(/\\brel\\s*=\\s*(['\"])([^'\"]*)\\1/i, (relMatch, quote, value) => {\n        const tokens = value.split(/\\s+/).filter(Boolean)\n        if (!tokens.includes(\"noopener\")) tokens.push(\"noopener\")\n        if (!tokens.includes(\"noreferrer\")) tokens.push(\"noreferrer\")\n        return `rel=${quote}${tokens.join(\" \")}${quote}`\n      })\n    }\n\n    return `<a ${nextAttrs}>`\n  })\n}\n\nconst copyTextToClipboard = async text => {\n  if (typeof window === \"undefined\") return false\n\n  if (navigator.clipboard?.writeText) {\n    await navigator.clipboard.writeText(text)\n    return true\n  }\n\n  const textarea = document.createElement(\"textarea\")\n  textarea.value = text\n  textarea.setAttribute(\"readonly\", \"\")\n  textarea.style.position = \"absolute\"\n  textarea.style.left = \"-9999px\"\n  document.body.appendChild(textarea)\n  textarea.select()\n\n  const copied = document.execCommand(\"copy\")\n  document.body.removeChild(textarea)\n  return copied\n}\n\nconst BlogPostTemplate = ({\n  data: { previous, next, site, markdownRemark: post },\n  location,\n}) => {\n  const siteTitle = site.siteMetadata?.title || `Title`\n  const postHtml = React.useMemo(() => withNewTabLinks(post.html), [post.html])\n  const [scrollProgress, setScrollProgress] = React.useState(0)\n  const [toastMessage, setToastMessage] = React.useState(\"\")\n  const [isToastVisible, setIsToastVisible] = React.useState(false)\n  const toastTimerRef = React.useRef(null)\n\n  React.useEffect(() => {\n    const updateProgress = () => {\n      const scrollTop = window.pageYOffset\n      const docHeight = document.body.scrollHeight - window.innerHeight\n      const scrollPercent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0\n      setScrollProgress(Math.min(100, Math.max(0, scrollPercent)))\n    }\n\n    window.addEventListener(\"scroll\", updateProgress, { passive: true })\n    window.addEventListener(\"resize\", updateProgress, { passive: true })\n    updateProgress()\n\n    return () => {\n      window.removeEventListener(\"scroll\", updateProgress)\n      window.removeEventListener(\"resize\", updateProgress)\n    }\n  }, [])\n\n  React.useEffect(\n    () => () => {\n      if (toastTimerRef.current) {\n        window.clearTimeout(toastTimerRef.current)\n      }\n    },\n    []\n  )\n\n  const handleShareClick = async () => {\n    try {\n      const currentUrl = typeof window !== \"undefined\" ? window.location.href : location.pathname\n      const copied = await copyTextToClipboard(currentUrl)\n      const message = copied ? \"링크가 복사되었습니다.\" : \"복사에 실패했습니다.\"\n      setToastMessage(message)\n      setIsToastVisible(true)\n    } catch (error) {\n      setToastMessage(\"복사에 실패했습니다.\")\n      setIsToastVisible(true)\n    }\n\n    if (toastTimerRef.current) {\n      window.clearTimeout(toastTimerRef.current)\n    }\n\n    toastTimerRef.current = window.setTimeout(() => {\n      setIsToastVisible(false)\n    }, 2200)\n  }\n\n  return (\n    <Layout location={location} title={siteTitle} variant=\"post\">\n      <div className={styles.scrollProgress} style={{ width: `${scrollProgress}%` }} aria-hidden=\"true\" />\n      <div className={styles.blogPostLayout}>\n        <div className={styles.blogPostContainer}>\n          <article\n            className={styles.blogPost}\n            itemScope\n            itemType=\"http://schema.org/Article\"\n          >\n            <header className={styles.blogPostHeader}>\n              <h1 className={styles.postTitle}>{post.frontmatter.title}</h1>\n              <time className={styles.postDate}>{post.frontmatter.date}</time>\n              <div className={styles.metaRow}>\n                {post.frontmatter.tags && post.frontmatter.tags.length > 0 && (\n                  <div className={styles.tagsContainer}>\n                    {post.frontmatter.tags.map(tag => (\n                      <span key={tag} className={styles.tag}>\n                        #{tag}\n                      </span>\n                    ))}\n                  </div>\n                )}\n                <button\n                  type=\"button\"\n                  className={styles.shareButton}\n                  onClick={handleShareClick}\n                  aria-label=\"링크 공유\"\n                  title=\"링크 공유\"\n                >\n                  <svg\n                    viewBox=\"0 0 24 24\"\n                    className={styles.shareIcon}\n                    aria-hidden=\"true\"\n                    focusable=\"false\"\n                  >\n                    <path\n                      d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7a2.9 2.9 0 0 0 0-1.39l7.05-4.11A2.99 2.99 0 1 0 15 5a3 3 0 0 0 .05.52L8 9.63a3 3 0 1 0 0 4.74l7.05 4.11c-.03.17-.05.34-.05.52a3 3 0 1 0 3-2.92Z\"\n                      fill=\"currentColor\"\n                    />\n                  </svg>\n                </button>\n              </div>\n            </header>\n            <section\n              className={`${styles.blogPostContent} blog-post-content`}\n              dangerouslySetInnerHTML={{ __html: postHtml }}\n              itemProp=\"articleBody\"\n            />\n            <hr className={styles.postDivider} />\n          </article>\n          <nav className={styles.blogPostNav}>\n            <ul>\n              <li>\n                {previous && (\n                  <Link to={previous.fields.slug} rel=\"이전 글\">\n                    {previous.frontmatter.title}\n                  </Link>\n                )}\n              </li>\n              <li>\n                {next && (\n                  <Link to={next.fields.slug} rel=\"다음 글\">\n                    {next.frontmatter.title}\n                  </Link>\n                )}\n              </li>\n            </ul>\n          </nav>\n        </div>\n        {post.tableOfContents && <TableOfContents tableOfContents={post.tableOfContents} />}\n      </div>\n      <div\n        className={`${styles.toast} ${isToastVisible ? styles.toastVisible : \"\"}`}\n        role=\"status\"\n        aria-live=\"polite\"\n      >\n        {toastMessage}\n      </div>\n    </Layout>\n  )\n}\n\nexport const Head = ({ data: { markdownRemark: post }, location }) => {\n  const image = getFirstImageFromHtml(post.html)\n\n  return (\n    <Seo\n      title={post.frontmatter.title}\n      description={post.frontmatter.description || post.excerpt}\n      pathname={location.pathname}\n      image={image}\n      article\n      publishedTime={post.frontmatter.dateISO}\n    />\n  )\n}\n\nexport default BlogPostTemplate\n\nexport const pageQuery = graphql`\n  query BlogPostBySlug(\n    $id: String!\n    $previousPostId: String\n    $nextPostId: String\n  ) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    markdownRemark(id: { eq: $id }) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      tableOfContents\n      frontmatter {\n        title\n        date(formatString: \"YYYY년 M월 D일\")\n        dateISO: date(formatString: \"YYYY-MM-DD\")\n        description\n        tags\n      }\n    }\n    previous: markdownRemark(id: { eq: $previousPostId }) {\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n      }\n    }\n    next: markdownRemark(id: { eq: $nextPostId }) {\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n      }\n    }\n  }\n`\n","// extracted by mini-css-extract-plugin\nexport var blogPost = \"blog-post-module--blogPost--72ffc\";\nexport var blogPostContainer = \"blog-post-module--blogPostContainer--50728\";\nexport var blogPostContent = \"blog-post-module--blogPostContent--a2bdd\";\nexport var blogPostHeader = \"blog-post-module--blogPostHeader--0de78\";\nexport var blogPostLayout = \"blog-post-module--blogPostLayout--47121\";\nexport var blogPostNav = \"blog-post-module--blogPostNav--d05de\";\nexport var metaRow = \"blog-post-module--metaRow--1f5ff\";\nexport var postDate = \"blog-post-module--postDate--2d1aa\";\nexport var postDivider = \"blog-post-module--postDivider--aa8ca\";\nexport var postTitle = \"blog-post-module--postTitle--2c12c\";\nexport var scrollProgress = \"blog-post-module--scrollProgress--ba33a\";\nexport var shareButton = \"blog-post-module--shareButton--0c58e\";\nexport var shareIcon = \"blog-post-module--shareIcon--a967e\";\nexport var tag = \"blog-post-module--tag--a09fc\";\nexport var tagsContainer = \"blog-post-module--tagsContainer--c8b91\";\nexport var toast = \"blog-post-module--toast--c08b7\";\nexport var toastVisible = \"blog-post-module--toastVisible--a9577\";"],"names":["active","_ref","tableOfContents","activeId","setActiveId","useState","headings","setHeadings","isMobileTocOpen","setIsMobileTocOpen","extractTocIds","useCallback","tocHtml","tempDiv","document","createElement","innerHTML","links","querySelectorAll","Array","from","map","link","href","getAttribute","encodedId","substring","encoded","decoded","decodeURIComponent","_unused","filter","Boolean","useEffect","timer","setTimeout","findHeadings","tocIdObjects","contentHeadings","h","id","fromToc","_ref2","element","getElementById","matches","mergedHeadings","Set","concat","_toConsumableArray","sort","a","b","offsetTop","length","clearTimeout","handleScroll","_current","scrollY","window","pageYOffset","current","i","heading","getBoundingClientRect","top","prev","ticking","onScroll","requestAnimationFrame","addEventListener","passive","removeEventListener","handleTocClick","e","anchor","target","Element","closest","preventDefault","startsWith","targetElement","_unused2","scrollTo","behavior","previousOverflow","body","style","overflow","handleEscape","event","key","mediaQuery","matchMedia","handleViewportChange","addListener","removeListener","processedTableOfContents","useMemo","processed","replace","encodedActiveId","encodeURIComponent","encodedRegex","RegExp","test","styles","_unused3","escapedId","rawRegex","progress","currentIndex","findIndex","trim","React","type","className","onClick","width","dangerouslySetInnerHTML","__html","Head","data","markdownRemark","post","location","image","getFirstImageFromHtml","html","Seo","title","frontmatter","description","excerpt","pathname","article","publishedTime","dateISO","_site$siteMetadata","previous","next","site","siteTitle","siteMetadata","postHtml","withNewTabLinks","match","attrs","nextAttrs","relMatch","quote","value","tokens","split","includes","push","join","scrollProgress","setScrollProgress","toastMessage","setToastMessage","isToastVisible","setIsToastVisible","toastTimerRef","updateProgress","scrollTop","docHeight","scrollHeight","innerHeight","scrollPercent","Math","min","max","Layout","variant","itemScope","itemType","date","tags","tag","async","currentUrl","copied","_navigator$clipboard","navigator","clipboard","writeText","text","textarea","setAttribute","position","left","appendChild","select","execCommand","removeChild","copyTextToClipboard","error","viewBox","focusable","d","fill","itemProp","Link","to","fields","slug","rel","TableOfContents","role"],"sourceRoot":""}